ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"hw_stmgpio.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/hw_stmgpio.c"
  18              		.section	.text.stmgpio_setup,"ax",%progbits
  19              		.align	1
  20              		.global	stmgpio_setup
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	stmgpio_setup:
  26              	.LVL0:
  27              	.LFB65:
   1:Core/Src/hw_stmgpio.c **** /*
   2:Core/Src/hw_stmgpio.c **** GPIO library designed to be relatively lightwieght but human readable.
   3:Core/Src/hw_stmgpio.c **** */
   4:Core/Src/hw_stmgpio.c **** #include "hw_stmgpio.h"
   5:Core/Src/hw_stmgpio.c **** 
   6:Core/Src/hw_stmgpio.c **** /*
   7:Core/Src/hw_stmgpio.c **** const bool PORT_A_PINS[GPIO_PORT_PIN_MAX] = {
   8:Core/Src/hw_stmgpio.c ****     true, // PA0
   9:Core/Src/hw_stmgpio.c ****     true, // PA1
  10:Core/Src/hw_stmgpio.c ****     true, // PA2
  11:Core/Src/hw_stmgpio.c ****     true, // PA3
  12:Core/Src/hw_stmgpio.c ****     true, // PA4
  13:Core/Src/hw_stmgpio.c ****     true, // PA5
  14:Core/Src/hw_stmgpio.c ****     true, // PA6
  15:Core/Src/hw_stmgpio.c ****     true, // PA7
  16:Core/Src/hw_stmgpio.c ****     true, // PA8
  17:Core/Src/hw_stmgpio.c ****     true, // PA9
  18:Core/Src/hw_stmgpio.c ****     true, // PA10
  19:Core/Src/hw_stmgpio.c ****     true, // PA11
  20:Core/Src/hw_stmgpio.c ****     true, // PA12
  21:Core/Src/hw_stmgpio.c ****     true, // PA13
  22:Core/Src/hw_stmgpio.c ****     true, // PA14
  23:Core/Src/hw_stmgpio.c ****     true  // PA15
  24:Core/Src/hw_stmgpio.c **** };
  25:Core/Src/hw_stmgpio.c **** 
  26:Core/Src/hw_stmgpio.c **** const bool PORT_B_PINS[GPIO_PORT_PIN_MAX] = {
  27:Core/Src/hw_stmgpio.c ****     true, // PB0
  28:Core/Src/hw_stmgpio.c ****     true, // PB1
  29:Core/Src/hw_stmgpio.c ****     true, // PB2
  30:Core/Src/hw_stmgpio.c ****     true, // PB3
  31:Core/Src/hw_stmgpio.c ****     true, // PB4
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 2


  32:Core/Src/hw_stmgpio.c ****     true, // PB5
  33:Core/Src/hw_stmgpio.c ****     true, // PB6
  34:Core/Src/hw_stmgpio.c ****     true, // PB7
  35:Core/Src/hw_stmgpio.c ****     true, // PB8
  36:Core/Src/hw_stmgpio.c ****     true, // PB9
  37:Core/Src/hw_stmgpio.c ****     true, // PB10
  38:Core/Src/hw_stmgpio.c ****     true, // PB11
  39:Core/Src/hw_stmgpio.c ****     true, // PB12
  40:Core/Src/hw_stmgpio.c ****     true, // PB13
  41:Core/Src/hw_stmgpio.c ****     true, // PB14
  42:Core/Src/hw_stmgpio.c ****     true  // PB15
  43:Core/Src/hw_stmgpio.c **** };
  44:Core/Src/hw_stmgpio.c **** 
  45:Core/Src/hw_stmgpio.c **** const bool PORT_C_PINS[GPIO_PORT_PIN_MAX] = {
  46:Core/Src/hw_stmgpio.c ****     false, // PC0
  47:Core/Src/hw_stmgpio.c ****     false, // PC1
  48:Core/Src/hw_stmgpio.c ****     false, // PC2
  49:Core/Src/hw_stmgpio.c ****     false, // PC3
  50:Core/Src/hw_stmgpio.c ****     false, // PC4
  51:Core/Src/hw_stmgpio.c ****     false, // PC5
  52:Core/Src/hw_stmgpio.c ****     false, // PC6
  53:Core/Src/hw_stmgpio.c ****     false, // PC7
  54:Core/Src/hw_stmgpio.c ****     false, // PC8
  55:Core/Src/hw_stmgpio.c ****     false, // PC9
  56:Core/Src/hw_stmgpio.c ****     false, // PC10
  57:Core/Src/hw_stmgpio.c ****     false, // PC11
  58:Core/Src/hw_stmgpio.c ****     false, // PC12
  59:Core/Src/hw_stmgpio.c ****     true,  // PC13
  60:Core/Src/hw_stmgpio.c ****     true,  // PC14
  61:Core/Src/hw_stmgpio.c ****     true   // PC15
  62:Core/Src/hw_stmgpio.c **** };
  63:Core/Src/hw_stmgpio.c **** 
  64:Core/Src/hw_stmgpio.c **** const bool PORT_D_PINS[GPIO_PORT_PIN_MAX] = {
  65:Core/Src/hw_stmgpio.c ****     true,  // PD0
  66:Core/Src/hw_stmgpio.c ****     true,  // PD1
  67:Core/Src/hw_stmgpio.c ****     false, // PD2
  68:Core/Src/hw_stmgpio.c ****     false, // PD3
  69:Core/Src/hw_stmgpio.c ****     false, // PD4
  70:Core/Src/hw_stmgpio.c ****     false, // PD5
  71:Core/Src/hw_stmgpio.c ****     false, // PD6
  72:Core/Src/hw_stmgpio.c ****     false, // PD7
  73:Core/Src/hw_stmgpio.c ****     false, // PD8
  74:Core/Src/hw_stmgpio.c ****     false, // PD9
  75:Core/Src/hw_stmgpio.c ****     false, // PD10
  76:Core/Src/hw_stmgpio.c ****     false, // PD11
  77:Core/Src/hw_stmgpio.c ****     false, // PD12
  78:Core/Src/hw_stmgpio.c ****     false, // PD13
  79:Core/Src/hw_stmgpio.c ****     false, // PD14
  80:Core/Src/hw_stmgpio.c ****     false  // PD15
  81:Core/Src/hw_stmgpio.c **** };
  82:Core/Src/hw_stmgpio.c **** */
  83:Core/Src/hw_stmgpio.c **** 
  84:Core/Src/hw_stmgpio.c **** /*  */
  85:Core/Src/hw_stmgpio.c **** int stmgpio_setup(stmgpio_t *g)
  86:Core/Src/hw_stmgpio.c **** {
  28              		.loc 1 86 1 view -0
  29              		.cfi_startproc
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 3


  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  87:Core/Src/hw_stmgpio.c ****   __IO uint32_t *CRx;
  33              		.loc 1 87 3 view .LVU1
  88:Core/Src/hw_stmgpio.c ****   uint32_t cfgmode = g->cfg | g->dir;
  34              		.loc 1 88 3 view .LVU2
  89:Core/Src/hw_stmgpio.c ****   uint8_t pin_offset;
  35              		.loc 1 89 3 view .LVU3
  90:Core/Src/hw_stmgpio.c **** 
  91:Core/Src/hw_stmgpio.c ****   /* Find addr of base reg based on char */
  92:Core/Src/hw_stmgpio.c ****   switch (g->port)
  36              		.loc 1 92 3 view .LVU4
  37              		.loc 1 92 12 is_stmt 0 view .LVU5
  38 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
  39              		.loc 1 92 3 view .LVU6
  40 0002 A3F14102 		sub	r2, r3, #65
  41 0006 042A     		cmp	r2, #4
  42 0008 53D8     		bhi	.L14
  43 000a DFE802F0 		tbb	[pc, r2]
  44              	.L4:
  45 000e 03       		.byte	(.L8-.L4)/2
  46 000f 3A       		.byte	(.L7-.L4)/2
  47 0010 3D       		.byte	(.L6-.L4)/2
  48 0011 40       		.byte	(.L5-.L4)/2
  49 0012 43       		.byte	(.L3-.L4)/2
  50 0013 00       		.p2align 1
  51              	.L8:
  93:Core/Src/hw_stmgpio.c ****   {
  94:Core/Src/hw_stmgpio.c ****   case 'A':
  95:Core/Src/hw_stmgpio.c ****     g->port_reg_addr = (GPIO_TypeDef *)(GPIOA_BASE);
  52              		.loc 1 95 5 is_stmt 1 view .LVU7
  53              		.loc 1 95 22 is_stmt 0 view .LVU8
  54 0014 284A     		ldr	r2, .L20
  55 0016 8260     		str	r2, [r0, #8]
  96:Core/Src/hw_stmgpio.c ****     break;
  56              		.loc 1 96 5 is_stmt 1 view .LVU9
  57              	.L9:
  86:Core/Src/hw_stmgpio.c ****   __IO uint32_t *CRx;
  58              		.loc 1 86 1 is_stmt 0 view .LVU10
  59 0018 30B4     		push	{r4, r5}
  60              		.cfi_def_cfa_offset 8
  61              		.cfi_offset 4, -8
  62              		.cfi_offset 5, -4
  97:Core/Src/hw_stmgpio.c ****   case 'B':
  98:Core/Src/hw_stmgpio.c ****     g->port_reg_addr = (GPIO_TypeDef *)(GPIOB_BASE);
  99:Core/Src/hw_stmgpio.c ****     break;
 100:Core/Src/hw_stmgpio.c ****   case 'C':
 101:Core/Src/hw_stmgpio.c ****     g->port_reg_addr = (GPIO_TypeDef *)(GPIOC_BASE);
 102:Core/Src/hw_stmgpio.c ****     break;
 103:Core/Src/hw_stmgpio.c ****   case 'D':
 104:Core/Src/hw_stmgpio.c ****     g->port_reg_addr = (GPIO_TypeDef *)(GPIOD_BASE);
 105:Core/Src/hw_stmgpio.c ****     break;
 106:Core/Src/hw_stmgpio.c ****   case 'E':
 107:Core/Src/hw_stmgpio.c ****     g->port_reg_addr = (GPIO_TypeDef *)(GPIOE_BASE);
 108:Core/Src/hw_stmgpio.c ****     break;
 109:Core/Src/hw_stmgpio.c ****   default:
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 4


 110:Core/Src/hw_stmgpio.c ****     return EXIT_FAILURE;
 111:Core/Src/hw_stmgpio.c ****     break;
  63              		.loc 1 111 5 is_stmt 1 view .LVU11
 112:Core/Src/hw_stmgpio.c ****   }
 113:Core/Src/hw_stmgpio.c **** 
 114:Core/Src/hw_stmgpio.c ****   /* get pointer to config / mode register CRH or CRL */
 115:Core/Src/hw_stmgpio.c ****   if (g->pin < 8)
  64              		.loc 1 115 3 view .LVU12
  65              		.loc 1 115 8 is_stmt 0 view .LVU13
  66 001a 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
  67              		.loc 1 115 6 view .LVU14
  68 001c 072A     		cmp	r2, #7
  69 001e 3CD8     		bhi	.L10
 116:Core/Src/hw_stmgpio.c ****   {
 117:Core/Src/hw_stmgpio.c ****     CRx = &(g->port_reg_addr->CRL);
  70              		.loc 1 117 5 is_stmt 1 view .LVU15
  71              		.loc 1 117 14 is_stmt 0 view .LVU16
  72 0020 8168     		ldr	r1, [r0, #8]
  73              	.LVL1:
 118:Core/Src/hw_stmgpio.c ****     pin_offset = 0;
  74              		.loc 1 118 5 is_stmt 1 view .LVU17
  75              		.loc 1 118 16 is_stmt 0 view .LVU18
  76 0022 4FF0000C 		mov	ip, #0
  77              	.LVL2:
  78              	.L11:
 119:Core/Src/hw_stmgpio.c ****   }
 120:Core/Src/hw_stmgpio.c ****   else
 121:Core/Src/hw_stmgpio.c ****   {
 122:Core/Src/hw_stmgpio.c ****     CRx = &(g->port_reg_addr->CRH);
 123:Core/Src/hw_stmgpio.c ****     pin_offset = 8;
 124:Core/Src/hw_stmgpio.c ****   }
 125:Core/Src/hw_stmgpio.c **** 
 126:Core/Src/hw_stmgpio.c ****   /* Turn on ports clock if not already on */
 127:Core/Src/hw_stmgpio.c ****   RCC->APB2ENR |= RCC_APB2ENR_IOPAEN << (g->port - 'A');           // main port io clock
  79              		.loc 1 127 3 is_stmt 1 view .LVU19
  80              		.loc 1 127 6 is_stmt 0 view .LVU20
  81 0026 254D     		ldr	r5, .L20+4
  82 0028 AA69     		ldr	r2, [r5, #24]
  83              		.loc 1 127 50 view .LVU21
  84 002a 413B     		subs	r3, r3, #65
  85              		.loc 1 127 38 view .LVU22
  86 002c 0424     		movs	r4, #4
  87 002e 04FA03F3 		lsl	r3, r4, r3
  88              		.loc 1 127 16 view .LVU23
  89 0032 1343     		orrs	r3, r3, r2
  90 0034 AB61     		str	r3, [r5, #24]
  91              	.LVL3:
 128:Core/Src/hw_stmgpio.c ****   if ((OUT_ALT_OPENDRAIN == g->cfg) || OUT_ALT_PUSHPULL == g->cfg) // alt function clock
  92              		.loc 1 128 3 is_stmt 1 view .LVU24
  93              		.loc 1 128 30 is_stmt 0 view .LVU25
  94 0036 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
  95              		.loc 1 128 6 view .LVU26
  96 0038 0C2B     		cmp	r3, #12
  97 003a 01D0     		beq	.L12
  98              		.loc 1 128 37 discriminator 1 view .LVU27
  99 003c 082B     		cmp	r3, #8
 100 003e 04D1     		bne	.L13
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 5


 101              	.L12:
 129:Core/Src/hw_stmgpio.c ****   {
 130:Core/Src/hw_stmgpio.c ****     RCC->APB2ENR |= RCC_APB2ENR_AFIOEN;
 102              		.loc 1 130 5 is_stmt 1 view .LVU28
 103              		.loc 1 130 8 is_stmt 0 view .LVU29
 104 0040 1E4A     		ldr	r2, .L20+4
 105 0042 9369     		ldr	r3, [r2, #24]
 106              		.loc 1 130 18 view .LVU30
 107 0044 43F00103 		orr	r3, r3, #1
 108 0048 9361     		str	r3, [r2, #24]
 109              	.L13:
 131:Core/Src/hw_stmgpio.c ****   }
 132:Core/Src/hw_stmgpio.c **** 
 133:Core/Src/hw_stmgpio.c ****   /* MODE/CFG reg */
 134:Core/Src/hw_stmgpio.c ****   *CRx &= ~(REG_PIN_CONF_BITLENGTH_Msk << (REG_PIN_CONF_BITLENGTH * (g->pin - pin_offset)));
 110              		.loc 1 134 3 is_stmt 1 view .LVU31
 111 004a 0A68     		ldr	r2, [r1]
 112              		.loc 1 134 71 is_stmt 0 view .LVU32
 113 004c 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 114              		.loc 1 134 77 view .LVU33
 115 004e A3EB0C03 		sub	r3, r3, ip
 116              		.loc 1 134 67 view .LVU34
 117 0052 9B00     		lsls	r3, r3, #2
 118              		.loc 1 134 40 view .LVU35
 119 0054 0F24     		movs	r4, #15
 120 0056 04FA03F3 		lsl	r3, r4, r3
 121              		.loc 1 134 8 view .LVU36
 122 005a 22EA0303 		bic	r3, r2, r3
 123 005e 0B60     		str	r3, [r1]
 135:Core/Src/hw_stmgpio.c ****   *CRx |= (g->cfg | g->dir) << (REG_PIN_CONF_BITLENGTH * (g->pin - pin_offset));
 124              		.loc 1 135 3 is_stmt 1 view .LVU37
 125 0060 0C68     		ldr	r4, [r1]
 126              		.loc 1 135 13 is_stmt 0 view .LVU38
 127 0062 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 128              		.loc 1 135 22 view .LVU39
 129 0064 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 130              		.loc 1 135 19 view .LVU40
 131 0066 1343     		orrs	r3, r3, r2
 132              		.loc 1 135 60 view .LVU41
 133 0068 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
 134              		.loc 1 135 66 view .LVU42
 135 006a A2EB0C02 		sub	r2, r2, ip
 136              		.loc 1 135 56 view .LVU43
 137 006e 9200     		lsls	r2, r2, #2
 138              		.loc 1 135 29 view .LVU44
 139 0070 9340     		lsls	r3, r3, r2
 140              		.loc 1 135 8 view .LVU45
 141 0072 2343     		orrs	r3, r3, r4
 142 0074 0B60     		str	r3, [r1]
 136:Core/Src/hw_stmgpio.c **** 
 137:Core/Src/hw_stmgpio.c ****   /* Set pullup or down depending if type input-pull */
 138:Core/Src/hw_stmgpio.c ****   if (IN_PULL == g->cfg)
 143              		.loc 1 138 3 is_stmt 1 view .LVU46
 144              		.loc 1 138 19 is_stmt 0 view .LVU47
 145 0076 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 146              		.loc 1 138 6 view .LVU48
 147 0078 082B     		cmp	r3, #8
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 6


 148 007a 13D0     		beq	.L19
 139:Core/Src/hw_stmgpio.c ****   {
 140:Core/Src/hw_stmgpio.c ****     g->port_reg_addr->ODR = ((uint32_t)(g->pull)) << g->pin;
 141:Core/Src/hw_stmgpio.c ****   }
 142:Core/Src/hw_stmgpio.c **** 
 143:Core/Src/hw_stmgpio.c ****   /* huzzah */
 144:Core/Src/hw_stmgpio.c ****   return EXIT_SUCCESS;
 149              		.loc 1 144 10 view .LVU49
 150 007c 0020     		movs	r0, #0
 151              	.LVL4:
 152              	.L1:
 145:Core/Src/hw_stmgpio.c **** }
 153              		.loc 1 145 1 view .LVU50
 154 007e 30BC     		pop	{r4, r5}
 155              		.cfi_restore 5
 156              		.cfi_restore 4
 157              		.cfi_def_cfa_offset 0
 158 0080 7047     		bx	lr
 159              	.LVL5:
 160              	.L7:
  98:Core/Src/hw_stmgpio.c ****     break;
 161              		.loc 1 98 5 is_stmt 1 view .LVU51
  98:Core/Src/hw_stmgpio.c ****     break;
 162              		.loc 1 98 22 is_stmt 0 view .LVU52
 163 0082 0F4A     		ldr	r2, .L20+8
 164 0084 8260     		str	r2, [r0, #8]
  99:Core/Src/hw_stmgpio.c ****   case 'C':
 165              		.loc 1 99 5 is_stmt 1 view .LVU53
 166 0086 C7E7     		b	.L9
 167              	.L6:
 101:Core/Src/hw_stmgpio.c ****     break;
 168              		.loc 1 101 5 view .LVU54
 101:Core/Src/hw_stmgpio.c ****     break;
 169              		.loc 1 101 22 is_stmt 0 view .LVU55
 170 0088 0E4A     		ldr	r2, .L20+12
 171 008a 8260     		str	r2, [r0, #8]
 102:Core/Src/hw_stmgpio.c ****   case 'D':
 172              		.loc 1 102 5 is_stmt 1 view .LVU56
 173 008c C4E7     		b	.L9
 174              	.L5:
 104:Core/Src/hw_stmgpio.c ****     break;
 175              		.loc 1 104 5 view .LVU57
 104:Core/Src/hw_stmgpio.c ****     break;
 176              		.loc 1 104 22 is_stmt 0 view .LVU58
 177 008e 0E4A     		ldr	r2, .L20+16
 178 0090 8260     		str	r2, [r0, #8]
 105:Core/Src/hw_stmgpio.c ****   case 'E':
 179              		.loc 1 105 5 is_stmt 1 view .LVU59
 180 0092 C1E7     		b	.L9
 181              	.L3:
 107:Core/Src/hw_stmgpio.c ****     break;
 182              		.loc 1 107 5 view .LVU60
 107:Core/Src/hw_stmgpio.c ****     break;
 183              		.loc 1 107 22 is_stmt 0 view .LVU61
 184 0094 0D4A     		ldr	r2, .L20+20
 185 0096 8260     		str	r2, [r0, #8]
 108:Core/Src/hw_stmgpio.c ****   default:
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 7


 186              		.loc 1 108 5 is_stmt 1 view .LVU62
 187 0098 BEE7     		b	.L9
 188              	.L10:
 189              		.cfi_def_cfa_offset 8
 190              		.cfi_offset 4, -8
 191              		.cfi_offset 5, -4
 122:Core/Src/hw_stmgpio.c ****     pin_offset = 8;
 192              		.loc 1 122 5 view .LVU63
 122:Core/Src/hw_stmgpio.c ****     pin_offset = 8;
 193              		.loc 1 122 14 is_stmt 0 view .LVU64
 194 009a 8168     		ldr	r1, [r0, #8]
 122:Core/Src/hw_stmgpio.c ****     pin_offset = 8;
 195              		.loc 1 122 9 view .LVU65
 196 009c 0431     		adds	r1, r1, #4
 197              	.LVL6:
 123:Core/Src/hw_stmgpio.c ****   }
 198              		.loc 1 123 5 is_stmt 1 view .LVU66
 123:Core/Src/hw_stmgpio.c ****   }
 199              		.loc 1 123 16 is_stmt 0 view .LVU67
 200 009e 4FF0080C 		mov	ip, #8
 201 00a2 C0E7     		b	.L11
 202              	.LVL7:
 203              	.L19:
 140:Core/Src/hw_stmgpio.c ****   }
 204              		.loc 1 140 5 is_stmt 1 view .LVU68
 140:Core/Src/hw_stmgpio.c ****   }
 205              		.loc 1 140 42 is_stmt 0 view .LVU69
 206 00a4 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 140:Core/Src/hw_stmgpio.c ****   }
 207              		.loc 1 140 55 view .LVU70
 208 00a6 4179     		ldrb	r1, [r0, #5]	@ zero_extendqisi2
 209              	.LVL8:
 140:Core/Src/hw_stmgpio.c ****   }
 210              		.loc 1 140 6 view .LVU71
 211 00a8 8268     		ldr	r2, [r0, #8]
 140:Core/Src/hw_stmgpio.c ****   }
 212              		.loc 1 140 51 view .LVU72
 213 00aa 8B40     		lsls	r3, r3, r1
 140:Core/Src/hw_stmgpio.c ****   }
 214              		.loc 1 140 27 view .LVU73
 215 00ac D360     		str	r3, [r2, #12]
 144:Core/Src/hw_stmgpio.c **** }
 216              		.loc 1 144 10 view .LVU74
 217 00ae 0020     		movs	r0, #0
 218              	.LVL9:
 144:Core/Src/hw_stmgpio.c **** }
 219              		.loc 1 144 10 view .LVU75
 220 00b0 E5E7     		b	.L1
 221              	.LVL10:
 222              	.L14:
 223              		.cfi_def_cfa_offset 0
 224              		.cfi_restore 4
 225              		.cfi_restore 5
  92:Core/Src/hw_stmgpio.c ****   {
 226              		.loc 1 92 3 view .LVU76
 227 00b2 0120     		movs	r0, #1
 228              	.LVL11:
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 8


 229              		.loc 1 145 1 view .LVU77
 230 00b4 7047     		bx	lr
 231              	.L21:
 232 00b6 00BF     		.align	2
 233              	.L20:
 234 00b8 00080140 		.word	1073809408
 235 00bc 00100240 		.word	1073876992
 236 00c0 000C0140 		.word	1073810432
 237 00c4 00100140 		.word	1073811456
 238 00c8 00140140 		.word	1073812480
 239 00cc 00180140 		.word	1073813504
 240              		.cfi_endproc
 241              	.LFE65:
 243              		.section	.text.stmgpio_write,"ax",%progbits
 244              		.align	1
 245              		.global	stmgpio_write
 246              		.syntax unified
 247              		.thumb
 248              		.thumb_func
 250              	stmgpio_write:
 251              	.LVL12:
 252              	.LFB66:
 146:Core/Src/hw_stmgpio.c **** 
 147:Core/Src/hw_stmgpio.c **** int stmgpio_write(stmgpio_t *g, stmgpio_state_t set_state)
 148:Core/Src/hw_stmgpio.c **** {
 253              		.loc 1 148 1 is_stmt 1 view -0
 254              		.cfi_startproc
 255              		@ args = 0, pretend = 0, frame = 0
 256              		@ frame_needed = 0, uses_anonymous_args = 0
 257              		@ link register save eliminated.
 149:Core/Src/hw_stmgpio.c ****   if ((STATE_CNT <= set_state) || (NULL == g))
 258              		.loc 1 149 3 view .LVU79
 259              		.loc 1 149 6 is_stmt 0 view .LVU80
 260 0000 0129     		cmp	r1, #1
 261 0002 0AD8     		bhi	.L24
 262              		.loc 1 149 32 discriminator 1 view .LVU81
 263 0004 58B1     		cbz	r0, .L25
 150:Core/Src/hw_stmgpio.c ****   {
 151:Core/Src/hw_stmgpio.c ****     return EXIT_FAILURE;
 152:Core/Src/hw_stmgpio.c ****   }
 153:Core/Src/hw_stmgpio.c **** 
 154:Core/Src/hw_stmgpio.c ****   g->state = set_state;
 264              		.loc 1 154 3 is_stmt 1 view .LVU82
 265              		.loc 1 154 12 is_stmt 0 view .LVU83
 266 0006 0170     		strb	r1, [r0]
 155:Core/Src/hw_stmgpio.c ****   g->port_reg_addr->BSRR = (0x01 << g->pin << (((uint8_t)set_state) * 0x10));
 267              		.loc 1 155 3 is_stmt 1 view .LVU84
 268              		.loc 1 155 38 is_stmt 0 view .LVU85
 269 0008 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
 270              		.loc 1 155 34 view .LVU86
 271 000a 0123     		movs	r3, #1
 272 000c 9340     		lsls	r3, r3, r2
 273              		.loc 1 155 69 view .LVU87
 274 000e 0901     		lsls	r1, r1, #4
 275              	.LVL13:
 276              		.loc 1 155 4 view .LVU88
 277 0010 8268     		ldr	r2, [r0, #8]
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 9


 278              		.loc 1 155 44 view .LVU89
 279 0012 8B40     		lsls	r3, r3, r1
 280              		.loc 1 155 26 view .LVU90
 281 0014 1361     		str	r3, [r2, #16]
 282              	.LVL14:
 156:Core/Src/hw_stmgpio.c **** 
 157:Core/Src/hw_stmgpio.c ****   return EXIT_SUCCESS;
 283              		.loc 1 157 3 is_stmt 1 view .LVU91
 284              		.loc 1 157 10 is_stmt 0 view .LVU92
 285 0016 0020     		movs	r0, #0
 286              	.LVL15:
 287              		.loc 1 157 10 view .LVU93
 288 0018 7047     		bx	lr
 289              	.LVL16:
 290              	.L24:
 151:Core/Src/hw_stmgpio.c ****   }
 291              		.loc 1 151 12 view .LVU94
 292 001a 0120     		movs	r0, #1
 293              	.LVL17:
 151:Core/Src/hw_stmgpio.c ****   }
 294              		.loc 1 151 12 view .LVU95
 295 001c 7047     		bx	lr
 296              	.LVL18:
 297              	.L25:
 151:Core/Src/hw_stmgpio.c ****   }
 298              		.loc 1 151 12 view .LVU96
 299 001e 0120     		movs	r0, #1
 300              	.LVL19:
 158:Core/Src/hw_stmgpio.c **** }
 301              		.loc 1 158 1 view .LVU97
 302 0020 7047     		bx	lr
 303              		.cfi_endproc
 304              	.LFE66:
 306              		.section	.text.stmgpio_read,"ax",%progbits
 307              		.align	1
 308              		.global	stmgpio_read
 309              		.syntax unified
 310              		.thumb
 311              		.thumb_func
 313              	stmgpio_read:
 314              	.LVL20:
 315              	.LFB67:
 159:Core/Src/hw_stmgpio.c **** 
 160:Core/Src/hw_stmgpio.c **** /*
 161:Core/Src/hw_stmgpio.c **** bool stmgpio_can_init(stmgpio_t *g)
 162:Core/Src/hw_stmgpio.c **** {
 163:Core/Src/hw_stmgpio.c ****   bool is_valid = false;
 164:Core/Src/hw_stmgpio.c **** 
 165:Core/Src/hw_stmgpio.c ****   // capitalise port char if not
 166:Core/Src/hw_stmgpio.c ****   if (('a' <= g->port) && ('d' >= g->port))
 167:Core/Src/hw_stmgpio.c ****   {
 168:Core/Src/hw_stmgpio.c ****     g->port -= 32;
 169:Core/Src/hw_stmgpio.c ****   }
 170:Core/Src/hw_stmgpio.c **** 
 171:Core/Src/hw_stmgpio.c ****   // Check enums for silly errors
 172:Core/Src/hw_stmgpio.c ****   if ((DIR_CNT >= g->dir) && (TYPE_CNT >= g->cfg) && (PULL_CNT >= g->pull))
 173:Core/Src/hw_stmgpio.c ****   {
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 10


 174:Core/Src/hw_stmgpio.c ****     // Check port ledger for pin existence
 175:Core/Src/hw_stmgpio.c ****     if (GPIO_PORT_PIN_MAX > g->pin)
 176:Core/Src/hw_stmgpio.c ****     {
 177:Core/Src/hw_stmgpio.c ****       switch (g->port)
 178:Core/Src/hw_stmgpio.c ****       {
 179:Core/Src/hw_stmgpio.c ****       case 'A':
 180:Core/Src/hw_stmgpio.c ****         is_valid = PORT_A_PINS[g->pin];
 181:Core/Src/hw_stmgpio.c ****         break;
 182:Core/Src/hw_stmgpio.c ****       case 'B':
 183:Core/Src/hw_stmgpio.c ****         is_valid = PORT_B_PINS[g->pin];
 184:Core/Src/hw_stmgpio.c ****         break;
 185:Core/Src/hw_stmgpio.c ****       case 'C':
 186:Core/Src/hw_stmgpio.c ****         is_valid = PORT_C_PINS[g->pin];
 187:Core/Src/hw_stmgpio.c ****         break;
 188:Core/Src/hw_stmgpio.c ****       case 'D':
 189:Core/Src/hw_stmgpio.c ****         is_valid = PORT_D_PINS[g->pin];
 190:Core/Src/hw_stmgpio.c ****         break;
 191:Core/Src/hw_stmgpio.c ****       default:
 192:Core/Src/hw_stmgpio.c ****         is_valid = false;
 193:Core/Src/hw_stmgpio.c ****         break;
 194:Core/Src/hw_stmgpio.c ****       }
 195:Core/Src/hw_stmgpio.c ****     }
 196:Core/Src/hw_stmgpio.c ****   }
 197:Core/Src/hw_stmgpio.c **** 
 198:Core/Src/hw_stmgpio.c ****   return is_valid;
 199:Core/Src/hw_stmgpio.c **** }
 200:Core/Src/hw_stmgpio.c **** */
 201:Core/Src/hw_stmgpio.c **** 
 202:Core/Src/hw_stmgpio.c **** stmgpio_state_t stmgpio_read(stmgpio_t *gpio)
 203:Core/Src/hw_stmgpio.c **** {
 316              		.loc 1 203 1 is_stmt 1 view -0
 317              		.cfi_startproc
 318              		@ args = 0, pretend = 0, frame = 0
 319              		@ frame_needed = 0, uses_anonymous_args = 0
 320              		@ link register save eliminated.
 321              		.loc 1 203 1 is_stmt 0 view .LVU99
 322 0000 0346     		mov	r3, r0
 204:Core/Src/hw_stmgpio.c ****   /* retrieve the GPIO state on function call */
 205:Core/Src/hw_stmgpio.c ****   gpio->state = (stmgpio_state_t)((gpio->port_reg_addr->IDR) & (0x01 << gpio->pin));
 323              		.loc 1 205 3 is_stmt 1 view .LVU100
 324              		.loc 1 205 40 is_stmt 0 view .LVU101
 325 0002 8268     		ldr	r2, [r0, #8]
 326              		.loc 1 205 55 view .LVU102
 327 0004 9068     		ldr	r0, [r2, #8]
 328              	.LVL21:
 329              		.loc 1 205 77 view .LVU103
 330 0006 5979     		ldrb	r1, [r3, #5]	@ zero_extendqisi2
 331              		.loc 1 205 70 view .LVU104
 332 0008 0122     		movs	r2, #1
 333 000a 8A40     		lsls	r2, r2, r1
 334              		.loc 1 205 17 view .LVU105
 335 000c D2B2     		uxtb	r2, r2
 336              		.loc 1 205 62 view .LVU106
 337 000e 1040     		ands	r0, r0, r2
 338              		.loc 1 205 15 view .LVU107
 339 0010 1870     		strb	r0, [r3]
 206:Core/Src/hw_stmgpio.c ****   return gpio->state;
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 11


 340              		.loc 1 206 3 is_stmt 1 view .LVU108
 207:Core/Src/hw_stmgpio.c **** }...
 341              		.loc 1 207 1 is_stmt 0 view .LVU109
 342 0012 7047     		bx	lr
 343              		.cfi_endproc
 344              	.LFE67:
 346              		.text
 347              	.Letext0:
 348              		.file 2 "c:\\users\\callum\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@xp
 349              		.file 3 "c:\\users\\callum\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@xp
 350              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 351              		.file 5 "Core/Inc/hw_stmgpio.h"
ARM GAS  C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s 			page 12


DEFINED SYMBOLS
                            *ABS*:0000000000000000 hw_stmgpio.c
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:19     .text.stmgpio_setup:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:25     .text.stmgpio_setup:0000000000000000 stmgpio_setup
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:45     .text.stmgpio_setup:000000000000000e $d
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:234    .text.stmgpio_setup:00000000000000b8 $d
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:244    .text.stmgpio_write:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:250    .text.stmgpio_write:0000000000000000 stmgpio_write
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:307    .text.stmgpio_read:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:313    .text.stmgpio_read:0000000000000000 stmgpio_read
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:50     .text.stmgpio_setup:0000000000000013 $d
C:\Users\Callum\AppData\Local\Temp\cc5eUwwp.s:50     .text.stmgpio_setup:0000000000000014 $t

NO UNDEFINED SYMBOLS

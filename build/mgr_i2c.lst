ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mgr_i2c.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/mgr_i2c.c"
  18              		.section	.text.i2c_state_error,"ax",%progbits
  19              		.align	1
  20              		.global	i2c_state_error
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	i2c_state_error:
  26              	.LFB77:
   1:Core/Src/mgr_i2c.c **** /* Includes ------------------------------------------------------------------*/
   2:Core/Src/mgr_i2c.c **** #include "mgr_i2c.h"
   3:Core/Src/mgr_i2c.c **** 
   4:Core/Src/mgr_i2c.c **** /* buffer data storage and buffer handlers */
   5:Core/Src/mgr_i2c.c **** static buffer_t msg_buf;
   6:Core/Src/mgr_i2c.c **** static i2c_msg_t msg_buf_data[I2C_MSG_BUF_LEN];
   7:Core/Src/mgr_i2c.c **** 
   8:Core/Src/mgr_i2c.c **** /* storage for working message */
   9:Core/Src/mgr_i2c.c **** static i2c_msg_t msg_cur;
  10:Core/Src/mgr_i2c.c **** static uint8_t bytes_to_send;
  11:Core/Src/mgr_i2c.c **** static uint8_t bytes_to_recv;
  12:Core/Src/mgr_i2c.c **** 
  13:Core/Src/mgr_i2c.c **** /* state transitions */
  14:Core/Src/mgr_i2c.c **** static I2C_EVENT last_evt;
  15:Core/Src/mgr_i2c.c **** static bool state_executed;
  16:Core/Src/mgr_i2c.c **** static bool last_evt_processed;
  17:Core/Src/mgr_i2c.c **** static void (*cur_state)(void);
  18:Core/Src/mgr_i2c.c **** const static trans_t TRANS_TAB[] = {
  19:Core/Src/mgr_i2c.c ****     {i2c_state_idle, I2C_NEW_DATA, i2c_state_start_bit},
  20:Core/Src/mgr_i2c.c ****     {i2c_state_start_bit, I2C_SB_SENT, i2c_state_tx_data},
  21:Core/Src/mgr_i2c.c ****     {i2c_state_tx_data, I2C_BYTE_SENT, i2c_state_tx_data},
  22:Core/Src/mgr_i2c.c ****     {i2c_state_tx_data, I2C_LAST_BYTE_SENT_R, i2c_state_start_bit},
  23:Core/Src/mgr_i2c.c ****     {i2c_state_start_bit, I2C_RPT_SB_SENT, i2c_state_rx_data},
  24:Core/Src/mgr_i2c.c ****     {i2c_state_tx_data, I2C_LAST_BYTE_SENT_W, i2c_state_stop_bit},
  25:Core/Src/mgr_i2c.c ****     {i2c_state_rx_data, I2C_BYTE_RECV, i2c_state_rx_data},
  26:Core/Src/mgr_i2c.c ****     {i2c_state_rx_data, I2C_LAST_BYTE_RECV, i2c_state_stop_bit},
  27:Core/Src/mgr_i2c.c ****     {i2c_state_stop_bit, I2C_PB_SENT, i2c_state_idle}};
  28:Core/Src/mgr_i2c.c **** const static uint8_t TRANS_TAB_LEN = (uint8_t)(sizeof(TRANS_TAB) / sizeof(TRANS_TAB[0]));
  29:Core/Src/mgr_i2c.c **** 
  30:Core/Src/mgr_i2c.c **** /* /*/
  31:Core/Src/mgr_i2c.c **** I2C_EVENT i2c_decode_i2c1_event(I2C1_EVT i2c1_evt)
  32:Core/Src/mgr_i2c.c **** {
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 2


  33:Core/Src/mgr_i2c.c ****   I2C_EVENT evt = I2C_ERROR;
  34:Core/Src/mgr_i2c.c **** 
  35:Core/Src/mgr_i2c.c ****   switch (i2c1_evt)
  36:Core/Src/mgr_i2c.c ****   {
  37:Core/Src/mgr_i2c.c ****   case I2C1_EVT_SB:
  38:Core/Src/mgr_i2c.c ****     if (bytes_to_send > 0)
  39:Core/Src/mgr_i2c.c ****     {
  40:Core/Src/mgr_i2c.c ****       evt = I2C_SB_SENT;
  41:Core/Src/mgr_i2c.c ****     }
  42:Core/Src/mgr_i2c.c ****     else
  43:Core/Src/mgr_i2c.c ****     {
  44:Core/Src/mgr_i2c.c ****       evt = I2C_RPT_SB_SENT;
  45:Core/Src/mgr_i2c.c ****     }
  46:Core/Src/mgr_i2c.c ****     break;
  47:Core/Src/mgr_i2c.c ****   case I2C1_EVT_ADDR:
  48:Core/Src/mgr_i2c.c ****     evt = I2C_BYTE_SENT;
  49:Core/Src/mgr_i2c.c ****     break;
  50:Core/Src/mgr_i2c.c ****   case I2C1_EVT_ADD10:
  51:Core/Src/mgr_i2c.c ****     evt = I2C_BYTE_SENT;
  52:Core/Src/mgr_i2c.c ****     break;
  53:Core/Src/mgr_i2c.c ****   /* ignore BTF. No worth in this machine */
  54:Core/Src/mgr_i2c.c ****   case I2C1_EVT_BTF:
  55:Core/Src/mgr_i2c.c ****     break;
  56:Core/Src/mgr_i2c.c ****   case I2C1_EVT_TxE:
  57:Core/Src/mgr_i2c.c ****     /* if we've sent all the bytes */
  58:Core/Src/mgr_i2c.c ****     if (bytes_to_send)
  59:Core/Src/mgr_i2c.c ****     {
  60:Core/Src/mgr_i2c.c ****       /* if its a write operation */
  61:Core/Src/mgr_i2c.c ****       if (bytes_to_recv)
  62:Core/Src/mgr_i2c.c ****       {
  63:Core/Src/mgr_i2c.c ****         evt = I2C_LAST_BYTE_SENT_W;
  64:Core/Src/mgr_i2c.c ****       }
  65:Core/Src/mgr_i2c.c ****       /* else a read operation */
  66:Core/Src/mgr_i2c.c ****       else
  67:Core/Src/mgr_i2c.c ****       {
  68:Core/Src/mgr_i2c.c ****         evt = I2C_LAST_BYTE_SENT_R;
  69:Core/Src/mgr_i2c.c ****       }
  70:Core/Src/mgr_i2c.c ****     }
  71:Core/Src/mgr_i2c.c ****     /* else we need to send more bytes */
  72:Core/Src/mgr_i2c.c ****     else
  73:Core/Src/mgr_i2c.c ****     {
  74:Core/Src/mgr_i2c.c ****       evt = I2C_BYTE_SENT;
  75:Core/Src/mgr_i2c.c ****     }
  76:Core/Src/mgr_i2c.c ****     break;
  77:Core/Src/mgr_i2c.c ****   case I2C1_EVT_RxNE:
  78:Core/Src/mgr_i2c.c ****     /* if we've recv'd all the bytes */
  79:Core/Src/mgr_i2c.c ****     if (bytes_to_recv)
  80:Core/Src/mgr_i2c.c ****     {
  81:Core/Src/mgr_i2c.c ****       evt = I2C_LAST_BYTE_RECV;
  82:Core/Src/mgr_i2c.c ****     }
  83:Core/Src/mgr_i2c.c ****     /* else we need to send more bytes */
  84:Core/Src/mgr_i2c.c ****     else
  85:Core/Src/mgr_i2c.c ****     {
  86:Core/Src/mgr_i2c.c ****       evt = I2C_BYTE_RECV;
  87:Core/Src/mgr_i2c.c ****     }
  88:Core/Src/mgr_i2c.c ****     break;
  89:Core/Src/mgr_i2c.c ****   default:
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 3


  90:Core/Src/mgr_i2c.c ****     evt = I2C_ERROR;
  91:Core/Src/mgr_i2c.c ****     break;
  92:Core/Src/mgr_i2c.c ****   }
  93:Core/Src/mgr_i2c.c **** 
  94:Core/Src/mgr_i2c.c ****   return evt;
  95:Core/Src/mgr_i2c.c **** }
  96:Core/Src/mgr_i2c.c **** 
  97:Core/Src/mgr_i2c.c **** /* A device driver is queuing a message */
  98:Core/Src/mgr_i2c.c **** int i2c_queue_msg(i2c_msg_t *msg)
  99:Core/Src/mgr_i2c.c **** {
 100:Core/Src/mgr_i2c.c ****   /* checks */
 101:Core/Src/mgr_i2c.c ****   ASSERT_INT((NULL != msg->buf_send_ptr) && (NULL != msg->buf_recv_ptr) && (MSG_SEND_MIN <= msg->n_
 102:Core/Src/mgr_i2c.c **** 
 103:Core/Src/mgr_i2c.c ****   /* write message to the buffer */
 104:Core/Src/mgr_i2c.c ****   ASSERT_INT(buf_write(&msg_buf, msg, sizeof(i2c_msg_t)));
 105:Core/Src/mgr_i2c.c **** 
 106:Core/Src/mgr_i2c.c ****   /* poll in case we can start this instantly */
 107:Core/Src/mgr_i2c.c ****   i2c_poll_fsm();
 108:Core/Src/mgr_i2c.c **** 
 109:Core/Src/mgr_i2c.c ****   return EXIT_SUCCESS;
 110:Core/Src/mgr_i2c.c **** }
 111:Core/Src/mgr_i2c.c **** 
 112:Core/Src/mgr_i2c.c **** int i2c_init(void)
 113:Core/Src/mgr_i2c.c **** {
 114:Core/Src/mgr_i2c.c ****   /* Idle to start */
 115:Core/Src/mgr_i2c.c ****   cur_state = i2c_state_idle;
 116:Core/Src/mgr_i2c.c **** 
 117:Core/Src/mgr_i2c.c ****   /* Initialise i2c1 driver */
 118:Core/Src/mgr_i2c.c ****   ASSERT_INT(i2c1_init());
 119:Core/Src/mgr_i2c.c **** 
 120:Core/Src/mgr_i2c.c ****   /* Register our callbacks with the driver */
 121:Core/Src/mgr_i2c.c ****   i2c1_set_evt_callback(i2c_event_callback);
 122:Core/Src/mgr_i2c.c ****   i2c1_set_err_callback(i2c_error_callback);
 123:Core/Src/mgr_i2c.c **** 
 124:Core/Src/mgr_i2c.c ****   /* Initialise buffer */
 125:Core/Src/mgr_i2c.c ****   ASSERT_INT(buf_init(&msg_buf, msg_buf_data, sizeof(msg_buf_data)));
 126:Core/Src/mgr_i2c.c **** 
 127:Core/Src/mgr_i2c.c ****   /* Trigger reset before first usage */
 128:Core/Src/mgr_i2c.c ****   i2c_reset();
 129:Core/Src/mgr_i2c.c ****   i2c_enable();
 130:Core/Src/mgr_i2c.c **** 
 131:Core/Src/mgr_i2c.c ****   return EXIT_SUCCESS;
 132:Core/Src/mgr_i2c.c **** }
 133:Core/Src/mgr_i2c.c **** 
 134:Core/Src/mgr_i2c.c **** void i2c_reset(void)
 135:Core/Src/mgr_i2c.c **** {
 136:Core/Src/mgr_i2c.c ****   /* reset hardware perihperal */
 137:Core/Src/mgr_i2c.c ****   i2c1_reset_periph();
 138:Core/Src/mgr_i2c.c **** 
 139:Core/Src/mgr_i2c.c ****   /* reset buffers */
 140:Core/Src/mgr_i2c.c ****   buf_reset(&msg_buf);
 141:Core/Src/mgr_i2c.c **** 
 142:Core/Src/mgr_i2c.c ****   /*reset flags*/
 143:Core/Src/mgr_i2c.c ****   state_executed = false;
 144:Core/Src/mgr_i2c.c **** }
 145:Core/Src/mgr_i2c.c **** 
 146:Core/Src/mgr_i2c.c **** void i2c_enable(void)
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 4


 147:Core/Src/mgr_i2c.c **** {
 148:Core/Src/mgr_i2c.c ****   /* Enable hardware perihperal */
 149:Core/Src/mgr_i2c.c ****   i2c1_enable_periph();
 150:Core/Src/mgr_i2c.c **** }
 151:Core/Src/mgr_i2c.c **** 
 152:Core/Src/mgr_i2c.c **** void i2c_disable(void)
 153:Core/Src/mgr_i2c.c **** {
 154:Core/Src/mgr_i2c.c ****   /* Disable hardware perihperal */
 155:Core/Src/mgr_i2c.c ****   i2c1_disable_periph();
 156:Core/Src/mgr_i2c.c **** }
 157:Core/Src/mgr_i2c.c **** 
 158:Core/Src/mgr_i2c.c **** void i2c_poll_fsm(void)
 159:Core/Src/mgr_i2c.c **** {
 160:Core/Src/mgr_i2c.c ****   cur_state();
 161:Core/Src/mgr_i2c.c **** }
 162:Core/Src/mgr_i2c.c **** 
 163:Core/Src/mgr_i2c.c **** void i2c_state_idle(void)
 164:Core/Src/mgr_i2c.c **** {
 165:Core/Src/mgr_i2c.c ****   /* Do something if buffer not empty */
 166:Core/Src/mgr_i2c.c ****   if (!buf_is_empty(&msg_buf))
 167:Core/Src/mgr_i2c.c ****   {
 168:Core/Src/mgr_i2c.c ****     /* init for new data */
 169:Core/Src/mgr_i2c.c ****     buf_read(&msg_buf, &msg_cur, sizeof(i2c_msg_t));
 170:Core/Src/mgr_i2c.c ****     bytes_to_send = msg_cur.n_send;
 171:Core/Src/mgr_i2c.c ****     bytes_to_recv = msg_cur.n_recv;
 172:Core/Src/mgr_i2c.c **** 
 173:Core/Src/mgr_i2c.c ****     /* Configure state machine */
 174:Core/Src/mgr_i2c.c ****     last_evt = I2C_NEW_DATA;
 175:Core/Src/mgr_i2c.c ****     i2c_trig_state_trans();
 176:Core/Src/mgr_i2c.c ****   }
 177:Core/Src/mgr_i2c.c **** }
 178:Core/Src/mgr_i2c.c **** 
 179:Core/Src/mgr_i2c.c **** void i2c_state_start_bit(void)
 180:Core/Src/mgr_i2c.c **** {
 181:Core/Src/mgr_i2c.c ****   if (!state_executed)
 182:Core/Src/mgr_i2c.c ****   {
 183:Core/Src/mgr_i2c.c ****     /* trigger start bit sending */
 184:Core/Src/mgr_i2c.c ****     i2c1_start();
 185:Core/Src/mgr_i2c.c ****     state_executed = true;
 186:Core/Src/mgr_i2c.c ****   }
 187:Core/Src/mgr_i2c.c **** }
 188:Core/Src/mgr_i2c.c **** 
 189:Core/Src/mgr_i2c.c **** void i2c_state_tx_data(void)
 190:Core/Src/mgr_i2c.c **** {
 191:Core/Src/mgr_i2c.c ****   if (!state_executed)
 192:Core/Src/mgr_i2c.c ****   {
 193:Core/Src/mgr_i2c.c ****     /* Write new data to send */
 194:Core/Src/mgr_i2c.c ****     if (EXIT_SUCCESS == i2c1_send(&(msg_cur.buf_send_ptr[bytes_to_send])))
 195:Core/Src/mgr_i2c.c ****     {
 196:Core/Src/mgr_i2c.c ****       bytes_to_send--;
 197:Core/Src/mgr_i2c.c ****     }
 198:Core/Src/mgr_i2c.c ****     else
 199:Core/Src/mgr_i2c.c ****     {
 200:Core/Src/mgr_i2c.c ****       last_evt = I2C_ERROR;
 201:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 202:Core/Src/mgr_i2c.c ****     }
 203:Core/Src/mgr_i2c.c ****     state_executed = true;
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 5


 204:Core/Src/mgr_i2c.c ****   }
 205:Core/Src/mgr_i2c.c **** }
 206:Core/Src/mgr_i2c.c **** 
 207:Core/Src/mgr_i2c.c **** void i2c_state_rx_data(void)
 208:Core/Src/mgr_i2c.c **** {
 209:Core/Src/mgr_i2c.c ****   if (!state_executed)
 210:Core/Src/mgr_i2c.c ****   {
 211:Core/Src/mgr_i2c.c ****     if (EXIT_SUCCESS == i2c1_recv(&(msg_cur.buf_recv_ptr)[msg_cur.n_recv - bytes_to_recv]))
 212:Core/Src/mgr_i2c.c ****     {
 213:Core/Src/mgr_i2c.c ****       bytes_to_recv--;
 214:Core/Src/mgr_i2c.c ****       if (bytes_to_recv)
 215:Core/Src/mgr_i2c.c ****       {
 216:Core/Src/mgr_i2c.c ****         i2c1_nack_bit();
 217:Core/Src/mgr_i2c.c ****       }
 218:Core/Src/mgr_i2c.c ****       else
 219:Core/Src/mgr_i2c.c ****       {
 220:Core/Src/mgr_i2c.c ****         i2c1_ack_bit();
 221:Core/Src/mgr_i2c.c ****       }
 222:Core/Src/mgr_i2c.c ****     }
 223:Core/Src/mgr_i2c.c ****     else
 224:Core/Src/mgr_i2c.c ****     {
 225:Core/Src/mgr_i2c.c ****       last_evt = I2C_ERROR;
 226:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 227:Core/Src/mgr_i2c.c ****     }
 228:Core/Src/mgr_i2c.c ****     state_executed = true;
 229:Core/Src/mgr_i2c.c ****   }
 230:Core/Src/mgr_i2c.c **** }
 231:Core/Src/mgr_i2c.c **** 
 232:Core/Src/mgr_i2c.c **** void i2c_state_stop_bit(void)
 233:Core/Src/mgr_i2c.c **** {
 234:Core/Src/mgr_i2c.c ****   i2c1_stop();
 235:Core/Src/mgr_i2c.c **** }
 236:Core/Src/mgr_i2c.c **** 
 237:Core/Src/mgr_i2c.c **** void i2c_state_error(void)
 238:Core/Src/mgr_i2c.c **** {
  27              		.loc 1 238 1 view -0
  28              		.cfi_startproc
  29              		@ Volatile: function does not return.
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.L2:
 239:Core/Src/mgr_i2c.c ****   while (1)
  34              		.loc 1 239 3 discriminator 1 view .LVU1
  35              		.loc 1 239 9 discriminator 1 view .LVU2
  36 0000 FEE7     		b	.L2
  37              		.cfi_endproc
  38              	.LFE77:
  40              		.section	.text.i2c_error_callback,"ax",%progbits
  41              		.align	1
  42              		.global	i2c_error_callback
  43              		.syntax unified
  44              		.thumb
  45              		.thumb_func
  47              	i2c_error_callback:
  48              	.LFB80:
 240:Core/Src/mgr_i2c.c ****     ;
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 6


 241:Core/Src/mgr_i2c.c **** }
 242:Core/Src/mgr_i2c.c **** 
 243:Core/Src/mgr_i2c.c **** void i2c_trig_state_trans(void)
 244:Core/Src/mgr_i2c.c **** {
 245:Core/Src/mgr_i2c.c ****   static uint8_t idx;
 246:Core/Src/mgr_i2c.c **** 
 247:Core/Src/mgr_i2c.c ****   /* Find state transition action */
 248:Core/Src/mgr_i2c.c ****   for (idx = 0; idx < TRANS_TAB_LEN; idx++)
 249:Core/Src/mgr_i2c.c ****   {
 250:Core/Src/mgr_i2c.c ****     if ((TRANS_TAB[idx].func_ptr_cur == cur_state) && (TRANS_TAB[idx].evt == last_evt))
 251:Core/Src/mgr_i2c.c ****     {
 252:Core/Src/mgr_i2c.c ****       cur_state = TRANS_TAB[idx].func_ptr_new;
 253:Core/Src/mgr_i2c.c ****       break;
 254:Core/Src/mgr_i2c.c ****     }
 255:Core/Src/mgr_i2c.c ****   }
 256:Core/Src/mgr_i2c.c **** 
 257:Core/Src/mgr_i2c.c ****   /* If not found, must be an error */
 258:Core/Src/mgr_i2c.c ****   if ((TRANS_TAB_LEN <= idx) || (I2C_ERROR == last_evt))
 259:Core/Src/mgr_i2c.c ****   {
 260:Core/Src/mgr_i2c.c ****     cur_state = i2c_state_error;
 261:Core/Src/mgr_i2c.c ****   }
 262:Core/Src/mgr_i2c.c **** 
 263:Core/Src/mgr_i2c.c ****   /* reset state entry condition */
 264:Core/Src/mgr_i2c.c ****   state_executed = false;
 265:Core/Src/mgr_i2c.c **** 
 266:Core/Src/mgr_i2c.c ****   /* Call new state function immediately */
 267:Core/Src/mgr_i2c.c ****   cur_state();
 268:Core/Src/mgr_i2c.c **** }
 269:Core/Src/mgr_i2c.c **** 
 270:Core/Src/mgr_i2c.c **** void i2c_event_callback()
 271:Core/Src/mgr_i2c.c **** {
 272:Core/Src/mgr_i2c.c ****   /* Figure out what happened */
 273:Core/Src/mgr_i2c.c ****   last_evt = i2c_decode_i2c1_event(i2c1_get_last_event());
 274:Core/Src/mgr_i2c.c **** 
 275:Core/Src/mgr_i2c.c ****   /* Transition to new state based on event and run */
 276:Core/Src/mgr_i2c.c ****   i2c_trig_state_trans();
 277:Core/Src/mgr_i2c.c ****   //cur_state();
 278:Core/Src/mgr_i2c.c **** 
 279:Core/Src/mgr_i2c.c ****   /* humour i2c peripheral */
 280:Core/Src/mgr_i2c.c ****   // i2c1_SR1_dummy_read();
 281:Core/Src/mgr_i2c.c ****   // i2c1_SR2_dummy_read();
 282:Core/Src/mgr_i2c.c **** }
 283:Core/Src/mgr_i2c.c **** 
 284:Core/Src/mgr_i2c.c **** void i2c_error_callback()
 285:Core/Src/mgr_i2c.c **** {
  49              		.loc 1 285 1 view -0
  50              		.cfi_startproc
  51              		@ Volatile: function does not return.
  52              		@ args = 0, pretend = 0, frame = 0
  53              		@ frame_needed = 0, uses_anonymous_args = 0
  54 0000 08B5     		push	{r3, lr}
  55              		.cfi_def_cfa_offset 8
  56              		.cfi_offset 3, -8
  57              		.cfi_offset 14, -4
 286:Core/Src/mgr_i2c.c ****   i2c_state_error();
  58              		.loc 1 286 3 view .LVU4
  59 0002 FFF7FEFF 		bl	i2c_state_error
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 7


  60              	.LVL0:
  61              		.cfi_endproc
  62              	.LFE80:
  64              		.section	.text.i2c_state_start_bit,"ax",%progbits
  65              		.align	1
  66              		.global	i2c_state_start_bit
  67              		.syntax unified
  68              		.thumb
  69              		.thumb_func
  71              	i2c_state_start_bit:
  72              	.LFB73:
 180:Core/Src/mgr_i2c.c ****   if (!state_executed)
  73              		.loc 1 180 1 view -0
  74              		.cfi_startproc
  75              		@ args = 0, pretend = 0, frame = 0
  76              		@ frame_needed = 0, uses_anonymous_args = 0
  77 0000 08B5     		push	{r3, lr}
  78              		.cfi_def_cfa_offset 8
  79              		.cfi_offset 3, -8
  80              		.cfi_offset 14, -4
 181:Core/Src/mgr_i2c.c ****   {
  81              		.loc 1 181 3 view .LVU6
 181:Core/Src/mgr_i2c.c ****   {
  82              		.loc 1 181 7 is_stmt 0 view .LVU7
  83 0002 054B     		ldr	r3, .L9
  84 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 181:Core/Src/mgr_i2c.c ****   {
  85              		.loc 1 181 6 view .LVU8
  86 0006 03B1     		cbz	r3, .L8
  87              	.L5:
 187:Core/Src/mgr_i2c.c **** 
  88              		.loc 1 187 1 view .LVU9
  89 0008 08BD     		pop	{r3, pc}
  90              	.L8:
 184:Core/Src/mgr_i2c.c ****     state_executed = true;
  91              		.loc 1 184 5 is_stmt 1 view .LVU10
  92 000a FFF7FEFF 		bl	i2c1_start
  93              	.LVL1:
 185:Core/Src/mgr_i2c.c ****   }
  94              		.loc 1 185 5 view .LVU11
 185:Core/Src/mgr_i2c.c ****   }
  95              		.loc 1 185 20 is_stmt 0 view .LVU12
  96 000e 024B     		ldr	r3, .L9
  97 0010 0122     		movs	r2, #1
  98 0012 1A70     		strb	r2, [r3]
 187:Core/Src/mgr_i2c.c **** 
  99              		.loc 1 187 1 view .LVU13
 100 0014 F8E7     		b	.L5
 101              	.L10:
 102 0016 00BF     		.align	2
 103              	.L9:
 104 0018 00000000 		.word	state_executed
 105              		.cfi_endproc
 106              	.LFE73:
 108              		.section	.text.i2c_state_stop_bit,"ax",%progbits
 109              		.align	1
 110              		.global	i2c_state_stop_bit
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 8


 111              		.syntax unified
 112              		.thumb
 113              		.thumb_func
 115              	i2c_state_stop_bit:
 116              	.LFB76:
 233:Core/Src/mgr_i2c.c ****   i2c1_stop();
 117              		.loc 1 233 1 is_stmt 1 view -0
 118              		.cfi_startproc
 119              		@ args = 0, pretend = 0, frame = 0
 120              		@ frame_needed = 0, uses_anonymous_args = 0
 121 0000 08B5     		push	{r3, lr}
 122              		.cfi_def_cfa_offset 8
 123              		.cfi_offset 3, -8
 124              		.cfi_offset 14, -4
 234:Core/Src/mgr_i2c.c **** }
 125              		.loc 1 234 3 view .LVU15
 126 0002 FFF7FEFF 		bl	i2c1_stop
 127              	.LVL2:
 235:Core/Src/mgr_i2c.c **** 
 128              		.loc 1 235 1 is_stmt 0 view .LVU16
 129 0006 08BD     		pop	{r3, pc}
 130              		.cfi_endproc
 131              	.LFE76:
 133              		.section	.text.i2c_decode_i2c1_event,"ax",%progbits
 134              		.align	1
 135              		.global	i2c_decode_i2c1_event
 136              		.syntax unified
 137              		.thumb
 138              		.thumb_func
 140              	i2c_decode_i2c1_event:
 141              	.LVL3:
 142              	.LFB65:
  32:Core/Src/mgr_i2c.c ****   I2C_EVENT evt = I2C_ERROR;
 143              		.loc 1 32 1 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147              		@ link register save eliminated.
  33:Core/Src/mgr_i2c.c **** 
 148              		.loc 1 33 3 view .LVU18
  35:Core/Src/mgr_i2c.c ****   {
 149              		.loc 1 35 3 view .LVU19
 150 0000 0828     		cmp	r0, #8
 151 0002 1DD0     		beq	.L19
 152 0004 0BD9     		bls	.L25
 153 0006 4028     		cmp	r0, #64
 154 0008 15D0     		beq	.L17
 155 000a 8028     		cmp	r0, #128
 156 000c 0DD1     		bne	.L26
  58:Core/Src/mgr_i2c.c ****     {
 157              		.loc 1 58 5 view .LVU20
  58:Core/Src/mgr_i2c.c ****     {
 158              		.loc 1 58 9 is_stmt 0 view .LVU21
 159 000e 124B     		ldr	r3, .L27
 160 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  58:Core/Src/mgr_i2c.c ****     {
 161              		.loc 1 58 8 view .LVU22
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 9


 162 0012 DBB1     		cbz	r3, .L22
  61:Core/Src/mgr_i2c.c ****       {
 163              		.loc 1 61 7 is_stmt 1 view .LVU23
  61:Core/Src/mgr_i2c.c ****       {
 164              		.loc 1 61 11 is_stmt 0 view .LVU24
 165 0014 114B     		ldr	r3, .L27+4
 166 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  61:Core/Src/mgr_i2c.c ****       {
 167              		.loc 1 61 10 view .LVU25
 168 0018 D3B1     		cbz	r3, .L23
  63:Core/Src/mgr_i2c.c ****       }
 169              		.loc 1 63 13 view .LVU26
 170 001a 0520     		movs	r0, #5
 171              	.LVL4:
  63:Core/Src/mgr_i2c.c ****       }
 172              		.loc 1 63 13 view .LVU27
 173 001c 7047     		bx	lr
 174              	.LVL5:
 175              	.L25:
  35:Core/Src/mgr_i2c.c ****   {
 176              		.loc 1 35 3 view .LVU28
 177 001e 0128     		cmp	r0, #1
 178 0020 05D0     		beq	.L16
 179 0022 0228     		cmp	r0, #2
 180 0024 0ED1     		bne	.L20
  48:Core/Src/mgr_i2c.c ****     break;
 181              		.loc 1 48 9 view .LVU29
 182 0026 0420     		movs	r0, #4
 183              	.LVL6:
  48:Core/Src/mgr_i2c.c ****     break;
 184              		.loc 1 48 9 view .LVU30
 185 0028 7047     		bx	lr
 186              	.LVL7:
 187              	.L26:
  35:Core/Src/mgr_i2c.c ****   {
 188              		.loc 1 35 3 view .LVU31
 189 002a 0920     		movs	r0, #9
 190              	.LVL8:
  35:Core/Src/mgr_i2c.c ****   {
 191              		.loc 1 35 3 view .LVU32
 192 002c 7047     		bx	lr
 193              	.LVL9:
 194              	.L16:
  38:Core/Src/mgr_i2c.c ****     {
 195              		.loc 1 38 5 is_stmt 1 view .LVU33
  38:Core/Src/mgr_i2c.c ****     {
 196              		.loc 1 38 23 is_stmt 0 view .LVU34
 197 002e 0A4B     		ldr	r3, .L27
 198 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  38:Core/Src/mgr_i2c.c ****     {
 199              		.loc 1 38 8 view .LVU35
 200 0032 4BB1     		cbz	r3, .L21
 201 0034 7047     		bx	lr
 202              	.L17:
  79:Core/Src/mgr_i2c.c ****     {
 203              		.loc 1 79 5 is_stmt 1 view .LVU36
  79:Core/Src/mgr_i2c.c ****     {
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 10


 204              		.loc 1 79 9 is_stmt 0 view .LVU37
 205 0036 094B     		ldr	r3, .L27+4
 206 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  79:Core/Src/mgr_i2c.c ****     {
 207              		.loc 1 79 8 view .LVU38
 208 003a 5BB1     		cbz	r3, .L24
  81:Core/Src/mgr_i2c.c ****     }
 209              		.loc 1 81 11 view .LVU39
 210 003c 0820     		movs	r0, #8
 211              	.LVL10:
  81:Core/Src/mgr_i2c.c ****     }
 212              		.loc 1 81 11 view .LVU40
 213 003e 7047     		bx	lr
 214              	.LVL11:
 215              	.L19:
  51:Core/Src/mgr_i2c.c ****     break;
 216              		.loc 1 51 9 view .LVU41
 217 0040 0420     		movs	r0, #4
 218              	.LVL12:
  51:Core/Src/mgr_i2c.c ****     break;
 219              		.loc 1 51 9 view .LVU42
 220 0042 7047     		bx	lr
 221              	.LVL13:
 222              	.L20:
  35:Core/Src/mgr_i2c.c ****   {
 223              		.loc 1 35 3 view .LVU43
 224 0044 0920     		movs	r0, #9
 225              	.LVL14:
  35:Core/Src/mgr_i2c.c ****   {
 226              		.loc 1 35 3 view .LVU44
 227 0046 7047     		bx	lr
 228              	.LVL15:
 229              	.L21:
  44:Core/Src/mgr_i2c.c ****     }
 230              		.loc 1 44 11 view .LVU45
 231 0048 0220     		movs	r0, #2
 232              	.LVL16:
  44:Core/Src/mgr_i2c.c ****     }
 233              		.loc 1 44 11 view .LVU46
 234 004a 7047     		bx	lr
 235              	.LVL17:
 236              	.L22:
  74:Core/Src/mgr_i2c.c ****     }
 237              		.loc 1 74 11 view .LVU47
 238 004c 0420     		movs	r0, #4
 239              	.LVL18:
  74:Core/Src/mgr_i2c.c ****     }
 240              		.loc 1 74 11 view .LVU48
 241 004e 7047     		bx	lr
 242              	.LVL19:
 243              	.L23:
  68:Core/Src/mgr_i2c.c ****       }
 244              		.loc 1 68 13 view .LVU49
 245 0050 0620     		movs	r0, #6
 246              	.LVL20:
  68:Core/Src/mgr_i2c.c ****       }
 247              		.loc 1 68 13 view .LVU50
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 11


 248 0052 7047     		bx	lr
 249              	.LVL21:
 250              	.L24:
  86:Core/Src/mgr_i2c.c ****     }
 251              		.loc 1 86 11 view .LVU51
 252 0054 0720     		movs	r0, #7
 253              	.LVL22:
  94:Core/Src/mgr_i2c.c **** }
 254              		.loc 1 94 3 is_stmt 1 view .LVU52
  95:Core/Src/mgr_i2c.c **** 
 255              		.loc 1 95 1 is_stmt 0 view .LVU53
 256 0056 7047     		bx	lr
 257              	.L28:
 258              		.align	2
 259              	.L27:
 260 0058 00000000 		.word	bytes_to_send
 261 005c 00000000 		.word	bytes_to_recv
 262              		.cfi_endproc
 263              	.LFE65:
 265              		.section	.text.i2c_reset,"ax",%progbits
 266              		.align	1
 267              		.global	i2c_reset
 268              		.syntax unified
 269              		.thumb
 270              		.thumb_func
 272              	i2c_reset:
 273              	.LFB68:
 135:Core/Src/mgr_i2c.c ****   /* reset hardware perihperal */
 274              		.loc 1 135 1 is_stmt 1 view -0
 275              		.cfi_startproc
 276              		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278 0000 08B5     		push	{r3, lr}
 279              		.cfi_def_cfa_offset 8
 280              		.cfi_offset 3, -8
 281              		.cfi_offset 14, -4
 137:Core/Src/mgr_i2c.c **** 
 282              		.loc 1 137 3 view .LVU55
 283 0002 FFF7FEFF 		bl	i2c1_reset_periph
 284              	.LVL23:
 140:Core/Src/mgr_i2c.c **** 
 285              		.loc 1 140 3 view .LVU56
 286 0006 0348     		ldr	r0, .L31
 287 0008 FFF7FEFF 		bl	buf_reset
 288              	.LVL24:
 143:Core/Src/mgr_i2c.c **** }
 289              		.loc 1 143 3 view .LVU57
 143:Core/Src/mgr_i2c.c **** }
 290              		.loc 1 143 18 is_stmt 0 view .LVU58
 291 000c 024B     		ldr	r3, .L31+4
 292 000e 0022     		movs	r2, #0
 293 0010 1A70     		strb	r2, [r3]
 144:Core/Src/mgr_i2c.c **** 
 294              		.loc 1 144 1 view .LVU59
 295 0012 08BD     		pop	{r3, pc}
 296              	.L32:
 297              		.align	2
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 12


 298              	.L31:
 299 0014 00000000 		.word	msg_buf
 300 0018 00000000 		.word	state_executed
 301              		.cfi_endproc
 302              	.LFE68:
 304              		.section	.text.i2c_enable,"ax",%progbits
 305              		.align	1
 306              		.global	i2c_enable
 307              		.syntax unified
 308              		.thumb
 309              		.thumb_func
 311              	i2c_enable:
 312              	.LFB69:
 147:Core/Src/mgr_i2c.c ****   /* Enable hardware perihperal */
 313              		.loc 1 147 1 is_stmt 1 view -0
 314              		.cfi_startproc
 315              		@ args = 0, pretend = 0, frame = 0
 316              		@ frame_needed = 0, uses_anonymous_args = 0
 317 0000 08B5     		push	{r3, lr}
 318              		.cfi_def_cfa_offset 8
 319              		.cfi_offset 3, -8
 320              		.cfi_offset 14, -4
 149:Core/Src/mgr_i2c.c **** }
 321              		.loc 1 149 3 view .LVU61
 322 0002 FFF7FEFF 		bl	i2c1_enable_periph
 323              	.LVL25:
 150:Core/Src/mgr_i2c.c **** 
 324              		.loc 1 150 1 is_stmt 0 view .LVU62
 325 0006 08BD     		pop	{r3, pc}
 326              		.cfi_endproc
 327              	.LFE69:
 329              		.section	.text.i2c_init,"ax",%progbits
 330              		.align	1
 331              		.global	i2c_init
 332              		.syntax unified
 333              		.thumb
 334              		.thumb_func
 336              	i2c_init:
 337              	.LFB67:
 113:Core/Src/mgr_i2c.c ****   /* Idle to start */
 338              		.loc 1 113 1 is_stmt 1 view -0
 339              		.cfi_startproc
 340              		@ args = 0, pretend = 0, frame = 0
 341              		@ frame_needed = 0, uses_anonymous_args = 0
 342 0000 10B5     		push	{r4, lr}
 343              		.cfi_def_cfa_offset 8
 344              		.cfi_offset 4, -8
 345              		.cfi_offset 14, -4
 115:Core/Src/mgr_i2c.c **** 
 346              		.loc 1 115 3 view .LVU64
 115:Core/Src/mgr_i2c.c **** 
 347              		.loc 1 115 13 is_stmt 0 view .LVU65
 348 0002 0E4B     		ldr	r3, .L42
 349 0004 0E4A     		ldr	r2, .L42+4
 350 0006 1A60     		str	r2, [r3]
 118:Core/Src/mgr_i2c.c **** 
 351              		.loc 1 118 3 is_stmt 1 view .LVU66
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 13


 352 0008 FFF7FEFF 		bl	i2c1_init
 353              	.LVL26:
 354 000c 10B1     		cbz	r0, .L40
 355 000e 0124     		movs	r4, #1
 356              	.L35:
 132:Core/Src/mgr_i2c.c **** 
 357              		.loc 1 132 1 is_stmt 0 view .LVU67
 358 0010 2046     		mov	r0, r4
 359 0012 10BD     		pop	{r4, pc}
 360              	.L40:
 121:Core/Src/mgr_i2c.c ****   i2c1_set_err_callback(i2c_error_callback);
 361              		.loc 1 121 3 is_stmt 1 view .LVU68
 362 0014 0B48     		ldr	r0, .L42+8
 363 0016 FFF7FEFF 		bl	i2c1_set_evt_callback
 364              	.LVL27:
 122:Core/Src/mgr_i2c.c **** 
 365              		.loc 1 122 3 view .LVU69
 366 001a 0B48     		ldr	r0, .L42+12
 367 001c FFF7FEFF 		bl	i2c1_set_err_callback
 368              	.LVL28:
 125:Core/Src/mgr_i2c.c **** 
 369              		.loc 1 125 3 view .LVU70
 370 0020 F022     		movs	r2, #240
 371 0022 0A49     		ldr	r1, .L42+16
 372 0024 0A48     		ldr	r0, .L42+20
 373 0026 FFF7FEFF 		bl	buf_init
 374              	.LVL29:
 375 002a 0446     		mov	r4, r0
 376 002c 08B1     		cbz	r0, .L41
 377 002e 0124     		movs	r4, #1
 378 0030 EEE7     		b	.L35
 379              	.L41:
 128:Core/Src/mgr_i2c.c ****   i2c_enable();
 380              		.loc 1 128 3 view .LVU71
 381 0032 FFF7FEFF 		bl	i2c_reset
 382              	.LVL30:
 129:Core/Src/mgr_i2c.c **** 
 383              		.loc 1 129 3 view .LVU72
 384 0036 FFF7FEFF 		bl	i2c_enable
 385              	.LVL31:
 131:Core/Src/mgr_i2c.c **** }
 386              		.loc 1 131 3 view .LVU73
 131:Core/Src/mgr_i2c.c **** }
 387              		.loc 1 131 10 is_stmt 0 view .LVU74
 388 003a E9E7     		b	.L35
 389              	.L43:
 390              		.align	2
 391              	.L42:
 392 003c 00000000 		.word	cur_state
 393 0040 00000000 		.word	i2c_state_idle
 394 0044 00000000 		.word	i2c_event_callback
 395 0048 00000000 		.word	i2c_error_callback
 396 004c 00000000 		.word	msg_buf_data
 397 0050 00000000 		.word	msg_buf
 398              		.cfi_endproc
 399              	.LFE67:
 401              		.section	.text.i2c_disable,"ax",%progbits
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 14


 402              		.align	1
 403              		.global	i2c_disable
 404              		.syntax unified
 405              		.thumb
 406              		.thumb_func
 408              	i2c_disable:
 409              	.LFB70:
 153:Core/Src/mgr_i2c.c ****   /* Disable hardware perihperal */
 410              		.loc 1 153 1 is_stmt 1 view -0
 411              		.cfi_startproc
 412              		@ args = 0, pretend = 0, frame = 0
 413              		@ frame_needed = 0, uses_anonymous_args = 0
 414 0000 08B5     		push	{r3, lr}
 415              		.cfi_def_cfa_offset 8
 416              		.cfi_offset 3, -8
 417              		.cfi_offset 14, -4
 155:Core/Src/mgr_i2c.c **** }
 418              		.loc 1 155 3 view .LVU76
 419 0002 FFF7FEFF 		bl	i2c1_disable_periph
 420              	.LVL32:
 156:Core/Src/mgr_i2c.c **** 
 421              		.loc 1 156 1 is_stmt 0 view .LVU77
 422 0006 08BD     		pop	{r3, pc}
 423              		.cfi_endproc
 424              	.LFE70:
 426              		.section	.text.i2c_poll_fsm,"ax",%progbits
 427              		.align	1
 428              		.global	i2c_poll_fsm
 429              		.syntax unified
 430              		.thumb
 431              		.thumb_func
 433              	i2c_poll_fsm:
 434              	.LFB71:
 159:Core/Src/mgr_i2c.c ****   cur_state();
 435              		.loc 1 159 1 is_stmt 1 view -0
 436              		.cfi_startproc
 437              		@ args = 0, pretend = 0, frame = 0
 438              		@ frame_needed = 0, uses_anonymous_args = 0
 439 0000 08B5     		push	{r3, lr}
 440              		.cfi_def_cfa_offset 8
 441              		.cfi_offset 3, -8
 442              		.cfi_offset 14, -4
 160:Core/Src/mgr_i2c.c **** }
 443              		.loc 1 160 3 view .LVU79
 444 0002 024B     		ldr	r3, .L48
 445 0004 1B68     		ldr	r3, [r3]
 446 0006 9847     		blx	r3
 447              	.LVL33:
 161:Core/Src/mgr_i2c.c **** 
 448              		.loc 1 161 1 is_stmt 0 view .LVU80
 449 0008 08BD     		pop	{r3, pc}
 450              	.L49:
 451 000a 00BF     		.align	2
 452              	.L48:
 453 000c 00000000 		.word	cur_state
 454              		.cfi_endproc
 455              	.LFE71:
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 15


 457              		.section	.text.i2c_queue_msg,"ax",%progbits
 458              		.align	1
 459              		.global	i2c_queue_msg
 460              		.syntax unified
 461              		.thumb
 462              		.thumb_func
 464              	i2c_queue_msg:
 465              	.LVL34:
 466              	.LFB66:
  99:Core/Src/mgr_i2c.c ****   /* checks */
 467              		.loc 1 99 1 is_stmt 1 view -0
 468              		.cfi_startproc
 469              		@ args = 0, pretend = 0, frame = 0
 470              		@ frame_needed = 0, uses_anonymous_args = 0
  99:Core/Src/mgr_i2c.c ****   /* checks */
 471              		.loc 1 99 1 is_stmt 0 view .LVU82
 472 0000 10B5     		push	{r4, lr}
 473              		.cfi_def_cfa_offset 8
 474              		.cfi_offset 4, -8
 475              		.cfi_offset 14, -4
 476 0002 0146     		mov	r1, r0
 101:Core/Src/mgr_i2c.c **** 
 477              		.loc 1 101 3 is_stmt 1 view .LVU83
 478 0004 0368     		ldr	r3, [r0]
 479 0006 33B1     		cbz	r3, .L51
 101:Core/Src/mgr_i2c.c **** 
 480              		.loc 1 101 3 is_stmt 0 discriminator 1 view .LVU84
 481 0008 8368     		ldr	r3, [r0, #8]
 482 000a 23B1     		cbz	r3, .L51
 101:Core/Src/mgr_i2c.c **** 
 483              		.loc 1 101 3 discriminator 2 view .LVU85
 484 000c 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 485 000e 012B     		cmp	r3, #1
 486 0010 01D9     		bls	.L51
 101:Core/Src/mgr_i2c.c **** 
 487              		.loc 1 101 3 discriminator 3 view .LVU86
 488 0012 037B     		ldrb	r3, [r0, #12]	@ zero_extendqisi2
 489 0014 5BB9     		cbnz	r3, .L53
 490              	.L51:
 104:Core/Src/mgr_i2c.c **** 
 491              		.loc 1 104 3 is_stmt 1 view .LVU87
 492 0016 1022     		movs	r2, #16
 493 0018 0648     		ldr	r0, .L57
 494              	.LVL35:
 104:Core/Src/mgr_i2c.c **** 
 495              		.loc 1 104 3 is_stmt 0 view .LVU88
 496 001a FFF7FEFF 		bl	buf_write
 497              	.LVL36:
 104:Core/Src/mgr_i2c.c **** 
 498              		.loc 1 104 3 view .LVU89
 499 001e 0446     		mov	r4, r0
 500 0020 10B1     		cbz	r0, .L56
 501 0022 0124     		movs	r4, #1
 502              	.L50:
 110:Core/Src/mgr_i2c.c **** 
 503              		.loc 1 110 1 view .LVU90
 504 0024 2046     		mov	r0, r4
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 16


 505 0026 10BD     		pop	{r4, pc}
 506              	.L56:
 107:Core/Src/mgr_i2c.c **** 
 507              		.loc 1 107 3 is_stmt 1 view .LVU91
 508 0028 FFF7FEFF 		bl	i2c_poll_fsm
 509              	.LVL37:
 109:Core/Src/mgr_i2c.c **** }
 510              		.loc 1 109 3 view .LVU92
 109:Core/Src/mgr_i2c.c **** }
 511              		.loc 1 109 10 is_stmt 0 view .LVU93
 512 002c FAE7     		b	.L50
 513              	.LVL38:
 514              	.L53:
 101:Core/Src/mgr_i2c.c **** 
 515              		.loc 1 101 3 view .LVU94
 516 002e 0124     		movs	r4, #1
 517 0030 F8E7     		b	.L50
 518              	.L58:
 519 0032 00BF     		.align	2
 520              	.L57:
 521 0034 00000000 		.word	msg_buf
 522              		.cfi_endproc
 523              	.LFE66:
 525              		.section	.text.i2c_trig_state_trans,"ax",%progbits
 526              		.align	1
 527              		.global	i2c_trig_state_trans
 528              		.syntax unified
 529              		.thumb
 530              		.thumb_func
 532              	i2c_trig_state_trans:
 533              	.LFB78:
 244:Core/Src/mgr_i2c.c ****   static uint8_t idx;
 534              		.loc 1 244 1 is_stmt 1 view -0
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 0
 537              		@ frame_needed = 0, uses_anonymous_args = 0
 538 0000 08B5     		push	{r3, lr}
 539              		.cfi_def_cfa_offset 8
 540              		.cfi_offset 3, -8
 541              		.cfi_offset 14, -4
 245:Core/Src/mgr_i2c.c **** 
 542              		.loc 1 245 3 view .LVU96
 248:Core/Src/mgr_i2c.c ****   {
 543              		.loc 1 248 3 view .LVU97
 248:Core/Src/mgr_i2c.c ****   {
 544              		.loc 1 248 12 is_stmt 0 view .LVU98
 545 0002 1B4B     		ldr	r3, .L67
 546 0004 0022     		movs	r2, #0
 547 0006 1A70     		strb	r2, [r3]
 248:Core/Src/mgr_i2c.c ****   {
 548              		.loc 1 248 3 view .LVU99
 549 0008 02E0     		b	.L60
 550              	.L61:
 248:Core/Src/mgr_i2c.c ****   {
 551              		.loc 1 248 41 is_stmt 1 discriminator 2 view .LVU100
 552 000a 0133     		adds	r3, r3, #1
 553 000c 184A     		ldr	r2, .L67
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 17


 554 000e 1370     		strb	r3, [r2]
 555              	.L60:
 248:Core/Src/mgr_i2c.c ****   {
 556              		.loc 1 248 21 discriminator 1 view .LVU101
 557 0010 174B     		ldr	r3, .L67
 558 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 559 0014 082B     		cmp	r3, #8
 560 0016 1AD8     		bhi	.L62
 250:Core/Src/mgr_i2c.c ****     {
 561              		.loc 1 250 5 view .LVU102
 250:Core/Src/mgr_i2c.c ****     {
 562              		.loc 1 250 24 is_stmt 0 view .LVU103
 563 0018 03EB4301 		add	r1, r3, r3, lsl #1
 564 001c 8A00     		lsls	r2, r1, #2
 565 001e 1549     		ldr	r1, .L67+4
 566 0020 8958     		ldr	r1, [r1, r2]
 250:Core/Src/mgr_i2c.c ****     {
 567              		.loc 1 250 38 view .LVU104
 568 0022 154A     		ldr	r2, .L67+8
 569 0024 1268     		ldr	r2, [r2]
 250:Core/Src/mgr_i2c.c ****     {
 570              		.loc 1 250 8 view .LVU105
 571 0026 9142     		cmp	r1, r2
 572 0028 EFD1     		bne	.L61
 250:Core/Src/mgr_i2c.c ****     {
 573              		.loc 1 250 70 discriminator 1 view .LVU106
 574 002a 03EB4302 		add	r2, r3, r3, lsl #1
 575 002e 9100     		lsls	r1, r2, #2
 576 0030 104A     		ldr	r2, .L67+4
 577 0032 0A44     		add	r2, r2, r1
 578 0034 5168     		ldr	r1, [r2, #4]
 250:Core/Src/mgr_i2c.c ****     {
 579              		.loc 1 250 75 discriminator 1 view .LVU107
 580 0036 114A     		ldr	r2, .L67+12
 581 0038 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 250:Core/Src/mgr_i2c.c ****     {
 582              		.loc 1 250 52 discriminator 1 view .LVU108
 583 003a 9142     		cmp	r1, r2
 584 003c E5D1     		bne	.L61
 252:Core/Src/mgr_i2c.c ****       break;
 585              		.loc 1 252 7 is_stmt 1 view .LVU109
 252:Core/Src/mgr_i2c.c ****       break;
 586              		.loc 1 252 33 is_stmt 0 view .LVU110
 587 003e 03EB4302 		add	r2, r3, r3, lsl #1
 588 0042 9100     		lsls	r1, r2, #2
 589 0044 0B4A     		ldr	r2, .L67+4
 590 0046 0A44     		add	r2, r2, r1
 591 0048 9168     		ldr	r1, [r2, #8]
 252:Core/Src/mgr_i2c.c ****       break;
 592              		.loc 1 252 17 view .LVU111
 593 004a 0B4A     		ldr	r2, .L67+8
 594 004c 1160     		str	r1, [r2]
 253:Core/Src/mgr_i2c.c ****     }
 595              		.loc 1 253 7 is_stmt 1 view .LVU112
 596              	.L62:
 258:Core/Src/mgr_i2c.c ****   {
 597              		.loc 1 258 3 view .LVU113
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 18


 258:Core/Src/mgr_i2c.c ****   {
 598              		.loc 1 258 6 is_stmt 0 view .LVU114
 599 004e 082B     		cmp	r3, #8
 600 0050 03D8     		bhi	.L64
 258:Core/Src/mgr_i2c.c ****   {
 601              		.loc 1 258 44 discriminator 1 view .LVU115
 602 0052 0A4B     		ldr	r3, .L67+12
 603 0054 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 258:Core/Src/mgr_i2c.c ****   {
 604              		.loc 1 258 30 discriminator 1 view .LVU116
 605 0056 092B     		cmp	r3, #9
 606 0058 02D1     		bne	.L65
 607              	.L64:
 260:Core/Src/mgr_i2c.c ****   }
 608              		.loc 1 260 5 is_stmt 1 view .LVU117
 260:Core/Src/mgr_i2c.c ****   }
 609              		.loc 1 260 15 is_stmt 0 view .LVU118
 610 005a 074B     		ldr	r3, .L67+8
 611 005c 084A     		ldr	r2, .L67+16
 612 005e 1A60     		str	r2, [r3]
 613              	.L65:
 264:Core/Src/mgr_i2c.c **** 
 614              		.loc 1 264 3 is_stmt 1 view .LVU119
 264:Core/Src/mgr_i2c.c **** 
 615              		.loc 1 264 18 is_stmt 0 view .LVU120
 616 0060 084B     		ldr	r3, .L67+20
 617 0062 0022     		movs	r2, #0
 618 0064 1A70     		strb	r2, [r3]
 267:Core/Src/mgr_i2c.c **** }
 619              		.loc 1 267 3 is_stmt 1 view .LVU121
 620 0066 044B     		ldr	r3, .L67+8
 621 0068 1B68     		ldr	r3, [r3]
 622 006a 9847     		blx	r3
 623              	.LVL39:
 268:Core/Src/mgr_i2c.c **** 
 624              		.loc 1 268 1 is_stmt 0 view .LVU122
 625 006c 08BD     		pop	{r3, pc}
 626              	.L68:
 627 006e 00BF     		.align	2
 628              	.L67:
 629 0070 00000000 		.word	idx.0
 630 0074 00000000 		.word	TRANS_TAB
 631 0078 00000000 		.word	cur_state
 632 007c 00000000 		.word	last_evt
 633 0080 00000000 		.word	i2c_state_error
 634 0084 00000000 		.word	state_executed
 635              		.cfi_endproc
 636              	.LFE78:
 638              		.section	.text.i2c_state_idle,"ax",%progbits
 639              		.align	1
 640              		.global	i2c_state_idle
 641              		.syntax unified
 642              		.thumb
 643              		.thumb_func
 645              	i2c_state_idle:
 646              	.LFB72:
 164:Core/Src/mgr_i2c.c ****   /* Do something if buffer not empty */
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 19


 647              		.loc 1 164 1 is_stmt 1 view -0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 0
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651 0000 10B5     		push	{r4, lr}
 652              		.cfi_def_cfa_offset 8
 653              		.cfi_offset 4, -8
 654              		.cfi_offset 14, -4
 166:Core/Src/mgr_i2c.c ****   {
 655              		.loc 1 166 3 view .LVU124
 166:Core/Src/mgr_i2c.c ****   {
 656              		.loc 1 166 8 is_stmt 0 view .LVU125
 657 0002 0B48     		ldr	r0, .L73
 658 0004 FFF7FEFF 		bl	buf_is_empty
 659              	.LVL40:
 166:Core/Src/mgr_i2c.c ****   {
 660              		.loc 1 166 6 view .LVU126
 661 0008 00B1     		cbz	r0, .L72
 662              	.L69:
 177:Core/Src/mgr_i2c.c **** 
 663              		.loc 1 177 1 view .LVU127
 664 000a 10BD     		pop	{r4, pc}
 665              	.L72:
 169:Core/Src/mgr_i2c.c ****     bytes_to_send = msg_cur.n_send;
 666              		.loc 1 169 5 is_stmt 1 view .LVU128
 667 000c 094C     		ldr	r4, .L73+4
 668 000e 1022     		movs	r2, #16
 669 0010 2146     		mov	r1, r4
 670 0012 0748     		ldr	r0, .L73
 671 0014 FFF7FEFF 		bl	buf_read
 672              	.LVL41:
 170:Core/Src/mgr_i2c.c ****     bytes_to_recv = msg_cur.n_recv;
 673              		.loc 1 170 5 view .LVU129
 170:Core/Src/mgr_i2c.c ****     bytes_to_recv = msg_cur.n_recv;
 674              		.loc 1 170 28 is_stmt 0 view .LVU130
 675 0018 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 170:Core/Src/mgr_i2c.c ****     bytes_to_recv = msg_cur.n_recv;
 676              		.loc 1 170 19 view .LVU131
 677 001a 074B     		ldr	r3, .L73+8
 678 001c 1A70     		strb	r2, [r3]
 171:Core/Src/mgr_i2c.c **** 
 679              		.loc 1 171 5 is_stmt 1 view .LVU132
 171:Core/Src/mgr_i2c.c **** 
 680              		.loc 1 171 28 is_stmt 0 view .LVU133
 681 001e 227B     		ldrb	r2, [r4, #12]	@ zero_extendqisi2
 171:Core/Src/mgr_i2c.c **** 
 682              		.loc 1 171 19 view .LVU134
 683 0020 064B     		ldr	r3, .L73+12
 684 0022 1A70     		strb	r2, [r3]
 174:Core/Src/mgr_i2c.c ****     i2c_trig_state_trans();
 685              		.loc 1 174 5 is_stmt 1 view .LVU135
 174:Core/Src/mgr_i2c.c ****     i2c_trig_state_trans();
 686              		.loc 1 174 14 is_stmt 0 view .LVU136
 687 0024 064B     		ldr	r3, .L73+16
 688 0026 0022     		movs	r2, #0
 689 0028 1A70     		strb	r2, [r3]
 175:Core/Src/mgr_i2c.c ****   }
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 20


 690              		.loc 1 175 5 is_stmt 1 view .LVU137
 691 002a FFF7FEFF 		bl	i2c_trig_state_trans
 692              	.LVL42:
 177:Core/Src/mgr_i2c.c **** 
 693              		.loc 1 177 1 is_stmt 0 view .LVU138
 694 002e ECE7     		b	.L69
 695              	.L74:
 696              		.align	2
 697              	.L73:
 698 0030 00000000 		.word	msg_buf
 699 0034 00000000 		.word	msg_cur
 700 0038 00000000 		.word	bytes_to_send
 701 003c 00000000 		.word	bytes_to_recv
 702 0040 00000000 		.word	last_evt
 703              		.cfi_endproc
 704              	.LFE72:
 706              		.section	.text.i2c_state_tx_data,"ax",%progbits
 707              		.align	1
 708              		.global	i2c_state_tx_data
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 713              	i2c_state_tx_data:
 714              	.LFB74:
 190:Core/Src/mgr_i2c.c ****   if (!state_executed)
 715              		.loc 1 190 1 is_stmt 1 view -0
 716              		.cfi_startproc
 717              		@ args = 0, pretend = 0, frame = 0
 718              		@ frame_needed = 0, uses_anonymous_args = 0
 719 0000 08B5     		push	{r3, lr}
 720              		.cfi_def_cfa_offset 8
 721              		.cfi_offset 3, -8
 722              		.cfi_offset 14, -4
 191:Core/Src/mgr_i2c.c ****   {
 723              		.loc 1 191 3 view .LVU140
 191:Core/Src/mgr_i2c.c ****   {
 724              		.loc 1 191 7 is_stmt 0 view .LVU141
 725 0002 0D4B     		ldr	r3, .L81
 726 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 191:Core/Src/mgr_i2c.c ****   {
 727              		.loc 1 191 6 view .LVU142
 728 0006 03B1     		cbz	r3, .L80
 729              	.L75:
 205:Core/Src/mgr_i2c.c **** 
 730              		.loc 1 205 1 view .LVU143
 731 0008 08BD     		pop	{r3, pc}
 732              	.L80:
 194:Core/Src/mgr_i2c.c ****     {
 733              		.loc 1 194 5 is_stmt 1 view .LVU144
 194:Core/Src/mgr_i2c.c ****     {
 734              		.loc 1 194 44 is_stmt 0 view .LVU145
 735 000a 0C4B     		ldr	r3, .L81+4
 736 000c 1868     		ldr	r0, [r3]
 194:Core/Src/mgr_i2c.c ****     {
 737              		.loc 1 194 25 view .LVU146
 738 000e 0C4B     		ldr	r3, .L81+8
 739 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 21


 740 0012 1844     		add	r0, r0, r3
 741 0014 FFF7FEFF 		bl	i2c1_send
 742              	.LVL43:
 194:Core/Src/mgr_i2c.c ****     {
 743              		.loc 1 194 8 view .LVU147
 744 0018 38B9     		cbnz	r0, .L77
 196:Core/Src/mgr_i2c.c ****     }
 745              		.loc 1 196 7 is_stmt 1 view .LVU148
 196:Core/Src/mgr_i2c.c ****     }
 746              		.loc 1 196 20 is_stmt 0 view .LVU149
 747 001a 094A     		ldr	r2, .L81+8
 748 001c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 749 001e 013B     		subs	r3, r3, #1
 750 0020 1370     		strb	r3, [r2]
 751              	.L78:
 203:Core/Src/mgr_i2c.c ****   }
 752              		.loc 1 203 5 is_stmt 1 view .LVU150
 203:Core/Src/mgr_i2c.c ****   }
 753              		.loc 1 203 20 is_stmt 0 view .LVU151
 754 0022 054B     		ldr	r3, .L81
 755 0024 0122     		movs	r2, #1
 756 0026 1A70     		strb	r2, [r3]
 205:Core/Src/mgr_i2c.c **** 
 757              		.loc 1 205 1 view .LVU152
 758 0028 EEE7     		b	.L75
 759              	.L77:
 200:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 760              		.loc 1 200 7 is_stmt 1 view .LVU153
 200:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 761              		.loc 1 200 16 is_stmt 0 view .LVU154
 762 002a 064B     		ldr	r3, .L81+12
 763 002c 0922     		movs	r2, #9
 764 002e 1A70     		strb	r2, [r3]
 201:Core/Src/mgr_i2c.c ****     }
 765              		.loc 1 201 7 is_stmt 1 view .LVU155
 766 0030 FFF7FEFF 		bl	i2c_trig_state_trans
 767              	.LVL44:
 768 0034 F5E7     		b	.L78
 769              	.L82:
 770 0036 00BF     		.align	2
 771              	.L81:
 772 0038 00000000 		.word	state_executed
 773 003c 00000000 		.word	msg_cur
 774 0040 00000000 		.word	bytes_to_send
 775 0044 00000000 		.word	last_evt
 776              		.cfi_endproc
 777              	.LFE74:
 779              		.section	.text.i2c_state_rx_data,"ax",%progbits
 780              		.align	1
 781              		.global	i2c_state_rx_data
 782              		.syntax unified
 783              		.thumb
 784              		.thumb_func
 786              	i2c_state_rx_data:
 787              	.LFB75:
 208:Core/Src/mgr_i2c.c ****   if (!state_executed)
 788              		.loc 1 208 1 view -0
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 22


 789              		.cfi_startproc
 790              		@ args = 0, pretend = 0, frame = 0
 791              		@ frame_needed = 0, uses_anonymous_args = 0
 792 0000 08B5     		push	{r3, lr}
 793              		.cfi_def_cfa_offset 8
 794              		.cfi_offset 3, -8
 795              		.cfi_offset 14, -4
 209:Core/Src/mgr_i2c.c ****   {
 796              		.loc 1 209 3 view .LVU157
 209:Core/Src/mgr_i2c.c ****   {
 797              		.loc 1 209 7 is_stmt 0 view .LVU158
 798 0002 114B     		ldr	r3, .L90
 799 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 209:Core/Src/mgr_i2c.c ****   {
 800              		.loc 1 209 6 view .LVU159
 801 0006 03B1     		cbz	r3, .L89
 802              	.L83:
 230:Core/Src/mgr_i2c.c **** 
 803              		.loc 1 230 1 view .LVU160
 804 0008 08BD     		pop	{r3, pc}
 805              	.L89:
 211:Core/Src/mgr_i2c.c ****     {
 806              		.loc 1 211 5 is_stmt 1 view .LVU161
 211:Core/Src/mgr_i2c.c ****     {
 807              		.loc 1 211 44 is_stmt 0 view .LVU162
 808 000a 104B     		ldr	r3, .L90+4
 809 000c 9868     		ldr	r0, [r3, #8]
 211:Core/Src/mgr_i2c.c ****     {
 810              		.loc 1 211 66 view .LVU163
 811 000e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 211:Core/Src/mgr_i2c.c ****     {
 812              		.loc 1 211 74 view .LVU164
 813 0010 0F4A     		ldr	r2, .L90+8
 814 0012 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 815 0014 9B1A     		subs	r3, r3, r2
 211:Core/Src/mgr_i2c.c ****     {
 816              		.loc 1 211 25 view .LVU165
 817 0016 1844     		add	r0, r0, r3
 818 0018 FFF7FEFF 		bl	i2c1_recv
 819              	.LVL45:
 211:Core/Src/mgr_i2c.c ****     {
 820              		.loc 1 211 8 view .LVU166
 821 001c 70B9     		cbnz	r0, .L85
 213:Core/Src/mgr_i2c.c ****       if (bytes_to_recv)
 822              		.loc 1 213 7 is_stmt 1 view .LVU167
 213:Core/Src/mgr_i2c.c ****       if (bytes_to_recv)
 823              		.loc 1 213 20 is_stmt 0 view .LVU168
 824 001e 0C4A     		ldr	r2, .L90+8
 825 0020 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 826 0022 013B     		subs	r3, r3, #1
 827 0024 DBB2     		uxtb	r3, r3
 828 0026 1370     		strb	r3, [r2]
 214:Core/Src/mgr_i2c.c ****       {
 829              		.loc 1 214 7 is_stmt 1 view .LVU169
 214:Core/Src/mgr_i2c.c ****       {
 830              		.loc 1 214 10 is_stmt 0 view .LVU170
 831 0028 2BB1     		cbz	r3, .L86
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 23


 216:Core/Src/mgr_i2c.c ****       }
 832              		.loc 1 216 9 is_stmt 1 view .LVU171
 833 002a FFF7FEFF 		bl	i2c1_nack_bit
 834              	.LVL46:
 835              	.L87:
 228:Core/Src/mgr_i2c.c ****   }
 836              		.loc 1 228 5 view .LVU172
 228:Core/Src/mgr_i2c.c ****   }
 837              		.loc 1 228 20 is_stmt 0 view .LVU173
 838 002e 064B     		ldr	r3, .L90
 839 0030 0122     		movs	r2, #1
 840 0032 1A70     		strb	r2, [r3]
 230:Core/Src/mgr_i2c.c **** 
 841              		.loc 1 230 1 view .LVU174
 842 0034 E8E7     		b	.L83
 843              	.L86:
 220:Core/Src/mgr_i2c.c ****       }
 844              		.loc 1 220 9 is_stmt 1 view .LVU175
 845 0036 FFF7FEFF 		bl	i2c1_ack_bit
 846              	.LVL47:
 847 003a F8E7     		b	.L87
 848              	.L85:
 225:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 849              		.loc 1 225 7 view .LVU176
 225:Core/Src/mgr_i2c.c ****       i2c_trig_state_trans();
 850              		.loc 1 225 16 is_stmt 0 view .LVU177
 851 003c 054B     		ldr	r3, .L90+12
 852 003e 0922     		movs	r2, #9
 853 0040 1A70     		strb	r2, [r3]
 226:Core/Src/mgr_i2c.c ****     }
 854              		.loc 1 226 7 is_stmt 1 view .LVU178
 855 0042 FFF7FEFF 		bl	i2c_trig_state_trans
 856              	.LVL48:
 857 0046 F2E7     		b	.L87
 858              	.L91:
 859              		.align	2
 860              	.L90:
 861 0048 00000000 		.word	state_executed
 862 004c 00000000 		.word	msg_cur
 863 0050 00000000 		.word	bytes_to_recv
 864 0054 00000000 		.word	last_evt
 865              		.cfi_endproc
 866              	.LFE75:
 868              		.section	.text.i2c_event_callback,"ax",%progbits
 869              		.align	1
 870              		.global	i2c_event_callback
 871              		.syntax unified
 872              		.thumb
 873              		.thumb_func
 875              	i2c_event_callback:
 876              	.LFB79:
 271:Core/Src/mgr_i2c.c ****   /* Figure out what happened */
 877              		.loc 1 271 1 view -0
 878              		.cfi_startproc
 879              		@ args = 0, pretend = 0, frame = 0
 880              		@ frame_needed = 0, uses_anonymous_args = 0
 881 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 24


 882              		.cfi_def_cfa_offset 8
 883              		.cfi_offset 3, -8
 884              		.cfi_offset 14, -4
 273:Core/Src/mgr_i2c.c **** 
 885              		.loc 1 273 3 view .LVU180
 273:Core/Src/mgr_i2c.c **** 
 886              		.loc 1 273 14 is_stmt 0 view .LVU181
 887 0002 FFF7FEFF 		bl	i2c1_get_last_event
 888              	.LVL49:
 889 0006 FFF7FEFF 		bl	i2c_decode_i2c1_event
 890              	.LVL50:
 273:Core/Src/mgr_i2c.c **** 
 891              		.loc 1 273 12 view .LVU182
 892 000a 024B     		ldr	r3, .L94
 893 000c 1870     		strb	r0, [r3]
 276:Core/Src/mgr_i2c.c ****   //cur_state();
 894              		.loc 1 276 3 is_stmt 1 view .LVU183
 895 000e FFF7FEFF 		bl	i2c_trig_state_trans
 896              	.LVL51:
 282:Core/Src/mgr_i2c.c **** 
 897              		.loc 1 282 1 is_stmt 0 view .LVU184
 898 0012 08BD     		pop	{r3, pc}
 899              	.L95:
 900              		.align	2
 901              	.L94:
 902 0014 00000000 		.word	last_evt
 903              		.cfi_endproc
 904              	.LFE79:
 906              		.section	.bss.idx.0,"aw",%nobits
 909              	idx.0:
 910 0000 00       		.space	1
 911              		.section	.rodata.TRANS_TAB,"a"
 912              		.align	2
 915              	TRANS_TAB:
 916 0000 00000000 		.word	i2c_state_idle
 917 0004 00000000 		.word	0
 918 0008 00000000 		.word	i2c_state_start_bit
 919 000c 00000000 		.word	i2c_state_start_bit
 920 0010 01000000 		.word	1
 921 0014 00000000 		.word	i2c_state_tx_data
 922 0018 00000000 		.word	i2c_state_tx_data
 923 001c 04000000 		.word	4
 924 0020 00000000 		.word	i2c_state_tx_data
 925 0024 00000000 		.word	i2c_state_tx_data
 926 0028 06000000 		.word	6
 927 002c 00000000 		.word	i2c_state_start_bit
 928 0030 00000000 		.word	i2c_state_start_bit
 929 0034 02000000 		.word	2
 930 0038 00000000 		.word	i2c_state_rx_data
 931 003c 00000000 		.word	i2c_state_tx_data
 932 0040 05000000 		.word	5
 933 0044 00000000 		.word	i2c_state_stop_bit
 934 0048 00000000 		.word	i2c_state_rx_data
 935 004c 07000000 		.word	7
 936 0050 00000000 		.word	i2c_state_rx_data
 937 0054 00000000 		.word	i2c_state_rx_data
 938 0058 08000000 		.word	8
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 25


 939 005c 00000000 		.word	i2c_state_stop_bit
 940 0060 00000000 		.word	i2c_state_stop_bit
 941 0064 03000000 		.word	3
 942 0068 00000000 		.word	i2c_state_idle
 943              		.section	.bss.cur_state,"aw",%nobits
 944              		.align	2
 947              	cur_state:
 948 0000 00000000 		.space	4
 949              		.section	.bss.state_executed,"aw",%nobits
 952              	state_executed:
 953 0000 00       		.space	1
 954              		.section	.bss.last_evt,"aw",%nobits
 957              	last_evt:
 958 0000 00       		.space	1
 959              		.section	.bss.bytes_to_recv,"aw",%nobits
 962              	bytes_to_recv:
 963 0000 00       		.space	1
 964              		.section	.bss.bytes_to_send,"aw",%nobits
 967              	bytes_to_send:
 968 0000 00       		.space	1
 969              		.section	.bss.msg_cur,"aw",%nobits
 970              		.align	2
 973              	msg_cur:
 974 0000 00000000 		.space	16
 974      00000000 
 974      00000000 
 974      00000000 
 975              		.section	.bss.msg_buf_data,"aw",%nobits
 976              		.align	2
 979              	msg_buf_data:
 980 0000 00000000 		.space	240
 980      00000000 
 980      00000000 
 980      00000000 
 980      00000000 
 981              		.section	.bss.msg_buf,"aw",%nobits
 982              		.align	2
 985              	msg_buf:
 986 0000 00000000 		.space	20
 986      00000000 
 986      00000000 
 986      00000000 
 986      00000000 
 987              		.text
 988              	.Letext0:
 989              		.file 2 "c:\\users\\callum\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@xp
 990              		.file 3 "c:\\users\\callum\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@xp
 991              		.file 4 "c:\\users\\callum\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@xp
 992              		.file 5 "Core/Inc/util_buffer.h"
 993              		.file 6 "Core/Inc/util_fsm.h"
 994              		.file 7 "Core/Inc/hw_i2c1.h"
 995              		.file 8 "Core/Inc/mgr_i2c.h"
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 26


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mgr_i2c.c
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:19     .text.i2c_state_error:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:25     .text.i2c_state_error:0000000000000000 i2c_state_error
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:41     .text.i2c_error_callback:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:47     .text.i2c_error_callback:0000000000000000 i2c_error_callback
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:65     .text.i2c_state_start_bit:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:71     .text.i2c_state_start_bit:0000000000000000 i2c_state_start_bit
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:104    .text.i2c_state_start_bit:0000000000000018 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:952    .bss.state_executed:0000000000000000 state_executed
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:109    .text.i2c_state_stop_bit:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:115    .text.i2c_state_stop_bit:0000000000000000 i2c_state_stop_bit
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:134    .text.i2c_decode_i2c1_event:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:140    .text.i2c_decode_i2c1_event:0000000000000000 i2c_decode_i2c1_event
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:260    .text.i2c_decode_i2c1_event:0000000000000058 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:967    .bss.bytes_to_send:0000000000000000 bytes_to_send
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:962    .bss.bytes_to_recv:0000000000000000 bytes_to_recv
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:266    .text.i2c_reset:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:272    .text.i2c_reset:0000000000000000 i2c_reset
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:299    .text.i2c_reset:0000000000000014 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:985    .bss.msg_buf:0000000000000000 msg_buf
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:305    .text.i2c_enable:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:311    .text.i2c_enable:0000000000000000 i2c_enable
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:330    .text.i2c_init:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:336    .text.i2c_init:0000000000000000 i2c_init
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:392    .text.i2c_init:000000000000003c $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:947    .bss.cur_state:0000000000000000 cur_state
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:645    .text.i2c_state_idle:0000000000000000 i2c_state_idle
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:875    .text.i2c_event_callback:0000000000000000 i2c_event_callback
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:979    .bss.msg_buf_data:0000000000000000 msg_buf_data
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:402    .text.i2c_disable:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:408    .text.i2c_disable:0000000000000000 i2c_disable
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:427    .text.i2c_poll_fsm:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:433    .text.i2c_poll_fsm:0000000000000000 i2c_poll_fsm
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:453    .text.i2c_poll_fsm:000000000000000c $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:458    .text.i2c_queue_msg:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:464    .text.i2c_queue_msg:0000000000000000 i2c_queue_msg
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:521    .text.i2c_queue_msg:0000000000000034 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:526    .text.i2c_trig_state_trans:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:532    .text.i2c_trig_state_trans:0000000000000000 i2c_trig_state_trans
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:629    .text.i2c_trig_state_trans:0000000000000070 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:909    .bss.idx.0:0000000000000000 idx.0
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:915    .rodata.TRANS_TAB:0000000000000000 TRANS_TAB
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:957    .bss.last_evt:0000000000000000 last_evt
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:639    .text.i2c_state_idle:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:698    .text.i2c_state_idle:0000000000000030 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:973    .bss.msg_cur:0000000000000000 msg_cur
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:707    .text.i2c_state_tx_data:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:713    .text.i2c_state_tx_data:0000000000000000 i2c_state_tx_data
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:772    .text.i2c_state_tx_data:0000000000000038 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:780    .text.i2c_state_rx_data:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:786    .text.i2c_state_rx_data:0000000000000000 i2c_state_rx_data
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:861    .text.i2c_state_rx_data:0000000000000048 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:869    .text.i2c_event_callback:0000000000000000 $t
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:902    .text.i2c_event_callback:0000000000000014 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:910    .bss.idx.0:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:912    .rodata.TRANS_TAB:0000000000000000 $d
ARM GAS  C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s 			page 27


C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:944    .bss.cur_state:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:953    .bss.state_executed:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:958    .bss.last_evt:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:963    .bss.bytes_to_recv:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:968    .bss.bytes_to_send:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:970    .bss.msg_cur:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:976    .bss.msg_buf_data:0000000000000000 $d
C:\Users\Callum\AppData\Local\Temp\ccWo10L6.s:982    .bss.msg_buf:0000000000000000 $d

UNDEFINED SYMBOLS
i2c1_start
i2c1_stop
i2c1_reset_periph
buf_reset
i2c1_enable_periph
i2c1_init
i2c1_set_evt_callback
i2c1_set_err_callback
buf_init
i2c1_disable_periph
buf_write
buf_is_empty
buf_read
i2c1_send
i2c1_recv
i2c1_nack_bit
i2c1_ack_bit
i2c1_get_last_event

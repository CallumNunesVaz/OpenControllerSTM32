ARM GAS  /tmp/cco30k1A.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mgr_hearbeat.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.heartbeat_reset,"ax",%progbits
  18              		.align	1
  19              		.global	heartbeat_reset
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	heartbeat_reset:
  25              	.LFB66:
  26              		.file 1 "Core/Src/mgr_hearbeat.c"
   1:Core/Src/mgr_hearbeat.c **** /**
   2:Core/Src/mgr_hearbeat.c ****  * @file mgr_heartbeat.h
   3:Core/Src/mgr_hearbeat.c ****  * @author your name (you@domain.com)
   4:Core/Src/mgr_hearbeat.c ****  * @brief manager for the hearbeat LED. Assumed active high LED
   5:Core/Src/mgr_hearbeat.c ****  * @version 0.1
   6:Core/Src/mgr_hearbeat.c ****  * @date 2022-05-05
   7:Core/Src/mgr_hearbeat.c ****  *
   8:Core/Src/mgr_hearbeat.c ****  * @copyright Copyright (c) 2022
   9:Core/Src/mgr_hearbeat.c ****  *
  10:Core/Src/mgr_hearbeat.c ****  */
  11:Core/Src/mgr_hearbeat.c **** 
  12:Core/Src/mgr_hearbeat.c **** #include "mgr_heartbeat.h"
  13:Core/Src/mgr_hearbeat.c **** 
  14:Core/Src/mgr_hearbeat.c **** /* Files required variables */
  15:Core/Src/mgr_hearbeat.c **** 
  16:Core/Src/mgr_hearbeat.c **** static uint8_t window_cnt_total;
  17:Core/Src/mgr_hearbeat.c **** 
  18:Core/Src/mgr_hearbeat.c **** static uint8_t tick_per_window_cnt;
  19:Core/Src/mgr_hearbeat.c **** 
  20:Core/Src/mgr_hearbeat.c **** static uint8_t window_cnt;
  21:Core/Src/mgr_hearbeat.c **** 
  22:Core/Src/mgr_hearbeat.c **** static uint8_t fade_vals[WINDOW_COUNT_FADE];
  23:Core/Src/mgr_hearbeat.c **** 
  24:Core/Src/mgr_hearbeat.c **** static uint32_t ticks_per_window;
  25:Core/Src/mgr_hearbeat.c **** 
  26:Core/Src/mgr_hearbeat.c **** static uint16_t heartbeat_period_ms;
  27:Core/Src/mgr_hearbeat.c **** 
  28:Core/Src/mgr_hearbeat.c **** static uint32_t pattern_snapshot;
  29:Core/Src/mgr_hearbeat.c **** 
  30:Core/Src/mgr_hearbeat.c **** static stmgpio_t gpio_led;
  31:Core/Src/mgr_hearbeat.c **** 
  32:Core/Src/mgr_hearbeat.c **** static hb_mode_t hb_pattern;
ARM GAS  /tmp/cco30k1A.s 			page 2


  33:Core/Src/mgr_hearbeat.c **** 
  34:Core/Src/mgr_hearbeat.c **** volatile static uint8_t callback_cnt;
  35:Core/Src/mgr_hearbeat.c **** 
  36:Core/Src/mgr_hearbeat.c **** volatile static bool heartbeat_is_active;
  37:Core/Src/mgr_hearbeat.c **** 
  38:Core/Src/mgr_hearbeat.c **** volatile static bool poll_mode;
  39:Core/Src/mgr_hearbeat.c **** 
  40:Core/Src/mgr_hearbeat.c **** int heartbeat_init(void)
  41:Core/Src/mgr_hearbeat.c **** {
  42:Core/Src/mgr_hearbeat.c ****     /* Setup led pin */
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
  47:Core/Src/mgr_hearbeat.c ****     ASSERT_INT(stmgpio_setup(&gpio_led));
  48:Core/Src/mgr_hearbeat.c **** 
  49:Core/Src/mgr_hearbeat.c ****     /* Set DEFAULTS */
  50:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(1000);
  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
  53:Core/Src/mgr_hearbeat.c **** 
  54:Core/Src/mgr_hearbeat.c ****     /* Setup callback for system tick */
  55:Core/Src/mgr_hearbeat.c ****     hw_systick_add_callback(heartbeat_tick_callback);
  56:Core/Src/mgr_hearbeat.c **** 
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
  58:Core/Src/mgr_hearbeat.c **** }
  59:Core/Src/mgr_hearbeat.c **** 
  60:Core/Src/mgr_hearbeat.c **** void heartbeat_reset(void)
  61:Core/Src/mgr_hearbeat.c **** {
  27              		.loc 1 61 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  62:Core/Src/mgr_hearbeat.c ****     /* Reset counters */
  63:Core/Src/mgr_hearbeat.c ****     window_cnt = 0;
  32              		.loc 1 63 5 view .LVU1
  33              		.loc 1 63 16 is_stmt 0 view .LVU2
  34 0000 0023     		movs	r3, #0
  35 0002 034A     		ldr	r2, .L2
  36 0004 1370     		strb	r3, [r2]
  64:Core/Src/mgr_hearbeat.c ****     tick_per_window_cnt = 0;
  37              		.loc 1 64 5 is_stmt 1 view .LVU3
  38              		.loc 1 64 25 is_stmt 0 view .LVU4
  39 0006 034A     		ldr	r2, .L2+4
  40 0008 1370     		strb	r3, [r2]
  65:Core/Src/mgr_hearbeat.c ****     callback_cnt = 0;
  41              		.loc 1 65 5 is_stmt 1 view .LVU5
  42              		.loc 1 65 18 is_stmt 0 view .LVU6
  43 000a 034A     		ldr	r2, .L2+8
  44 000c 1370     		strb	r3, [r2]
  66:Core/Src/mgr_hearbeat.c **** }
  45              		.loc 1 66 1 view .LVU7
  46 000e 7047     		bx	lr
  47              	.L3:
  48              		.align	2
  49              	.L2:
ARM GAS  /tmp/cco30k1A.s 			page 3


  50 0010 00000000 		.word	.LANCHOR0
  51 0014 00000000 		.word	.LANCHOR1
  52 0018 00000000 		.word	.LANCHOR2
  53              		.cfi_endproc
  54              	.LFE66:
  56              		.section	.text.heartbeat_stop,"ax",%progbits
  57              		.align	1
  58              		.global	heartbeat_stop
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  63              	heartbeat_stop:
  64              	.LFB67:
  67:Core/Src/mgr_hearbeat.c **** 
  68:Core/Src/mgr_hearbeat.c **** void heartbeat_stop(void)
  69:Core/Src/mgr_hearbeat.c **** {
  65              		.loc 1 69 1 is_stmt 1 view -0
  66              		.cfi_startproc
  67              		@ args = 0, pretend = 0, frame = 0
  68              		@ frame_needed = 0, uses_anonymous_args = 0
  69              		@ link register save eliminated.
  70:Core/Src/mgr_hearbeat.c ****     heartbeat_is_active = false;
  70              		.loc 1 70 5 view .LVU9
  71              		.loc 1 70 25 is_stmt 0 view .LVU10
  72 0000 014B     		ldr	r3, .L5
  73 0002 0022     		movs	r2, #0
  74 0004 1A70     		strb	r2, [r3]
  71:Core/Src/mgr_hearbeat.c **** }
  75              		.loc 1 71 1 view .LVU11
  76 0006 7047     		bx	lr
  77              	.L6:
  78              		.align	2
  79              	.L5:
  80 0008 00000000 		.word	.LANCHOR3
  81              		.cfi_endproc
  82              	.LFE67:
  84              		.section	.text.heartbeat_start,"ax",%progbits
  85              		.align	1
  86              		.global	heartbeat_start
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  91              	heartbeat_start:
  92              	.LFB68:
  72:Core/Src/mgr_hearbeat.c **** 
  73:Core/Src/mgr_hearbeat.c **** void heartbeat_start(void)
  74:Core/Src/mgr_hearbeat.c **** {
  93              		.loc 1 74 1 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97              		@ link register save eliminated.
  75:Core/Src/mgr_hearbeat.c ****     heartbeat_is_active = true;
  98              		.loc 1 75 5 view .LVU13
  99              		.loc 1 75 25 is_stmt 0 view .LVU14
 100 0000 014B     		ldr	r3, .L8
 101 0002 0122     		movs	r2, #1
ARM GAS  /tmp/cco30k1A.s 			page 4


 102 0004 1A70     		strb	r2, [r3]
  76:Core/Src/mgr_hearbeat.c **** }
 103              		.loc 1 76 1 view .LVU15
 104 0006 7047     		bx	lr
 105              	.L9:
 106              		.align	2
 107              	.L8:
 108 0008 00000000 		.word	.LANCHOR3
 109              		.cfi_endproc
 110              	.LFE68:
 112              		.section	.text.heartbeat_set_poll_mode,"ax",%progbits
 113              		.align	1
 114              		.global	heartbeat_set_poll_mode
 115              		.syntax unified
 116              		.thumb
 117              		.thumb_func
 119              	heartbeat_set_poll_mode:
 120              	.LVL0:
 121              	.LFB70:
  77:Core/Src/mgr_hearbeat.c **** 
  78:Core/Src/mgr_hearbeat.c **** void heartbeat_set_pattern_mode(hb_mode_t mode)
  79:Core/Src/mgr_hearbeat.c **** {
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
  82:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
  83:Core/Src/mgr_hearbeat.c **** }
  84:Core/Src/mgr_hearbeat.c **** 
  85:Core/Src/mgr_hearbeat.c **** void heartbeat_set_poll_mode(bool mode)
  86:Core/Src/mgr_hearbeat.c **** {
 122              		.loc 1 86 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126              		@ link register save eliminated.
  87:Core/Src/mgr_hearbeat.c ****     poll_mode = mode;
 127              		.loc 1 87 5 view .LVU17
 128              		.loc 1 87 15 is_stmt 0 view .LVU18
 129 0000 014B     		ldr	r3, .L11
 130 0002 1870     		strb	r0, [r3]
  88:Core/Src/mgr_hearbeat.c **** }
 131              		.loc 1 88 1 view .LVU19
 132 0004 7047     		bx	lr
 133              	.L12:
 134 0006 00BF     		.align	2
 135              	.L11:
 136 0008 00000000 		.word	.LANCHOR4
 137              		.cfi_endproc
 138              	.LFE70:
 140              		.section	.text.heartbeat_get_poll_mode,"ax",%progbits
 141              		.align	1
 142              		.global	heartbeat_get_poll_mode
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	heartbeat_get_poll_mode:
 148              	.LFB71:
  89:Core/Src/mgr_hearbeat.c **** 
ARM GAS  /tmp/cco30k1A.s 			page 5


  90:Core/Src/mgr_hearbeat.c **** bool heartbeat_get_poll_mode(void)
  91:Core/Src/mgr_hearbeat.c **** {
 149              		.loc 1 91 1 is_stmt 1 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
 153              		@ link register save eliminated.
  92:Core/Src/mgr_hearbeat.c ****     return poll_mode;
 154              		.loc 1 92 5 view .LVU21
 155              		.loc 1 92 12 is_stmt 0 view .LVU22
 156 0000 014B     		ldr	r3, .L14
 157 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
  93:Core/Src/mgr_hearbeat.c **** }
 158              		.loc 1 93 1 view .LVU23
 159 0004 7047     		bx	lr
 160              	.L15:
 161 0006 00BF     		.align	2
 162              	.L14:
 163 0008 00000000 		.word	.LANCHOR4
 164              		.cfi_endproc
 165              	.LFE71:
 167              		.section	.text.heartbeat_lower_multiple,"ax",%progbits
 168              		.align	1
 169              		.global	heartbeat_lower_multiple
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	heartbeat_lower_multiple:
 175              	.LVL1:
 176              	.LFB72:
  94:Core/Src/mgr_hearbeat.c **** 
  95:Core/Src/mgr_hearbeat.c **** uint32_t heartbeat_lower_multiple(uint32_t number, uint32_t multiple)
  96:Core/Src/mgr_hearbeat.c **** {
 177              		.loc 1 96 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
  97:Core/Src/mgr_hearbeat.c ****     uint32_t remainder;
 182              		.loc 1 97 5 view .LVU25
  98:Core/Src/mgr_hearbeat.c **** 
  99:Core/Src/mgr_hearbeat.c ****     remainder = number % multiple;
 183              		.loc 1 99 5 view .LVU26
 184              		.loc 1 99 15 is_stmt 0 view .LVU27
 185 0000 B0FBF1F3 		udiv	r3, r0, r1
 186 0004 01FB1301 		mls	r1, r1, r3, r0
 187              	.LVL2:
 100:Core/Src/mgr_hearbeat.c **** 
 101:Core/Src/mgr_hearbeat.c ****     number -= remainder;
 188              		.loc 1 101 5 is_stmt 1 view .LVU28
 102:Core/Src/mgr_hearbeat.c **** 
 103:Core/Src/mgr_hearbeat.c ****     return number;
 189              		.loc 1 103 5 view .LVU29
 104:Core/Src/mgr_hearbeat.c **** }
 190              		.loc 1 104 1 is_stmt 0 view .LVU30
 191 0008 401A     		subs	r0, r0, r1
 192              	.LVL3:
ARM GAS  /tmp/cco30k1A.s 			page 6


 193              		.loc 1 104 1 view .LVU31
 194 000a 7047     		bx	lr
 195              		.cfi_endproc
 196              	.LFE72:
 198              		.section	.text.heartbeat_poll,"ax",%progbits
 199              		.align	1
 200              		.global	heartbeat_poll
 201              		.syntax unified
 202              		.thumb
 203              		.thumb_func
 205              	heartbeat_poll:
 206              	.LFB73:
 105:Core/Src/mgr_hearbeat.c **** 
 106:Core/Src/mgr_hearbeat.c **** void heartbeat_poll(void)
 107:Core/Src/mgr_hearbeat.c **** {
 207              		.loc 1 107 1 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 108:Core/Src/mgr_hearbeat.c ****     /* Iterate for every time callback was called. Gotta catch up. */
 109:Core/Src/mgr_hearbeat.c ****     while (callback_cnt > 0)
 211              		.loc 1 109 5 view .LVU33
 212              		.loc 1 109 11 view .LVU34
 213              		.loc 1 109 25 is_stmt 0 view .LVU35
 214 0000 314B     		ldr	r3, .L30
 215 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 216              		.loc 1 109 11 view .LVU36
 217 0004 002B     		cmp	r3, #0
 218 0006 5ED0     		beq	.L27
 107:Core/Src/mgr_hearbeat.c ****     /* Iterate for every time callback was called. Gotta catch up. */
 219              		.loc 1 107 1 view .LVU37
 220 0008 10B5     		push	{r4, lr}
 221              	.LCFI0:
 222              		.cfi_def_cfa_offset 8
 223              		.cfi_offset 4, -8
 224              		.cfi_offset 14, -4
 225 000a 11E0     		b	.L23
 226              	.L20:
 110:Core/Src/mgr_hearbeat.c ****     {
 111:Core/Src/mgr_hearbeat.c ****         callback_cnt--;
 112:Core/Src/mgr_hearbeat.c **** 
 113:Core/Src/mgr_hearbeat.c ****         if (LED_BREATHE == hb_pattern)
 114:Core/Src/mgr_hearbeat.c ****         {
 115:Core/Src/mgr_hearbeat.c ****             /* Set high for particular number of ticks per window */
 116:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt < fade_vals[window_cnt])
 117:Core/Src/mgr_hearbeat.c ****             {
 118:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, PIN_HIGH);
 119:Core/Src/mgr_hearbeat.c ****             }
 120:Core/Src/mgr_hearbeat.c ****             else
 121:Core/Src/mgr_hearbeat.c ****             {
 122:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, PIN_LOW);
 227              		.loc 1 122 17 is_stmt 1 view .LVU38
 228 000c 0121     		movs	r1, #1
 229 000e 2F48     		ldr	r0, .L30+4
 230 0010 FFF7FEFF 		bl	stmgpio_write
 231              	.LVL4:
 232 0014 21E0     		b	.L21
ARM GAS  /tmp/cco30k1A.s 			page 7


 233              	.L19:
 123:Core/Src/mgr_hearbeat.c ****             }
 124:Core/Src/mgr_hearbeat.c **** 
 125:Core/Src/mgr_hearbeat.c ****             /* Increment tick counter */
 126:Core/Src/mgr_hearbeat.c ****             tick_per_window_cnt++;
 127:Core/Src/mgr_hearbeat.c **** 
 128:Core/Src/mgr_hearbeat.c ****             /* If counter ticked up enough to move to next window */
 129:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt >= ticks_per_window)
 130:Core/Src/mgr_hearbeat.c ****             {
 131:Core/Src/mgr_hearbeat.c ****                 /* Increment window counter, reset tick count */
 132:Core/Src/mgr_hearbeat.c ****                 window_cnt++;
 133:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 134:Core/Src/mgr_hearbeat.c **** 
 135:Core/Src/mgr_hearbeat.c ****                 /* If we've run out of windows, reset completely */
 136:Core/Src/mgr_hearbeat.c ****                 if (window_cnt_total <= window_cnt)
 137:Core/Src/mgr_hearbeat.c ****                 {
 138:Core/Src/mgr_hearbeat.c ****                     window_cnt = 0;
 139:Core/Src/mgr_hearbeat.c ****                 }
 140:Core/Src/mgr_hearbeat.c ****             }
 141:Core/Src/mgr_hearbeat.c ****         }
 142:Core/Src/mgr_hearbeat.c ****         else /* All other modes */
 143:Core/Src/mgr_hearbeat.c ****         {
 144:Core/Src/mgr_hearbeat.c ****             /* Increment tick counter */
 145:Core/Src/mgr_hearbeat.c ****             tick_per_window_cnt++;
 234              		.loc 1 145 13 view .LVU39
 235              		.loc 1 145 32 is_stmt 0 view .LVU40
 236 0016 2E4A     		ldr	r2, .L30+8
 237 0018 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 238 001a 0133     		adds	r3, r3, #1
 239 001c DBB2     		uxtb	r3, r3
 240 001e 1370     		strb	r3, [r2]
 146:Core/Src/mgr_hearbeat.c **** 
 147:Core/Src/mgr_hearbeat.c ****             /* If counter ticked up enough to move to next window (bit of snapshot) */
 148:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt >= ticks_per_window)
 241              		.loc 1 148 13 is_stmt 1 view .LVU41
 242              		.loc 1 148 37 is_stmt 0 view .LVU42
 243 0020 2C4A     		ldr	r2, .L30+12
 244 0022 1268     		ldr	r2, [r2]
 245              		.loc 1 148 16 view .LVU43
 246 0024 9342     		cmp	r3, r2
 247 0026 30D2     		bcs	.L28
 248              	.L18:
 109:Core/Src/mgr_hearbeat.c ****     {
 249              		.loc 1 109 11 is_stmt 1 view .LVU44
 109:Core/Src/mgr_hearbeat.c ****     {
 250              		.loc 1 109 25 is_stmt 0 view .LVU45
 251 0028 274B     		ldr	r3, .L30
 252 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 109:Core/Src/mgr_hearbeat.c ****     {
 253              		.loc 1 109 11 view .LVU46
 254 002c 002B     		cmp	r3, #0
 255 002e 49D0     		beq	.L29
 256              	.L23:
 111:Core/Src/mgr_hearbeat.c **** 
 257              		.loc 1 111 9 is_stmt 1 view .LVU47
 111:Core/Src/mgr_hearbeat.c **** 
 258              		.loc 1 111 21 is_stmt 0 view .LVU48
ARM GAS  /tmp/cco30k1A.s 			page 8


 259 0030 254A     		ldr	r2, .L30
 260 0032 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 261 0034 013B     		subs	r3, r3, #1
 262 0036 DBB2     		uxtb	r3, r3
 263 0038 1370     		strb	r3, [r2]
 113:Core/Src/mgr_hearbeat.c ****         {
 264              		.loc 1 113 9 is_stmt 1 view .LVU49
 113:Core/Src/mgr_hearbeat.c ****         {
 265              		.loc 1 113 25 is_stmt 0 view .LVU50
 266 003a 274B     		ldr	r3, .L30+16
 267 003c 1B68     		ldr	r3, [r3]
 113:Core/Src/mgr_hearbeat.c ****         {
 268              		.loc 1 113 12 view .LVU51
 269 003e 002B     		cmp	r3, #0
 270 0040 E9D1     		bne	.L19
 116:Core/Src/mgr_hearbeat.c ****             {
 271              		.loc 1 116 13 is_stmt 1 view .LVU52
 116:Core/Src/mgr_hearbeat.c ****             {
 272              		.loc 1 116 48 is_stmt 0 view .LVU53
 273 0042 264B     		ldr	r3, .L30+20
 274 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 275 0046 264A     		ldr	r2, .L30+24
 276 0048 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 116:Core/Src/mgr_hearbeat.c ****             {
 277              		.loc 1 116 37 view .LVU54
 278 004a 214B     		ldr	r3, .L30+8
 279 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 116:Core/Src/mgr_hearbeat.c ****             {
 280              		.loc 1 116 16 view .LVU55
 281 004e 9A42     		cmp	r2, r3
 282 0050 DCD9     		bls	.L20
 118:Core/Src/mgr_hearbeat.c ****             }
 283              		.loc 1 118 17 is_stmt 1 view .LVU56
 284 0052 0021     		movs	r1, #0
 285 0054 1D48     		ldr	r0, .L30+4
 286 0056 FFF7FEFF 		bl	stmgpio_write
 287              	.LVL5:
 288              	.L21:
 126:Core/Src/mgr_hearbeat.c **** 
 289              		.loc 1 126 13 view .LVU57
 126:Core/Src/mgr_hearbeat.c **** 
 290              		.loc 1 126 32 is_stmt 0 view .LVU58
 291 005a 1D4A     		ldr	r2, .L30+8
 292 005c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 293 005e 0133     		adds	r3, r3, #1
 294 0060 DBB2     		uxtb	r3, r3
 295 0062 1370     		strb	r3, [r2]
 129:Core/Src/mgr_hearbeat.c ****             {
 296              		.loc 1 129 13 is_stmt 1 view .LVU59
 129:Core/Src/mgr_hearbeat.c ****             {
 297              		.loc 1 129 37 is_stmt 0 view .LVU60
 298 0064 1B4A     		ldr	r2, .L30+12
 299 0066 1268     		ldr	r2, [r2]
 129:Core/Src/mgr_hearbeat.c ****             {
 300              		.loc 1 129 16 view .LVU61
 301 0068 9342     		cmp	r3, r2
 302 006a DDD3     		bcc	.L18
ARM GAS  /tmp/cco30k1A.s 			page 9


 132:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 303              		.loc 1 132 17 is_stmt 1 view .LVU62
 132:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 304              		.loc 1 132 27 is_stmt 0 view .LVU63
 305 006c 1B4A     		ldr	r2, .L30+20
 306 006e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 307 0070 0133     		adds	r3, r3, #1
 308 0072 DBB2     		uxtb	r3, r3
 309 0074 1370     		strb	r3, [r2]
 133:Core/Src/mgr_hearbeat.c **** 
 310              		.loc 1 133 17 is_stmt 1 view .LVU64
 133:Core/Src/mgr_hearbeat.c **** 
 311              		.loc 1 133 37 is_stmt 0 view .LVU65
 312 0076 164A     		ldr	r2, .L30+8
 313 0078 0021     		movs	r1, #0
 314 007a 1170     		strb	r1, [r2]
 136:Core/Src/mgr_hearbeat.c ****                 {
 315              		.loc 1 136 17 is_stmt 1 view .LVU66
 136:Core/Src/mgr_hearbeat.c ****                 {
 316              		.loc 1 136 38 is_stmt 0 view .LVU67
 317 007c 194A     		ldr	r2, .L30+28
 318 007e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 136:Core/Src/mgr_hearbeat.c ****                 {
 319              		.loc 1 136 20 view .LVU68
 320 0080 9342     		cmp	r3, r2
 321 0082 D1D3     		bcc	.L18
 138:Core/Src/mgr_hearbeat.c ****                 }
 322              		.loc 1 138 21 is_stmt 1 view .LVU69
 138:Core/Src/mgr_hearbeat.c ****                 }
 323              		.loc 1 138 32 is_stmt 0 view .LVU70
 324 0084 154B     		ldr	r3, .L30+20
 325 0086 1970     		strb	r1, [r3]
 326 0088 CEE7     		b	.L18
 327              	.L28:
 149:Core/Src/mgr_hearbeat.c ****             {
 150:Core/Src/mgr_hearbeat.c ****                 /* reset window tick counter */
 151:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 328              		.loc 1 151 17 is_stmt 1 view .LVU71
 329              		.loc 1 151 37 is_stmt 0 view .LVU72
 330 008a 114B     		ldr	r3, .L30+8
 331 008c 0022     		movs	r2, #0
 332 008e 1A70     		strb	r2, [r3]
 152:Core/Src/mgr_hearbeat.c **** 
 153:Core/Src/mgr_hearbeat.c ****                 /* write LED with value of LSB of snapshot */
 154:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, (stmgpio_state_t)(pattern_snapshot & 0x01));
 333              		.loc 1 154 17 is_stmt 1 view .LVU73
 334 0090 154C     		ldr	r4, .L30+32
 335 0092 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 336 0094 01F00101 		and	r1, r1, #1
 337 0098 0C48     		ldr	r0, .L30+4
 338 009a FFF7FEFF 		bl	stmgpio_write
 339              	.LVL6:
 155:Core/Src/mgr_hearbeat.c **** 
 156:Core/Src/mgr_hearbeat.c ****                 /* go to next bit of snapshot */
 157:Core/Src/mgr_hearbeat.c ****                 pattern_snapshot >>= 1;
 340              		.loc 1 157 17 view .LVU74
 341              		.loc 1 157 34 is_stmt 0 view .LVU75
ARM GAS  /tmp/cco30k1A.s 			page 10


 342 009e 2368     		ldr	r3, [r4]
 343 00a0 5B08     		lsrs	r3, r3, #1
 344 00a2 2360     		str	r3, [r4]
 158:Core/Src/mgr_hearbeat.c ****                 window_cnt++;
 345              		.loc 1 158 17 is_stmt 1 view .LVU76
 346              		.loc 1 158 27 is_stmt 0 view .LVU77
 347 00a4 0D4A     		ldr	r2, .L30+20
 348 00a6 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 349 00a8 0133     		adds	r3, r3, #1
 350 00aa DBB2     		uxtb	r3, r3
 351 00ac 1370     		strb	r3, [r2]
 159:Core/Src/mgr_hearbeat.c **** 
 160:Core/Src/mgr_hearbeat.c ****                 /* If we've run out of bits in the snapshot, reset snapshot and snapshot counter */
 161:Core/Src/mgr_hearbeat.c ****                 if (window_cnt_total <= window_cnt)
 352              		.loc 1 161 17 is_stmt 1 view .LVU78
 353              		.loc 1 161 38 is_stmt 0 view .LVU79
 354 00ae 0D4A     		ldr	r2, .L30+28
 355 00b0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 356              		.loc 1 161 20 view .LVU80
 357 00b2 9342     		cmp	r3, r2
 358 00b4 B8D3     		bcc	.L18
 162:Core/Src/mgr_hearbeat.c ****                 {
 163:Core/Src/mgr_hearbeat.c ****                     window_cnt = 0;
 359              		.loc 1 163 21 is_stmt 1 view .LVU81
 360              		.loc 1 163 32 is_stmt 0 view .LVU82
 361 00b6 094B     		ldr	r3, .L30+20
 362 00b8 0022     		movs	r2, #0
 363 00ba 1A70     		strb	r2, [r3]
 164:Core/Src/mgr_hearbeat.c ****                     pattern_snapshot = (uint32_t)hb_pattern;
 364              		.loc 1 164 21 is_stmt 1 view .LVU83
 365              		.loc 1 164 38 is_stmt 0 view .LVU84
 366 00bc 064B     		ldr	r3, .L30+16
 367 00be 1A68     		ldr	r2, [r3]
 368 00c0 2260     		str	r2, [r4]
 369 00c2 B1E7     		b	.L18
 370              	.L29:
 165:Core/Src/mgr_hearbeat.c ****                 }
 166:Core/Src/mgr_hearbeat.c ****             }
 167:Core/Src/mgr_hearbeat.c ****         }
 168:Core/Src/mgr_hearbeat.c ****     }
 169:Core/Src/mgr_hearbeat.c **** }
 371              		.loc 1 169 1 view .LVU85
 372 00c4 10BD     		pop	{r4, pc}
 373              	.L27:
 374              	.LCFI1:
 375              		.cfi_def_cfa_offset 0
 376              		.cfi_restore 4
 377              		.cfi_restore 14
 378 00c6 7047     		bx	lr
 379              	.L31:
 380              		.align	2
 381              	.L30:
 382 00c8 00000000 		.word	.LANCHOR2
 383 00cc 00000000 		.word	.LANCHOR7
 384 00d0 00000000 		.word	.LANCHOR1
 385 00d4 00000000 		.word	.LANCHOR8
 386 00d8 00000000 		.word	.LANCHOR5
ARM GAS  /tmp/cco30k1A.s 			page 11


 387 00dc 00000000 		.word	.LANCHOR0
 388 00e0 00000000 		.word	.LANCHOR6
 389 00e4 00000000 		.word	.LANCHOR9
 390 00e8 00000000 		.word	.LANCHOR10
 391              		.cfi_endproc
 392              	.LFE73:
 394              		.section	.text.heartbeat_tick_callback,"ax",%progbits
 395              		.align	1
 396              		.global	heartbeat_tick_callback
 397              		.syntax unified
 398              		.thumb
 399              		.thumb_func
 401              	heartbeat_tick_callback:
 402              	.LFB75:
 170:Core/Src/mgr_hearbeat.c **** 
 171:Core/Src/mgr_hearbeat.c **** void heartbeat_set_period_ms(uint16_t period_ms)
 172:Core/Src/mgr_hearbeat.c **** {
 173:Core/Src/mgr_hearbeat.c ****     uint16_t idx;
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 175:Core/Src/mgr_hearbeat.c **** 
 176:Core/Src/mgr_hearbeat.c ****     /* Set boundaries */
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 178:Core/Src/mgr_hearbeat.c ****     {
 179:Core/Src/mgr_hearbeat.c ****         period_ms = 3000;
 180:Core/Src/mgr_hearbeat.c ****     }
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
 182:Core/Src/mgr_hearbeat.c ****     {
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 184:Core/Src/mgr_hearbeat.c ****     }
 185:Core/Src/mgr_hearbeat.c **** 
 186:Core/Src/mgr_hearbeat.c ****     /* Different window counts requierd for different modes */
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 188:Core/Src/mgr_hearbeat.c ****     {
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 190:Core/Src/mgr_hearbeat.c ****     }
 191:Core/Src/mgr_hearbeat.c ****     else
 192:Core/Src/mgr_hearbeat.c ****     {
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
 194:Core/Src/mgr_hearbeat.c ****     }
 195:Core/Src/mgr_hearbeat.c **** 
 196:Core/Src/mgr_hearbeat.c ****     /* find heartbeat as lower multiple to keep division easy */
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 198:Core/Src/mgr_hearbeat.c **** 
 199:Core/Src/mgr_hearbeat.c ****     /* calculate ticks per window based on chosen heartbeat period and the set systick frequency */
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 201:Core/Src/mgr_hearbeat.c **** 
 202:Core/Src/mgr_hearbeat.c ****     /* calculate fade triangle */
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 204:Core/Src/mgr_hearbeat.c ****     {
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 207:Core/Src/mgr_hearbeat.c ****     }
 208:Core/Src/mgr_hearbeat.c **** 
 209:Core/Src/mgr_hearbeat.c ****     /* Reset to avoid surprises */
 210:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 211:Core/Src/mgr_hearbeat.c **** }
 212:Core/Src/mgr_hearbeat.c **** 
ARM GAS  /tmp/cco30k1A.s 			page 12


 213:Core/Src/mgr_hearbeat.c **** void heartbeat_tick_callback(void)
 214:Core/Src/mgr_hearbeat.c **** {
 403              		.loc 1 214 1 is_stmt 1 view -0
 404              		.cfi_startproc
 405              		@ args = 0, pretend = 0, frame = 0
 406              		@ frame_needed = 0, uses_anonymous_args = 0
 407 0000 08B5     		push	{r3, lr}
 408              	.LCFI2:
 409              		.cfi_def_cfa_offset 8
 410              		.cfi_offset 3, -8
 411              		.cfi_offset 14, -4
 215:Core/Src/mgr_hearbeat.c ****     /* only take action if told to */
 216:Core/Src/mgr_hearbeat.c ****     if (heartbeat_is_active)
 412              		.loc 1 216 5 view .LVU87
 413              		.loc 1 216 9 is_stmt 0 view .LVU88
 414 0002 074B     		ldr	r3, .L37
 415 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 416              		.loc 1 216 8 view .LVU89
 417 0006 23B1     		cbz	r3, .L33
 217:Core/Src/mgr_hearbeat.c ****     {
 218:Core/Src/mgr_hearbeat.c ****         callback_cnt++;
 418              		.loc 1 218 9 is_stmt 1 view .LVU90
 419              		.loc 1 218 21 is_stmt 0 view .LVU91
 420 0008 064A     		ldr	r2, .L37+4
 421 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 422 000c 0133     		adds	r3, r3, #1
 423 000e DBB2     		uxtb	r3, r3
 424 0010 1370     		strb	r3, [r2]
 425              	.L33:
 219:Core/Src/mgr_hearbeat.c ****     }
 220:Core/Src/mgr_hearbeat.c ****     /* if not manualy polled, do all the stuff in the callback (intensive) */
 221:Core/Src/mgr_hearbeat.c ****     if (!poll_mode) {
 426              		.loc 1 221 5 is_stmt 1 view .LVU92
 427              		.loc 1 221 9 is_stmt 0 view .LVU93
 428 0012 054B     		ldr	r3, .L37+8
 429 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 430              		.loc 1 221 8 view .LVU94
 431 0016 03B1     		cbz	r3, .L36
 432              	.L32:
 222:Core/Src/mgr_hearbeat.c ****         heartbeat_poll();
 223:Core/Src/mgr_hearbeat.c ****     }
 224:Core/Src/mgr_hearbeat.c **** }...
 433              		.loc 1 224 1 view .LVU95
 434 0018 08BD     		pop	{r3, pc}
 435              	.L36:
 222:Core/Src/mgr_hearbeat.c ****         heartbeat_poll();
 436              		.loc 1 222 9 is_stmt 1 view .LVU96
 437 001a FFF7FEFF 		bl	heartbeat_poll
 438              	.LVL7:
 439              		.loc 1 224 1 is_stmt 0 view .LVU97
 440 001e FBE7     		b	.L32
 441              	.L38:
 442              		.align	2
 443              	.L37:
 444 0020 00000000 		.word	.LANCHOR3
 445 0024 00000000 		.word	.LANCHOR2
 446 0028 00000000 		.word	.LANCHOR4
ARM GAS  /tmp/cco30k1A.s 			page 13


 447              		.cfi_endproc
 448              	.LFE75:
 450              		.global	__aeabi_ui2f
 451              		.global	__aeabi_fdiv
 452              		.global	__aeabi_fmul
 453              		.global	__aeabi_f2d
 454              		.global	__aeabi_ddiv
 455              		.global	__aeabi_d2uiz
 456              		.global	__aeabi_dadd
 457              		.global	__aeabi_dmul
 458              		.section	.text.heartbeat_set_period_ms,"ax",%progbits
 459              		.align	1
 460              		.global	heartbeat_set_period_ms
 461              		.syntax unified
 462              		.thumb
 463              		.thumb_func
 465              	heartbeat_set_period_ms:
 466              	.LVL8:
 467              	.LFB74:
 172:Core/Src/mgr_hearbeat.c **** {
 468              		.loc 1 172 1 is_stmt 1 view -0
 469              		.cfi_startproc
 470              		@ args = 0, pretend = 0, frame = 0
 471              		@ frame_needed = 0, uses_anonymous_args = 0
 172:Core/Src/mgr_hearbeat.c **** {
 472              		.loc 1 172 1 is_stmt 0 view .LVU99
 473 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 474              	.LCFI3:
 475              		.cfi_def_cfa_offset 32
 476              		.cfi_offset 3, -32
 477              		.cfi_offset 4, -28
 478              		.cfi_offset 5, -24
 479              		.cfi_offset 6, -20
 480              		.cfi_offset 7, -16
 481              		.cfi_offset 8, -12
 482              		.cfi_offset 9, -8
 483              		.cfi_offset 14, -4
 484 0004 0446     		mov	r4, r0
 173:Core/Src/mgr_hearbeat.c ****     uint16_t idx;
 485              		.loc 1 173 5 is_stmt 1 view .LVU100
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 486              		.loc 1 174 5 view .LVU101
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 487              		.loc 1 174 32 is_stmt 0 view .LVU102
 488 0006 FFF7FEFF 		bl	hw_systick_get_freq
 489              	.LVL9:
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 490              		.loc 1 174 32 view .LVU103
 491 000a 0646     		mov	r6, r0
 492              	.LVL10:
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 493              		.loc 1 177 5 is_stmt 1 view .LVU104
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 494              		.loc 1 177 8 is_stmt 0 view .LVU105
 495 000c 40F6B733 		movw	r3, #2999
 496 0010 9C42     		cmp	r4, r3
 497 0012 05D8     		bhi	.L45
ARM GAS  /tmp/cco30k1A.s 			page 14


 498              	.LVL11:
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
 499              		.loc 1 181 5 is_stmt 1 view .LVU106
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
 500              		.loc 1 181 8 is_stmt 0 view .LVU107
 501 0014 B4F5FA7F 		cmp	r4, #500
 502 0018 04D8     		bhi	.L40
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 503              		.loc 1 183 19 view .LVU108
 504 001a 4FF4FA74 		mov	r4, #500
 505              	.LVL12:
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 506              		.loc 1 183 19 view .LVU109
 507 001e 01E0     		b	.L40
 508              	.LVL13:
 509              	.L45:
 179:Core/Src/mgr_hearbeat.c ****         period_ms = 3000;
 510              		.loc 1 179 19 view .LVU110
 511 0020 40F6B834 		movw	r4, #3000
 512              	.LVL14:
 513              	.L40:
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 514              		.loc 1 187 5 is_stmt 1 view .LVU111
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 515              		.loc 1 187 21 is_stmt 0 view .LVU112
 516 0024 2E4B     		ldr	r3, .L48
 517 0026 1B68     		ldr	r3, [r3]
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 518              		.loc 1 187 8 view .LVU113
 519 0028 63BB     		cbnz	r3, .L41
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 520              		.loc 1 189 9 is_stmt 1 view .LVU114
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 521              		.loc 1 189 26 is_stmt 0 view .LVU115
 522 002a 2E4B     		ldr	r3, .L48+4
 523 002c 6422     		movs	r2, #100
 524 002e 1A70     		strb	r2, [r3]
 525              	.L42:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 526              		.loc 1 197 5 is_stmt 1 view .LVU116
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 527              		.loc 1 197 27 is_stmt 0 view .LVU117
 528 0030 2C4B     		ldr	r3, .L48+4
 529 0032 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 530 0034 2946     		mov	r1, r5
 531 0036 2046     		mov	r0, r4
 532 0038 FFF7FEFF 		bl	heartbeat_lower_multiple
 533              	.LVL15:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 534              		.loc 1 197 25 view .LVU118
 535 003c 84B2     		uxth	r4, r0
 536              	.LVL16:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 537              		.loc 1 197 25 view .LVU119
 538 003e 2A4B     		ldr	r3, .L48+8
 539 0040 1C80     		strh	r4, [r3]	@ movhi
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
ARM GAS  /tmp/cco30k1A.s 			page 15


 540              		.loc 1 200 5 is_stmt 1 view .LVU120
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 541              		.loc 1 200 36 is_stmt 0 view .LVU121
 542 0042 3046     		mov	r0, r6
 543 0044 FFF7FEFF 		bl	__aeabi_ui2f
 544              	.LVL17:
 545 0048 0646     		mov	r6, r0
 546              	.LVL18:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 547              		.loc 1 200 63 view .LVU122
 548 004a 2846     		mov	r0, r5
 549 004c FFF7FEFF 		bl	__aeabi_ui2f
 550              	.LVL19:
 551 0050 8146     		mov	r9, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 552              		.loc 1 200 60 view .LVU123
 553 0052 0146     		mov	r1, r0
 554 0054 3046     		mov	r0, r6
 555 0056 FFF7FEFF 		bl	__aeabi_fdiv
 556              	.LVL20:
 557 005a 0646     		mov	r6, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 558              		.loc 1 200 91 view .LVU124
 559 005c 2046     		mov	r0, r4
 560 005e FFF7FEFF 		bl	__aeabi_ui2f
 561              	.LVL21:
 562 0062 0146     		mov	r1, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 563              		.loc 1 200 88 view .LVU125
 564 0064 3046     		mov	r0, r6
 565 0066 FFF7FEFF 		bl	__aeabi_fmul
 566              	.LVL22:
 567 006a FFF7FEFF 		bl	__aeabi_f2d
 568              	.LVL23:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 569              		.loc 1 200 119 view .LVU126
 570 006e 0022     		movs	r2, #0
 571 0070 1E4B     		ldr	r3, .L48+12
 572 0072 FFF7FEFF 		bl	__aeabi_ddiv
 573              	.LVL24:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 574              		.loc 1 200 24 view .LVU127
 575 0076 FFF7FEFF 		bl	__aeabi_d2uiz
 576              	.LVL25:
 577 007a 8046     		mov	r8, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 578              		.loc 1 200 22 view .LVU128
 579 007c 1C4B     		ldr	r3, .L48+16
 580 007e 1860     		str	r0, [r3]
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 581              		.loc 1 203 5 is_stmt 1 view .LVU129
 582              	.LVL26:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 583              		.loc 1 203 14 is_stmt 0 view .LVU130
 584 0080 0024     		movs	r4, #0
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 585              		.loc 1 203 5 view .LVU131
ARM GAS  /tmp/cco30k1A.s 			page 16


 586 0082 26E0     		b	.L43
 587              	.LVL27:
 588              	.L41:
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
 589              		.loc 1 193 9 is_stmt 1 view .LVU132
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
 590              		.loc 1 193 26 is_stmt 0 view .LVU133
 591 0084 174B     		ldr	r3, .L48+4
 592 0086 2022     		movs	r2, #32
 593 0088 1A70     		strb	r2, [r3]
 594 008a D1E7     		b	.L42
 595              	.LVL28:
 596              	.L44:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 597              		.loc 1 205 9 is_stmt 1 discriminator 3 view .LVU134
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 598              		.loc 1 205 44 is_stmt 0 discriminator 3 view .LVU135
 599 008c 2046     		mov	r0, r4
 600 008e FFF7FEFF 		bl	__aeabi_ui2f
 601              	.LVL29:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 602              		.loc 1 205 56 discriminator 3 view .LVU136
 603 0092 4946     		mov	r1, r9
 604 0094 FFF7FEFF 		bl	__aeabi_fdiv
 605              	.LVL30:
 606 0098 FFF7FEFF 		bl	__aeabi_f2d
 607              	.LVL31:
 608 009c 0246     		mov	r2, r0
 609 009e 0B46     		mov	r3, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 610              		.loc 1 205 40 discriminator 3 view .LVU137
 611 00a0 FFF7FEFF 		bl	__aeabi_dadd
 612              	.LVL32:
 613 00a4 0646     		mov	r6, r0
 614 00a6 0F46     		mov	r7, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 615              		.loc 1 205 88 discriminator 3 view .LVU138
 616 00a8 4046     		mov	r0, r8
 617 00aa FFF7FEFF 		bl	__aeabi_ui2f
 618              	.LVL33:
 619 00ae FFF7FEFF 		bl	__aeabi_f2d
 620              	.LVL34:
 621 00b2 0246     		mov	r2, r0
 622 00b4 0B46     		mov	r3, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 623              		.loc 1 205 85 discriminator 3 view .LVU139
 624 00b6 3046     		mov	r0, r6
 625 00b8 3946     		mov	r1, r7
 626 00ba FFF7FEFF 		bl	__aeabi_dmul
 627              	.LVL35:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 628              		.loc 1 205 26 discriminator 3 view .LVU140
 629 00be FFF7FEFF 		bl	__aeabi_d2uiz
 630              	.LVL36:
 631 00c2 C3B2     		uxtb	r3, r0
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 632              		.loc 1 205 24 discriminator 3 view .LVU141
ARM GAS  /tmp/cco30k1A.s 			page 17


 633 00c4 0B49     		ldr	r1, .L48+20
 634 00c6 0B55     		strb	r3, [r1, r4]
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 635              		.loc 1 206 9 is_stmt 1 discriminator 3 view .LVU142
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 636              		.loc 1 206 36 is_stmt 0 discriminator 3 view .LVU143
 637 00c8 2A1B     		subs	r2, r5, r4
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 638              		.loc 1 206 42 discriminator 3 view .LVU144
 639 00ca 013A     		subs	r2, r2, #1
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 640              		.loc 1 206 47 discriminator 3 view .LVU145
 641 00cc 8B54     		strb	r3, [r1, r2]
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 642              		.loc 1 203 49 is_stmt 1 discriminator 3 view .LVU146
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 643              		.loc 1 203 52 is_stmt 0 discriminator 3 view .LVU147
 644 00ce 0134     		adds	r4, r4, #1
 645              	.LVL37:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 646              		.loc 1 203 52 discriminator 3 view .LVU148
 647 00d0 A4B2     		uxth	r4, r4
 648              	.LVL38:
 649              	.L43:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 650              		.loc 1 203 19 is_stmt 1 discriminator 1 view .LVU149
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 651              		.loc 1 203 5 is_stmt 0 discriminator 1 view .LVU150
 652 00d2 B4EB550F 		cmp	r4, r5, lsr #1
 653 00d6 D9D3     		bcc	.L44
 210:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 654              		.loc 1 210 5 is_stmt 1 view .LVU151
 655 00d8 FFF7FEFF 		bl	heartbeat_reset
 656              	.LVL39:
 211:Core/Src/mgr_hearbeat.c **** }
 657              		.loc 1 211 1 is_stmt 0 view .LVU152
 658 00dc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 659              	.LVL40:
 660              	.L49:
 211:Core/Src/mgr_hearbeat.c **** }
 661              		.loc 1 211 1 view .LVU153
 662              		.align	2
 663              	.L48:
 664 00e0 00000000 		.word	.LANCHOR5
 665 00e4 00000000 		.word	.LANCHOR9
 666 00e8 00000000 		.word	.LANCHOR11
 667 00ec 00408F40 		.word	1083129856
 668 00f0 00000000 		.word	.LANCHOR8
 669 00f4 00000000 		.word	.LANCHOR6
 670              		.cfi_endproc
 671              	.LFE74:
 673              		.section	.text.heartbeat_init,"ax",%progbits
 674              		.align	1
 675              		.global	heartbeat_init
 676              		.syntax unified
 677              		.thumb
 678              		.thumb_func
ARM GAS  /tmp/cco30k1A.s 			page 18


 680              	heartbeat_init:
 681              	.LFB65:
  41:Core/Src/mgr_hearbeat.c **** {
 682              		.loc 1 41 1 is_stmt 1 view -0
 683              		.cfi_startproc
 684              		@ args = 0, pretend = 0, frame = 0
 685              		@ frame_needed = 0, uses_anonymous_args = 0
 686 0000 10B5     		push	{r4, lr}
 687              	.LCFI4:
 688              		.cfi_def_cfa_offset 8
 689              		.cfi_offset 4, -8
 690              		.cfi_offset 14, -4
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
 691              		.loc 1 43 5 view .LVU155
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
 692              		.loc 1 43 19 is_stmt 0 view .LVU156
 693 0002 0E48     		ldr	r0, .L55
 694 0004 4323     		movs	r3, #67
 695 0006 0371     		strb	r3, [r0, #4]
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
 696              		.loc 1 44 5 is_stmt 1 view .LVU157
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
 697              		.loc 1 44 18 is_stmt 0 view .LVU158
 698 0008 0D23     		movs	r3, #13
 699 000a 4371     		strb	r3, [r0, #5]
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
 700              		.loc 1 45 5 is_stmt 1 view .LVU159
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
 701              		.loc 1 45 18 is_stmt 0 view .LVU160
 702 000c 0423     		movs	r3, #4
 703 000e C370     		strb	r3, [r0, #3]
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
 704              		.loc 1 46 5 is_stmt 1 view .LVU161
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
 705              		.loc 1 46 18 is_stmt 0 view .LVU162
 706 0010 0223     		movs	r3, #2
 707 0012 4370     		strb	r3, [r0, #1]
  47:Core/Src/mgr_hearbeat.c ****     ASSERT_INT(stmgpio_setup(&gpio_led));
 708              		.loc 1 47 5 is_stmt 1 view .LVU163
 709 0014 FFF7FEFF 		bl	stmgpio_setup
 710              	.LVL41:
 711 0018 10B1     		cbz	r0, .L54
 712 001a 0124     		movs	r4, #1
 713              	.L50:
  58:Core/Src/mgr_hearbeat.c **** }
 714              		.loc 1 58 1 is_stmt 0 view .LVU164
 715 001c 2046     		mov	r0, r4
 716 001e 10BD     		pop	{r4, pc}
 717              	.L54:
 718 0020 0446     		mov	r4, r0
  50:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(1000);
 719              		.loc 1 50 5 is_stmt 1 view .LVU165
 720 0022 4FF47A70 		mov	r0, #1000
 721 0026 FFF7FEFF 		bl	heartbeat_set_period_ms
 722              	.LVL42:
  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
 723              		.loc 1 51 5 view .LVU166
ARM GAS  /tmp/cco30k1A.s 			page 19


  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
 724              		.loc 1 51 16 is_stmt 0 view .LVU167
 725 002a 0023     		movs	r3, #0
 726 002c 044A     		ldr	r2, .L55+4
 727 002e 1360     		str	r3, [r2]
  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
 728              		.loc 1 52 5 is_stmt 1 view .LVU168
  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
 729              		.loc 1 52 22 is_stmt 0 view .LVU169
 730 0030 044A     		ldr	r2, .L55+8
 731 0032 1360     		str	r3, [r2]
  55:Core/Src/mgr_hearbeat.c ****     hw_systick_add_callback(heartbeat_tick_callback);
 732              		.loc 1 55 5 is_stmt 1 view .LVU170
 733 0034 0448     		ldr	r0, .L55+12
 734 0036 FFF7FEFF 		bl	hw_systick_add_callback
 735              	.LVL43:
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
 736              		.loc 1 57 5 view .LVU171
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
 737              		.loc 1 57 12 is_stmt 0 view .LVU172
 738 003a EFE7     		b	.L50
 739              	.L56:
 740              		.align	2
 741              	.L55:
 742 003c 00000000 		.word	.LANCHOR7
 743 0040 00000000 		.word	.LANCHOR5
 744 0044 00000000 		.word	.LANCHOR10
 745 0048 00000000 		.word	heartbeat_tick_callback
 746              		.cfi_endproc
 747              	.LFE65:
 749              		.section	.text.heartbeat_set_pattern_mode,"ax",%progbits
 750              		.align	1
 751              		.global	heartbeat_set_pattern_mode
 752              		.syntax unified
 753              		.thumb
 754              		.thumb_func
 756              	heartbeat_set_pattern_mode:
 757              	.LVL44:
 758              	.LFB69:
  79:Core/Src/mgr_hearbeat.c **** {
 759              		.loc 1 79 1 is_stmt 1 view -0
 760              		.cfi_startproc
 761              		@ args = 0, pretend = 0, frame = 0
 762              		@ frame_needed = 0, uses_anonymous_args = 0
  79:Core/Src/mgr_hearbeat.c **** {
 763              		.loc 1 79 1 is_stmt 0 view .LVU174
 764 0000 08B5     		push	{r3, lr}
 765              	.LCFI5:
 766              		.cfi_def_cfa_offset 8
 767              		.cfi_offset 3, -8
 768              		.cfi_offset 14, -4
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
 769              		.loc 1 80 5 is_stmt 1 view .LVU175
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
 770              		.loc 1 80 16 is_stmt 0 view .LVU176
 771 0002 044B     		ldr	r3, .L59
 772 0004 1860     		str	r0, [r3]
ARM GAS  /tmp/cco30k1A.s 			page 20


  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
 773              		.loc 1 81 5 is_stmt 1 view .LVU177
 774 0006 044B     		ldr	r3, .L59+4
 775 0008 1888     		ldrh	r0, [r3]
 776              	.LVL45:
  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
 777              		.loc 1 81 5 is_stmt 0 view .LVU178
 778 000a FFF7FEFF 		bl	heartbeat_set_period_ms
 779              	.LVL46:
  82:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 780              		.loc 1 82 5 is_stmt 1 view .LVU179
 781 000e FFF7FEFF 		bl	heartbeat_reset
 782              	.LVL47:
  83:Core/Src/mgr_hearbeat.c **** }
 783              		.loc 1 83 1 is_stmt 0 view .LVU180
 784 0012 08BD     		pop	{r3, pc}
 785              	.L60:
 786              		.align	2
 787              	.L59:
 788 0014 00000000 		.word	.LANCHOR5
 789 0018 00000000 		.word	.LANCHOR11
 790              		.cfi_endproc
 791              	.LFE69:
 793              		.section	.bss.callback_cnt,"aw",%nobits
 794              		.set	.LANCHOR2,. + 0
 797              	callback_cnt:
 798 0000 00       		.space	1
 799              		.section	.bss.fade_vals,"aw",%nobits
 800              		.align	2
 801              		.set	.LANCHOR6,. + 0
 804              	fade_vals:
 805 0000 00000000 		.space	100
 805      00000000 
 805      00000000 
 805      00000000 
 805      00000000 
 806              		.section	.bss.gpio_led,"aw",%nobits
 807              		.align	2
 808              		.set	.LANCHOR7,. + 0
 811              	gpio_led:
 812 0000 00000000 		.space	12
 812      00000000 
 812      00000000 
 813              		.section	.bss.hb_pattern,"aw",%nobits
 814              		.align	2
 815              		.set	.LANCHOR5,. + 0
 818              	hb_pattern:
 819 0000 00000000 		.space	4
 820              		.section	.bss.heartbeat_is_active,"aw",%nobits
 821              		.set	.LANCHOR3,. + 0
 824              	heartbeat_is_active:
 825 0000 00       		.space	1
 826              		.section	.bss.heartbeat_period_ms,"aw",%nobits
 827              		.align	1
 828              		.set	.LANCHOR11,. + 0
 831              	heartbeat_period_ms:
 832 0000 0000     		.space	2
ARM GAS  /tmp/cco30k1A.s 			page 21


 833              		.section	.bss.pattern_snapshot,"aw",%nobits
 834              		.align	2
 835              		.set	.LANCHOR10,. + 0
 838              	pattern_snapshot:
 839 0000 00000000 		.space	4
 840              		.section	.bss.poll_mode,"aw",%nobits
 841              		.set	.LANCHOR4,. + 0
 844              	poll_mode:
 845 0000 00       		.space	1
 846              		.section	.bss.tick_per_window_cnt,"aw",%nobits
 847              		.set	.LANCHOR1,. + 0
 850              	tick_per_window_cnt:
 851 0000 00       		.space	1
 852              		.section	.bss.ticks_per_window,"aw",%nobits
 853              		.align	2
 854              		.set	.LANCHOR8,. + 0
 857              	ticks_per_window:
 858 0000 00000000 		.space	4
 859              		.section	.bss.window_cnt,"aw",%nobits
 860              		.set	.LANCHOR0,. + 0
 863              	window_cnt:
 864 0000 00       		.space	1
 865              		.section	.bss.window_cnt_total,"aw",%nobits
 866              		.set	.LANCHOR9,. + 0
 869              	window_cnt_total:
 870 0000 00       		.space	1
 871              		.text
 872              	.Letext0:
 873              		.file 2 "/home/callum/.config/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tools/arm-no
 874              		.file 3 "/home/callum/.config/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tools/arm-no
 875              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 876              		.file 5 "Core/Inc/hw_stmgpio.h"
 877              		.file 6 "Core/Inc/mgr_heartbeat.h"
 878              		.file 7 "Core/Inc/hw_systick.h"
ARM GAS  /tmp/cco30k1A.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mgr_hearbeat.c
     /tmp/cco30k1A.s:18     .text.heartbeat_reset:0000000000000000 $t
     /tmp/cco30k1A.s:24     .text.heartbeat_reset:0000000000000000 heartbeat_reset
     /tmp/cco30k1A.s:50     .text.heartbeat_reset:0000000000000010 $d
     /tmp/cco30k1A.s:57     .text.heartbeat_stop:0000000000000000 $t
     /tmp/cco30k1A.s:63     .text.heartbeat_stop:0000000000000000 heartbeat_stop
     /tmp/cco30k1A.s:80     .text.heartbeat_stop:0000000000000008 $d
     /tmp/cco30k1A.s:85     .text.heartbeat_start:0000000000000000 $t
     /tmp/cco30k1A.s:91     .text.heartbeat_start:0000000000000000 heartbeat_start
     /tmp/cco30k1A.s:108    .text.heartbeat_start:0000000000000008 $d
     /tmp/cco30k1A.s:113    .text.heartbeat_set_poll_mode:0000000000000000 $t
     /tmp/cco30k1A.s:119    .text.heartbeat_set_poll_mode:0000000000000000 heartbeat_set_poll_mode
     /tmp/cco30k1A.s:136    .text.heartbeat_set_poll_mode:0000000000000008 $d
     /tmp/cco30k1A.s:141    .text.heartbeat_get_poll_mode:0000000000000000 $t
     /tmp/cco30k1A.s:147    .text.heartbeat_get_poll_mode:0000000000000000 heartbeat_get_poll_mode
     /tmp/cco30k1A.s:163    .text.heartbeat_get_poll_mode:0000000000000008 $d
     /tmp/cco30k1A.s:168    .text.heartbeat_lower_multiple:0000000000000000 $t
     /tmp/cco30k1A.s:174    .text.heartbeat_lower_multiple:0000000000000000 heartbeat_lower_multiple
     /tmp/cco30k1A.s:199    .text.heartbeat_poll:0000000000000000 $t
     /tmp/cco30k1A.s:205    .text.heartbeat_poll:0000000000000000 heartbeat_poll
     /tmp/cco30k1A.s:382    .text.heartbeat_poll:00000000000000c8 $d
     /tmp/cco30k1A.s:395    .text.heartbeat_tick_callback:0000000000000000 $t
     /tmp/cco30k1A.s:401    .text.heartbeat_tick_callback:0000000000000000 heartbeat_tick_callback
     /tmp/cco30k1A.s:444    .text.heartbeat_tick_callback:0000000000000020 $d
     /tmp/cco30k1A.s:459    .text.heartbeat_set_period_ms:0000000000000000 $t
     /tmp/cco30k1A.s:465    .text.heartbeat_set_period_ms:0000000000000000 heartbeat_set_period_ms
     /tmp/cco30k1A.s:664    .text.heartbeat_set_period_ms:00000000000000e0 $d
     /tmp/cco30k1A.s:674    .text.heartbeat_init:0000000000000000 $t
     /tmp/cco30k1A.s:680    .text.heartbeat_init:0000000000000000 heartbeat_init
     /tmp/cco30k1A.s:742    .text.heartbeat_init:000000000000003c $d
     /tmp/cco30k1A.s:750    .text.heartbeat_set_pattern_mode:0000000000000000 $t
     /tmp/cco30k1A.s:756    .text.heartbeat_set_pattern_mode:0000000000000000 heartbeat_set_pattern_mode
     /tmp/cco30k1A.s:788    .text.heartbeat_set_pattern_mode:0000000000000014 $d
     /tmp/cco30k1A.s:797    .bss.callback_cnt:0000000000000000 callback_cnt
     /tmp/cco30k1A.s:798    .bss.callback_cnt:0000000000000000 $d
     /tmp/cco30k1A.s:800    .bss.fade_vals:0000000000000000 $d
     /tmp/cco30k1A.s:804    .bss.fade_vals:0000000000000000 fade_vals
     /tmp/cco30k1A.s:807    .bss.gpio_led:0000000000000000 $d
     /tmp/cco30k1A.s:811    .bss.gpio_led:0000000000000000 gpio_led
     /tmp/cco30k1A.s:814    .bss.hb_pattern:0000000000000000 $d
     /tmp/cco30k1A.s:818    .bss.hb_pattern:0000000000000000 hb_pattern
     /tmp/cco30k1A.s:824    .bss.heartbeat_is_active:0000000000000000 heartbeat_is_active
     /tmp/cco30k1A.s:825    .bss.heartbeat_is_active:0000000000000000 $d
     /tmp/cco30k1A.s:827    .bss.heartbeat_period_ms:0000000000000000 $d
     /tmp/cco30k1A.s:831    .bss.heartbeat_period_ms:0000000000000000 heartbeat_period_ms
     /tmp/cco30k1A.s:834    .bss.pattern_snapshot:0000000000000000 $d
     /tmp/cco30k1A.s:838    .bss.pattern_snapshot:0000000000000000 pattern_snapshot
     /tmp/cco30k1A.s:844    .bss.poll_mode:0000000000000000 poll_mode
     /tmp/cco30k1A.s:845    .bss.poll_mode:0000000000000000 $d
     /tmp/cco30k1A.s:850    .bss.tick_per_window_cnt:0000000000000000 tick_per_window_cnt
     /tmp/cco30k1A.s:851    .bss.tick_per_window_cnt:0000000000000000 $d
     /tmp/cco30k1A.s:853    .bss.ticks_per_window:0000000000000000 $d
     /tmp/cco30k1A.s:857    .bss.ticks_per_window:0000000000000000 ticks_per_window
     /tmp/cco30k1A.s:863    .bss.window_cnt:0000000000000000 window_cnt
     /tmp/cco30k1A.s:864    .bss.window_cnt:0000000000000000 $d
     /tmp/cco30k1A.s:869    .bss.window_cnt_total:0000000000000000 window_cnt_total
ARM GAS  /tmp/cco30k1A.s 			page 23


     /tmp/cco30k1A.s:870    .bss.window_cnt_total:0000000000000000 $d

UNDEFINED SYMBOLS
stmgpio_write
__aeabi_ui2f
__aeabi_fdiv
__aeabi_fmul
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2uiz
__aeabi_dadd
__aeabi_dmul
hw_systick_get_freq
stmgpio_setup
hw_systick_add_callback

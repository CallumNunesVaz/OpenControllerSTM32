ARM GAS  /tmp/ccv2O6GG.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mgr_hearbeat.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.heartbeat_reset,"ax",%progbits
  18              		.align	1
  19              		.global	heartbeat_reset
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	heartbeat_reset:
  25              	.LFB66:
  26              		.file 1 "Core/Src/mgr_hearbeat.c"
   1:Core/Src/mgr_hearbeat.c **** /**
   2:Core/Src/mgr_hearbeat.c ****  * @file mgr_heartbeat.h
   3:Core/Src/mgr_hearbeat.c ****  * @author your name (you@domain.com)
   4:Core/Src/mgr_hearbeat.c ****  * @brief manager for the hearbeat LED. Assumed active high LED
   5:Core/Src/mgr_hearbeat.c ****  * @version 0.1
   6:Core/Src/mgr_hearbeat.c ****  * @date 2022-05-05
   7:Core/Src/mgr_hearbeat.c ****  *
   8:Core/Src/mgr_hearbeat.c ****  * @copyright Copyright (c) 2022
   9:Core/Src/mgr_hearbeat.c ****  *
  10:Core/Src/mgr_hearbeat.c ****  */
  11:Core/Src/mgr_hearbeat.c **** 
  12:Core/Src/mgr_hearbeat.c **** #include "mgr_heartbeat.h"
  13:Core/Src/mgr_hearbeat.c **** 
  14:Core/Src/mgr_hearbeat.c **** /* Files required variables */
  15:Core/Src/mgr_hearbeat.c **** 
  16:Core/Src/mgr_hearbeat.c **** static uint8_t window_cnt_total;
  17:Core/Src/mgr_hearbeat.c **** 
  18:Core/Src/mgr_hearbeat.c **** static uint8_t tick_per_window_cnt;
  19:Core/Src/mgr_hearbeat.c **** 
  20:Core/Src/mgr_hearbeat.c **** static uint8_t window_cnt;
  21:Core/Src/mgr_hearbeat.c **** 
  22:Core/Src/mgr_hearbeat.c **** static uint8_t fade_vals[WINDOW_COUNT_FADE];
  23:Core/Src/mgr_hearbeat.c **** 
  24:Core/Src/mgr_hearbeat.c **** static uint32_t ticks_per_window;
  25:Core/Src/mgr_hearbeat.c **** 
  26:Core/Src/mgr_hearbeat.c **** static uint16_t heartbeat_period_ms;
  27:Core/Src/mgr_hearbeat.c **** 
  28:Core/Src/mgr_hearbeat.c **** static uint32_t pattern_snapshot;
  29:Core/Src/mgr_hearbeat.c **** 
  30:Core/Src/mgr_hearbeat.c **** static stmgpio_t gpio_led;
  31:Core/Src/mgr_hearbeat.c **** 
  32:Core/Src/mgr_hearbeat.c **** static hb_mode_t hb_pattern;
ARM GAS  /tmp/ccv2O6GG.s 			page 2


  33:Core/Src/mgr_hearbeat.c **** 
  34:Core/Src/mgr_hearbeat.c **** volatile static uint8_t callback_cnt;
  35:Core/Src/mgr_hearbeat.c **** 
  36:Core/Src/mgr_hearbeat.c **** volatile static bool heartbeat_is_active;
  37:Core/Src/mgr_hearbeat.c **** 
  38:Core/Src/mgr_hearbeat.c **** volatile static bool poll_mode;
  39:Core/Src/mgr_hearbeat.c **** 
  40:Core/Src/mgr_hearbeat.c **** int heartbeat_init(void)
  41:Core/Src/mgr_hearbeat.c **** {
  42:Core/Src/mgr_hearbeat.c ****     /* Setup led pin */
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
  47:Core/Src/mgr_hearbeat.c ****     ASSERT_INT(stmgpio_setup(&gpio_led));
  48:Core/Src/mgr_hearbeat.c **** 
  49:Core/Src/mgr_hearbeat.c ****     /* Set DEFAULTS */
  50:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(1000);
  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
  53:Core/Src/mgr_hearbeat.c **** 
  54:Core/Src/mgr_hearbeat.c ****     /* Setup callback for system tick */
  55:Core/Src/mgr_hearbeat.c ****     hw_systick_add_callback(heartbeat_tick_callback);
  56:Core/Src/mgr_hearbeat.c **** 
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
  58:Core/Src/mgr_hearbeat.c **** }
  59:Core/Src/mgr_hearbeat.c **** 
  60:Core/Src/mgr_hearbeat.c **** void heartbeat_reset(void)
  61:Core/Src/mgr_hearbeat.c **** {
  27              		.loc 1 61 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  62:Core/Src/mgr_hearbeat.c ****     /* Reset counters */
  63:Core/Src/mgr_hearbeat.c ****     window_cnt = 0;
  32              		.loc 1 63 5 view .LVU1
  33              		.loc 1 63 16 is_stmt 0 view .LVU2
  34 0000 0023     		movs	r3, #0
  35 0002 034A     		ldr	r2, .L2
  36 0004 1370     		strb	r3, [r2]
  64:Core/Src/mgr_hearbeat.c ****     tick_per_window_cnt = 0;
  37              		.loc 1 64 5 is_stmt 1 view .LVU3
  38              		.loc 1 64 25 is_stmt 0 view .LVU4
  39 0006 034A     		ldr	r2, .L2+4
  40 0008 1370     		strb	r3, [r2]
  65:Core/Src/mgr_hearbeat.c ****     callback_cnt = 0;
  41              		.loc 1 65 5 is_stmt 1 view .LVU5
  42              		.loc 1 65 18 is_stmt 0 view .LVU6
  43 000a 034A     		ldr	r2, .L2+8
  44 000c 1370     		strb	r3, [r2]
  66:Core/Src/mgr_hearbeat.c **** }
  45              		.loc 1 66 1 view .LVU7
  46 000e 7047     		bx	lr
  47              	.L3:
  48              		.align	2
  49              	.L2:
ARM GAS  /tmp/ccv2O6GG.s 			page 3


  50 0010 00000000 		.word	.LANCHOR0
  51 0014 00000000 		.word	.LANCHOR1
  52 0018 00000000 		.word	.LANCHOR2
  53              		.cfi_endproc
  54              	.LFE66:
  56              		.section	.text.heartbeat_stop,"ax",%progbits
  57              		.align	1
  58              		.global	heartbeat_stop
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  63              	heartbeat_stop:
  64              	.LFB67:
  67:Core/Src/mgr_hearbeat.c **** 
  68:Core/Src/mgr_hearbeat.c **** void heartbeat_stop(void)
  69:Core/Src/mgr_hearbeat.c **** {
  65              		.loc 1 69 1 is_stmt 1 view -0
  66              		.cfi_startproc
  67              		@ args = 0, pretend = 0, frame = 0
  68              		@ frame_needed = 0, uses_anonymous_args = 0
  69              		@ link register save eliminated.
  70:Core/Src/mgr_hearbeat.c ****     heartbeat_is_active = false;
  70              		.loc 1 70 5 view .LVU9
  71              		.loc 1 70 25 is_stmt 0 view .LVU10
  72 0000 014B     		ldr	r3, .L5
  73 0002 0022     		movs	r2, #0
  74 0004 1A70     		strb	r2, [r3]
  71:Core/Src/mgr_hearbeat.c **** }
  75              		.loc 1 71 1 view .LVU11
  76 0006 7047     		bx	lr
  77              	.L6:
  78              		.align	2
  79              	.L5:
  80 0008 00000000 		.word	.LANCHOR3
  81              		.cfi_endproc
  82              	.LFE67:
  84              		.section	.text.heartbeat_start,"ax",%progbits
  85              		.align	1
  86              		.global	heartbeat_start
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  91              	heartbeat_start:
  92              	.LFB68:
  72:Core/Src/mgr_hearbeat.c **** 
  73:Core/Src/mgr_hearbeat.c **** void heartbeat_start(void)
  74:Core/Src/mgr_hearbeat.c **** {
  93              		.loc 1 74 1 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97              		@ link register save eliminated.
  75:Core/Src/mgr_hearbeat.c ****     heartbeat_is_active = true;
  98              		.loc 1 75 5 view .LVU13
  99              		.loc 1 75 25 is_stmt 0 view .LVU14
 100 0000 014B     		ldr	r3, .L8
 101 0002 0122     		movs	r2, #1
ARM GAS  /tmp/ccv2O6GG.s 			page 4


 102 0004 1A70     		strb	r2, [r3]
  76:Core/Src/mgr_hearbeat.c **** }
 103              		.loc 1 76 1 view .LVU15
 104 0006 7047     		bx	lr
 105              	.L9:
 106              		.align	2
 107              	.L8:
 108 0008 00000000 		.word	.LANCHOR3
 109              		.cfi_endproc
 110              	.LFE68:
 112              		.section	.text.heartbeat_set_poll_mode,"ax",%progbits
 113              		.align	1
 114              		.global	heartbeat_set_poll_mode
 115              		.syntax unified
 116              		.thumb
 117              		.thumb_func
 119              	heartbeat_set_poll_mode:
 120              	.LVL0:
 121              	.LFB70:
  77:Core/Src/mgr_hearbeat.c **** 
  78:Core/Src/mgr_hearbeat.c **** void heartbeat_set_pattern_mode(hb_mode_t mode)
  79:Core/Src/mgr_hearbeat.c **** {
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
  82:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
  83:Core/Src/mgr_hearbeat.c **** }
  84:Core/Src/mgr_hearbeat.c **** 
  85:Core/Src/mgr_hearbeat.c **** void heartbeat_set_poll_mode(bool mode)
  86:Core/Src/mgr_hearbeat.c **** {
 122              		.loc 1 86 1 is_stmt 1 view -0
 123              		.cfi_startproc
 124              		@ args = 0, pretend = 0, frame = 0
 125              		@ frame_needed = 0, uses_anonymous_args = 0
 126              		@ link register save eliminated.
  87:Core/Src/mgr_hearbeat.c ****     poll_mode = mode;
 127              		.loc 1 87 5 view .LVU17
 128              		.loc 1 87 15 is_stmt 0 view .LVU18
 129 0000 014B     		ldr	r3, .L11
 130 0002 1870     		strb	r0, [r3]
  88:Core/Src/mgr_hearbeat.c **** }
 131              		.loc 1 88 1 view .LVU19
 132 0004 7047     		bx	lr
 133              	.L12:
 134 0006 00BF     		.align	2
 135              	.L11:
 136 0008 00000000 		.word	.LANCHOR4
 137              		.cfi_endproc
 138              	.LFE70:
 140              		.section	.text.heartbeat_get_poll_mode,"ax",%progbits
 141              		.align	1
 142              		.global	heartbeat_get_poll_mode
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	heartbeat_get_poll_mode:
 148              	.LFB71:
  89:Core/Src/mgr_hearbeat.c **** 
ARM GAS  /tmp/ccv2O6GG.s 			page 5


  90:Core/Src/mgr_hearbeat.c **** bool heartbeat_get_poll_mode(void)
  91:Core/Src/mgr_hearbeat.c **** {
 149              		.loc 1 91 1 is_stmt 1 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
 153              		@ link register save eliminated.
  92:Core/Src/mgr_hearbeat.c ****     return poll_mode;
 154              		.loc 1 92 5 view .LVU21
 155              		.loc 1 92 12 is_stmt 0 view .LVU22
 156 0000 014B     		ldr	r3, .L14
 157 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
  93:Core/Src/mgr_hearbeat.c **** }
 158              		.loc 1 93 1 view .LVU23
 159 0004 7047     		bx	lr
 160              	.L15:
 161 0006 00BF     		.align	2
 162              	.L14:
 163 0008 00000000 		.word	.LANCHOR4
 164              		.cfi_endproc
 165              	.LFE71:
 167              		.section	.text.heartbeat_lower_multiple,"ax",%progbits
 168              		.align	1
 169              		.global	heartbeat_lower_multiple
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	heartbeat_lower_multiple:
 175              	.LVL1:
 176              	.LFB72:
  94:Core/Src/mgr_hearbeat.c **** 
  95:Core/Src/mgr_hearbeat.c **** uint32_t heartbeat_lower_multiple(uint32_t number, uint32_t multiple)
  96:Core/Src/mgr_hearbeat.c **** {
 177              		.loc 1 96 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
  97:Core/Src/mgr_hearbeat.c ****     uint32_t remainder;
 182              		.loc 1 97 5 view .LVU25
  98:Core/Src/mgr_hearbeat.c **** 
  99:Core/Src/mgr_hearbeat.c ****     remainder = number % multiple;
 183              		.loc 1 99 5 view .LVU26
 184              		.loc 1 99 15 is_stmt 0 view .LVU27
 185 0000 B0FBF1F3 		udiv	r3, r0, r1
 186 0004 01FB1301 		mls	r1, r1, r3, r0
 187              	.LVL2:
 100:Core/Src/mgr_hearbeat.c **** 
 101:Core/Src/mgr_hearbeat.c ****     number -= remainder;
 188              		.loc 1 101 5 is_stmt 1 view .LVU28
 102:Core/Src/mgr_hearbeat.c **** 
 103:Core/Src/mgr_hearbeat.c ****     return number;
 189              		.loc 1 103 5 view .LVU29
 104:Core/Src/mgr_hearbeat.c **** }
 190              		.loc 1 104 1 is_stmt 0 view .LVU30
 191 0008 401A     		subs	r0, r0, r1
 192              	.LVL3:
ARM GAS  /tmp/ccv2O6GG.s 			page 6


 193              		.loc 1 104 1 view .LVU31
 194 000a 7047     		bx	lr
 195              		.cfi_endproc
 196              	.LFE72:
 198              		.section	.text.heartbeat_poll,"ax",%progbits
 199              		.align	1
 200              		.global	heartbeat_poll
 201              		.syntax unified
 202              		.thumb
 203              		.thumb_func
 205              	heartbeat_poll:
 206              	.LFB73:
 105:Core/Src/mgr_hearbeat.c **** 
 106:Core/Src/mgr_hearbeat.c **** void heartbeat_poll(void)
 107:Core/Src/mgr_hearbeat.c **** {
 207              		.loc 1 107 1 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 108:Core/Src/mgr_hearbeat.c ****     /* Iterate for every time callback was called. Gotta catch up. */
 109:Core/Src/mgr_hearbeat.c ****     while (callback_cnt > 0)
 211              		.loc 1 109 5 view .LVU33
 212              		.loc 1 109 11 view .LVU34
 213              		.loc 1 109 25 is_stmt 0 view .LVU35
 214 0000 314B     		ldr	r3, .L30
 215 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 216              		.loc 1 109 11 view .LVU36
 217 0004 002B     		cmp	r3, #0
 218 0006 5ED0     		beq	.L27
 107:Core/Src/mgr_hearbeat.c ****     /* Iterate for every time callback was called. Gotta catch up. */
 219              		.loc 1 107 1 view .LVU37
 220 0008 10B5     		push	{r4, lr}
 221              		.cfi_def_cfa_offset 8
 222              		.cfi_offset 4, -8
 223              		.cfi_offset 14, -4
 224 000a 11E0     		b	.L23
 225              	.L20:
 110:Core/Src/mgr_hearbeat.c ****     {
 111:Core/Src/mgr_hearbeat.c ****         callback_cnt--;
 112:Core/Src/mgr_hearbeat.c **** 
 113:Core/Src/mgr_hearbeat.c ****         if (LED_BREATHE == hb_pattern)
 114:Core/Src/mgr_hearbeat.c ****         {
 115:Core/Src/mgr_hearbeat.c ****             /* Set high for particular number of ticks per window */
 116:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt < fade_vals[window_cnt])
 117:Core/Src/mgr_hearbeat.c ****             {
 118:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, PIN_HIGH);
 119:Core/Src/mgr_hearbeat.c ****             }
 120:Core/Src/mgr_hearbeat.c ****             else
 121:Core/Src/mgr_hearbeat.c ****             {
 122:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, PIN_LOW);
 226              		.loc 1 122 17 is_stmt 1 view .LVU38
 227 000c 0121     		movs	r1, #1
 228 000e 2F48     		ldr	r0, .L30+4
 229 0010 FFF7FEFF 		bl	stmgpio_write
 230              	.LVL4:
 231 0014 21E0     		b	.L21
 232              	.L19:
ARM GAS  /tmp/ccv2O6GG.s 			page 7


 123:Core/Src/mgr_hearbeat.c ****             }
 124:Core/Src/mgr_hearbeat.c **** 
 125:Core/Src/mgr_hearbeat.c ****             /* Increment tick counter */
 126:Core/Src/mgr_hearbeat.c ****             tick_per_window_cnt++;
 127:Core/Src/mgr_hearbeat.c **** 
 128:Core/Src/mgr_hearbeat.c ****             /* If counter ticked up enough to move to next window */
 129:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt >= ticks_per_window)
 130:Core/Src/mgr_hearbeat.c ****             {
 131:Core/Src/mgr_hearbeat.c ****                 /* Increment window counter, reset tick count */
 132:Core/Src/mgr_hearbeat.c ****                 window_cnt++;
 133:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 134:Core/Src/mgr_hearbeat.c **** 
 135:Core/Src/mgr_hearbeat.c ****                 /* If we've run out of windows, reset completely */
 136:Core/Src/mgr_hearbeat.c ****                 if (window_cnt_total <= window_cnt)
 137:Core/Src/mgr_hearbeat.c ****                 {
 138:Core/Src/mgr_hearbeat.c ****                     window_cnt = 0;
 139:Core/Src/mgr_hearbeat.c ****                 }
 140:Core/Src/mgr_hearbeat.c ****             }
 141:Core/Src/mgr_hearbeat.c ****         }
 142:Core/Src/mgr_hearbeat.c ****         else /* All other modes */
 143:Core/Src/mgr_hearbeat.c ****         {
 144:Core/Src/mgr_hearbeat.c ****             /* Increment tick counter */
 145:Core/Src/mgr_hearbeat.c ****             tick_per_window_cnt++;
 233              		.loc 1 145 13 view .LVU39
 234              		.loc 1 145 32 is_stmt 0 view .LVU40
 235 0016 2E4A     		ldr	r2, .L30+8
 236 0018 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 237 001a 0133     		adds	r3, r3, #1
 238 001c DBB2     		uxtb	r3, r3
 239 001e 1370     		strb	r3, [r2]
 146:Core/Src/mgr_hearbeat.c **** 
 147:Core/Src/mgr_hearbeat.c ****             /* If counter ticked up enough to move to next window (bit of snapshot) */
 148:Core/Src/mgr_hearbeat.c ****             if (tick_per_window_cnt >= ticks_per_window)
 240              		.loc 1 148 13 is_stmt 1 view .LVU41
 241              		.loc 1 148 37 is_stmt 0 view .LVU42
 242 0020 2C4A     		ldr	r2, .L30+12
 243 0022 1268     		ldr	r2, [r2]
 244              		.loc 1 148 16 view .LVU43
 245 0024 9342     		cmp	r3, r2
 246 0026 30D2     		bcs	.L28
 247              	.L18:
 109:Core/Src/mgr_hearbeat.c ****     {
 248              		.loc 1 109 11 is_stmt 1 view .LVU44
 109:Core/Src/mgr_hearbeat.c ****     {
 249              		.loc 1 109 25 is_stmt 0 view .LVU45
 250 0028 274B     		ldr	r3, .L30
 251 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 109:Core/Src/mgr_hearbeat.c ****     {
 252              		.loc 1 109 11 view .LVU46
 253 002c 002B     		cmp	r3, #0
 254 002e 49D0     		beq	.L29
 255              	.L23:
 111:Core/Src/mgr_hearbeat.c **** 
 256              		.loc 1 111 9 is_stmt 1 view .LVU47
 111:Core/Src/mgr_hearbeat.c **** 
 257              		.loc 1 111 21 is_stmt 0 view .LVU48
 258 0030 254A     		ldr	r2, .L30
ARM GAS  /tmp/ccv2O6GG.s 			page 8


 259 0032 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 260 0034 013B     		subs	r3, r3, #1
 261 0036 DBB2     		uxtb	r3, r3
 262 0038 1370     		strb	r3, [r2]
 113:Core/Src/mgr_hearbeat.c ****         {
 263              		.loc 1 113 9 is_stmt 1 view .LVU49
 113:Core/Src/mgr_hearbeat.c ****         {
 264              		.loc 1 113 25 is_stmt 0 view .LVU50
 265 003a 274B     		ldr	r3, .L30+16
 266 003c 1B68     		ldr	r3, [r3]
 113:Core/Src/mgr_hearbeat.c ****         {
 267              		.loc 1 113 12 view .LVU51
 268 003e 002B     		cmp	r3, #0
 269 0040 E9D1     		bne	.L19
 116:Core/Src/mgr_hearbeat.c ****             {
 270              		.loc 1 116 13 is_stmt 1 view .LVU52
 116:Core/Src/mgr_hearbeat.c ****             {
 271              		.loc 1 116 48 is_stmt 0 view .LVU53
 272 0042 264B     		ldr	r3, .L30+20
 273 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 274 0046 264A     		ldr	r2, .L30+24
 275 0048 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 116:Core/Src/mgr_hearbeat.c ****             {
 276              		.loc 1 116 37 view .LVU54
 277 004a 214B     		ldr	r3, .L30+8
 278 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 116:Core/Src/mgr_hearbeat.c ****             {
 279              		.loc 1 116 16 view .LVU55
 280 004e 9A42     		cmp	r2, r3
 281 0050 DCD9     		bls	.L20
 118:Core/Src/mgr_hearbeat.c ****             }
 282              		.loc 1 118 17 is_stmt 1 view .LVU56
 283 0052 0021     		movs	r1, #0
 284 0054 1D48     		ldr	r0, .L30+4
 285 0056 FFF7FEFF 		bl	stmgpio_write
 286              	.LVL5:
 287              	.L21:
 126:Core/Src/mgr_hearbeat.c **** 
 288              		.loc 1 126 13 view .LVU57
 126:Core/Src/mgr_hearbeat.c **** 
 289              		.loc 1 126 32 is_stmt 0 view .LVU58
 290 005a 1D4A     		ldr	r2, .L30+8
 291 005c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 292 005e 0133     		adds	r3, r3, #1
 293 0060 DBB2     		uxtb	r3, r3
 294 0062 1370     		strb	r3, [r2]
 129:Core/Src/mgr_hearbeat.c ****             {
 295              		.loc 1 129 13 is_stmt 1 view .LVU59
 129:Core/Src/mgr_hearbeat.c ****             {
 296              		.loc 1 129 37 is_stmt 0 view .LVU60
 297 0064 1B4A     		ldr	r2, .L30+12
 298 0066 1268     		ldr	r2, [r2]
 129:Core/Src/mgr_hearbeat.c ****             {
 299              		.loc 1 129 16 view .LVU61
 300 0068 9342     		cmp	r3, r2
 301 006a DDD3     		bcc	.L18
 132:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
ARM GAS  /tmp/ccv2O6GG.s 			page 9


 302              		.loc 1 132 17 is_stmt 1 view .LVU62
 132:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 303              		.loc 1 132 27 is_stmt 0 view .LVU63
 304 006c 1B4A     		ldr	r2, .L30+20
 305 006e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 306 0070 0133     		adds	r3, r3, #1
 307 0072 DBB2     		uxtb	r3, r3
 308 0074 1370     		strb	r3, [r2]
 133:Core/Src/mgr_hearbeat.c **** 
 309              		.loc 1 133 17 is_stmt 1 view .LVU64
 133:Core/Src/mgr_hearbeat.c **** 
 310              		.loc 1 133 37 is_stmt 0 view .LVU65
 311 0076 164A     		ldr	r2, .L30+8
 312 0078 0021     		movs	r1, #0
 313 007a 1170     		strb	r1, [r2]
 136:Core/Src/mgr_hearbeat.c ****                 {
 314              		.loc 1 136 17 is_stmt 1 view .LVU66
 136:Core/Src/mgr_hearbeat.c ****                 {
 315              		.loc 1 136 38 is_stmt 0 view .LVU67
 316 007c 194A     		ldr	r2, .L30+28
 317 007e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 136:Core/Src/mgr_hearbeat.c ****                 {
 318              		.loc 1 136 20 view .LVU68
 319 0080 9342     		cmp	r3, r2
 320 0082 D1D3     		bcc	.L18
 138:Core/Src/mgr_hearbeat.c ****                 }
 321              		.loc 1 138 21 is_stmt 1 view .LVU69
 138:Core/Src/mgr_hearbeat.c ****                 }
 322              		.loc 1 138 32 is_stmt 0 view .LVU70
 323 0084 154B     		ldr	r3, .L30+20
 324 0086 1970     		strb	r1, [r3]
 325 0088 CEE7     		b	.L18
 326              	.L28:
 149:Core/Src/mgr_hearbeat.c ****             {
 150:Core/Src/mgr_hearbeat.c ****                 /* reset window tick counter */
 151:Core/Src/mgr_hearbeat.c ****                 tick_per_window_cnt = 0;
 327              		.loc 1 151 17 is_stmt 1 view .LVU71
 328              		.loc 1 151 37 is_stmt 0 view .LVU72
 329 008a 114B     		ldr	r3, .L30+8
 330 008c 0022     		movs	r2, #0
 331 008e 1A70     		strb	r2, [r3]
 152:Core/Src/mgr_hearbeat.c **** 
 153:Core/Src/mgr_hearbeat.c ****                 /* write LED with value of LSB of snapshot */
 154:Core/Src/mgr_hearbeat.c ****                 stmgpio_write(&gpio_led, (stmgpio_state_t)(pattern_snapshot & 0x01));
 332              		.loc 1 154 17 is_stmt 1 view .LVU73
 333 0090 154C     		ldr	r4, .L30+32
 334 0092 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 335 0094 01F00101 		and	r1, r1, #1
 336 0098 0C48     		ldr	r0, .L30+4
 337 009a FFF7FEFF 		bl	stmgpio_write
 338              	.LVL6:
 155:Core/Src/mgr_hearbeat.c **** 
 156:Core/Src/mgr_hearbeat.c ****                 /* go to next bit of snapshot */
 157:Core/Src/mgr_hearbeat.c ****                 pattern_snapshot >>= 1;
 339              		.loc 1 157 17 view .LVU74
 340              		.loc 1 157 34 is_stmt 0 view .LVU75
 341 009e 2368     		ldr	r3, [r4]
ARM GAS  /tmp/ccv2O6GG.s 			page 10


 342 00a0 5B08     		lsrs	r3, r3, #1
 343 00a2 2360     		str	r3, [r4]
 158:Core/Src/mgr_hearbeat.c ****                 window_cnt++;
 344              		.loc 1 158 17 is_stmt 1 view .LVU76
 345              		.loc 1 158 27 is_stmt 0 view .LVU77
 346 00a4 0D4A     		ldr	r2, .L30+20
 347 00a6 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 348 00a8 0133     		adds	r3, r3, #1
 349 00aa DBB2     		uxtb	r3, r3
 350 00ac 1370     		strb	r3, [r2]
 159:Core/Src/mgr_hearbeat.c **** 
 160:Core/Src/mgr_hearbeat.c ****                 /* If we've run out of bits in the snapshot, reset snapshot and snapshot counter */
 161:Core/Src/mgr_hearbeat.c ****                 if (window_cnt_total <= window_cnt)
 351              		.loc 1 161 17 is_stmt 1 view .LVU78
 352              		.loc 1 161 38 is_stmt 0 view .LVU79
 353 00ae 0D4A     		ldr	r2, .L30+28
 354 00b0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 355              		.loc 1 161 20 view .LVU80
 356 00b2 9342     		cmp	r3, r2
 357 00b4 B8D3     		bcc	.L18
 162:Core/Src/mgr_hearbeat.c ****                 {
 163:Core/Src/mgr_hearbeat.c ****                     window_cnt = 0;
 358              		.loc 1 163 21 is_stmt 1 view .LVU81
 359              		.loc 1 163 32 is_stmt 0 view .LVU82
 360 00b6 094B     		ldr	r3, .L30+20
 361 00b8 0022     		movs	r2, #0
 362 00ba 1A70     		strb	r2, [r3]
 164:Core/Src/mgr_hearbeat.c ****                     pattern_snapshot = (uint32_t)hb_pattern;
 363              		.loc 1 164 21 is_stmt 1 view .LVU83
 364              		.loc 1 164 38 is_stmt 0 view .LVU84
 365 00bc 064B     		ldr	r3, .L30+16
 366 00be 1A68     		ldr	r2, [r3]
 367 00c0 2260     		str	r2, [r4]
 368 00c2 B1E7     		b	.L18
 369              	.L29:
 165:Core/Src/mgr_hearbeat.c ****                 }
 166:Core/Src/mgr_hearbeat.c ****             }
 167:Core/Src/mgr_hearbeat.c ****         }
 168:Core/Src/mgr_hearbeat.c ****     }
 169:Core/Src/mgr_hearbeat.c **** }
 370              		.loc 1 169 1 view .LVU85
 371 00c4 10BD     		pop	{r4, pc}
 372              	.L27:
 373              		.cfi_def_cfa_offset 0
 374              		.cfi_restore 4
 375              		.cfi_restore 14
 376 00c6 7047     		bx	lr
 377              	.L31:
 378              		.align	2
 379              	.L30:
 380 00c8 00000000 		.word	.LANCHOR2
 381 00cc 00000000 		.word	.LANCHOR7
 382 00d0 00000000 		.word	.LANCHOR1
 383 00d4 00000000 		.word	.LANCHOR8
 384 00d8 00000000 		.word	.LANCHOR5
 385 00dc 00000000 		.word	.LANCHOR0
 386 00e0 00000000 		.word	.LANCHOR6
ARM GAS  /tmp/ccv2O6GG.s 			page 11


 387 00e4 00000000 		.word	.LANCHOR9
 388 00e8 00000000 		.word	.LANCHOR10
 389              		.cfi_endproc
 390              	.LFE73:
 392              		.section	.text.heartbeat_tick_callback,"ax",%progbits
 393              		.align	1
 394              		.global	heartbeat_tick_callback
 395              		.syntax unified
 396              		.thumb
 397              		.thumb_func
 399              	heartbeat_tick_callback:
 400              	.LFB75:
 170:Core/Src/mgr_hearbeat.c **** 
 171:Core/Src/mgr_hearbeat.c **** void heartbeat_set_period_ms(uint16_t period_ms)
 172:Core/Src/mgr_hearbeat.c **** {
 173:Core/Src/mgr_hearbeat.c ****     uint16_t idx;
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 175:Core/Src/mgr_hearbeat.c **** 
 176:Core/Src/mgr_hearbeat.c ****     /* Set boundaries */
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 178:Core/Src/mgr_hearbeat.c ****     {
 179:Core/Src/mgr_hearbeat.c ****         period_ms = 3000;
 180:Core/Src/mgr_hearbeat.c ****     }
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
 182:Core/Src/mgr_hearbeat.c ****     {
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 184:Core/Src/mgr_hearbeat.c ****     }
 185:Core/Src/mgr_hearbeat.c **** 
 186:Core/Src/mgr_hearbeat.c ****     /* Different window counts requierd for different modes */
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 188:Core/Src/mgr_hearbeat.c ****     {
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 190:Core/Src/mgr_hearbeat.c ****     }
 191:Core/Src/mgr_hearbeat.c ****     else
 192:Core/Src/mgr_hearbeat.c ****     {
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
 194:Core/Src/mgr_hearbeat.c ****     }
 195:Core/Src/mgr_hearbeat.c **** 
 196:Core/Src/mgr_hearbeat.c ****     /* find heartbeat as lower multiple to keep division easy */
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 198:Core/Src/mgr_hearbeat.c **** 
 199:Core/Src/mgr_hearbeat.c ****     /* calculate ticks per window based on chosen heartbeat period and the set systick frequency */
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 201:Core/Src/mgr_hearbeat.c **** 
 202:Core/Src/mgr_hearbeat.c ****     /* calculate fade triangle */
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 204:Core/Src/mgr_hearbeat.c ****     {
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 207:Core/Src/mgr_hearbeat.c ****     }
 208:Core/Src/mgr_hearbeat.c **** 
 209:Core/Src/mgr_hearbeat.c ****     /* Reset to avoid surprises */
 210:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 211:Core/Src/mgr_hearbeat.c **** }
 212:Core/Src/mgr_hearbeat.c **** 
 213:Core/Src/mgr_hearbeat.c **** void heartbeat_tick_callback(void)
 214:Core/Src/mgr_hearbeat.c **** {
ARM GAS  /tmp/ccv2O6GG.s 			page 12


 401              		.loc 1 214 1 is_stmt 1 view -0
 402              		.cfi_startproc
 403              		@ args = 0, pretend = 0, frame = 0
 404              		@ frame_needed = 0, uses_anonymous_args = 0
 405 0000 08B5     		push	{r3, lr}
 406              		.cfi_def_cfa_offset 8
 407              		.cfi_offset 3, -8
 408              		.cfi_offset 14, -4
 215:Core/Src/mgr_hearbeat.c ****     /* only take action if told to */
 216:Core/Src/mgr_hearbeat.c ****     if (heartbeat_is_active)
 409              		.loc 1 216 5 view .LVU87
 410              		.loc 1 216 9 is_stmt 0 view .LVU88
 411 0002 074B     		ldr	r3, .L37
 412 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 413              		.loc 1 216 8 view .LVU89
 414 0006 23B1     		cbz	r3, .L33
 217:Core/Src/mgr_hearbeat.c ****     {
 218:Core/Src/mgr_hearbeat.c ****         callback_cnt++;
 415              		.loc 1 218 9 is_stmt 1 view .LVU90
 416              		.loc 1 218 21 is_stmt 0 view .LVU91
 417 0008 064A     		ldr	r2, .L37+4
 418 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 419 000c 0133     		adds	r3, r3, #1
 420 000e DBB2     		uxtb	r3, r3
 421 0010 1370     		strb	r3, [r2]
 422              	.L33:
 219:Core/Src/mgr_hearbeat.c ****     }
 220:Core/Src/mgr_hearbeat.c ****     /* if not manualy polled, do all the stuff in the callback (intensive) */
 221:Core/Src/mgr_hearbeat.c ****     if (!poll_mode) {
 423              		.loc 1 221 5 is_stmt 1 view .LVU92
 424              		.loc 1 221 9 is_stmt 0 view .LVU93
 425 0012 054B     		ldr	r3, .L37+8
 426 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 427              		.loc 1 221 8 view .LVU94
 428 0016 03B1     		cbz	r3, .L36
 429              	.L32:
 222:Core/Src/mgr_hearbeat.c ****         heartbeat_poll();
 223:Core/Src/mgr_hearbeat.c ****     }
 224:Core/Src/mgr_hearbeat.c **** }...
 430              		.loc 1 224 1 view .LVU95
 431 0018 08BD     		pop	{r3, pc}
 432              	.L36:
 222:Core/Src/mgr_hearbeat.c ****         heartbeat_poll();
 433              		.loc 1 222 9 is_stmt 1 view .LVU96
 434 001a FFF7FEFF 		bl	heartbeat_poll
 435              	.LVL7:
 436              		.loc 1 224 1 is_stmt 0 view .LVU97
 437 001e FBE7     		b	.L32
 438              	.L38:
 439              		.align	2
 440              	.L37:
 441 0020 00000000 		.word	.LANCHOR3
 442 0024 00000000 		.word	.LANCHOR2
 443 0028 00000000 		.word	.LANCHOR4
 444              		.cfi_endproc
 445              	.LFE75:
 447              		.global	__aeabi_ui2f
ARM GAS  /tmp/ccv2O6GG.s 			page 13


 448              		.global	__aeabi_fdiv
 449              		.global	__aeabi_fmul
 450              		.global	__aeabi_f2d
 451              		.global	__aeabi_ddiv
 452              		.global	__aeabi_d2uiz
 453              		.global	__aeabi_dadd
 454              		.global	__aeabi_dmul
 455              		.section	.text.heartbeat_set_period_ms,"ax",%progbits
 456              		.align	1
 457              		.global	heartbeat_set_period_ms
 458              		.syntax unified
 459              		.thumb
 460              		.thumb_func
 462              	heartbeat_set_period_ms:
 463              	.LVL8:
 464              	.LFB74:
 172:Core/Src/mgr_hearbeat.c **** {
 465              		.loc 1 172 1 is_stmt 1 view -0
 466              		.cfi_startproc
 467              		@ args = 0, pretend = 0, frame = 0
 468              		@ frame_needed = 0, uses_anonymous_args = 0
 172:Core/Src/mgr_hearbeat.c **** {
 469              		.loc 1 172 1 is_stmt 0 view .LVU99
 470 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 471              		.cfi_def_cfa_offset 32
 472              		.cfi_offset 3, -32
 473              		.cfi_offset 4, -28
 474              		.cfi_offset 5, -24
 475              		.cfi_offset 6, -20
 476              		.cfi_offset 7, -16
 477              		.cfi_offset 8, -12
 478              		.cfi_offset 9, -8
 479              		.cfi_offset 14, -4
 480 0004 0446     		mov	r4, r0
 173:Core/Src/mgr_hearbeat.c ****     uint16_t idx;
 481              		.loc 1 173 5 is_stmt 1 view .LVU100
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 482              		.loc 1 174 5 view .LVU101
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 483              		.loc 1 174 32 is_stmt 0 view .LVU102
 484 0006 FFF7FEFF 		bl	hw_systick_get_freq
 485              	.LVL9:
 174:Core/Src/mgr_hearbeat.c ****     uint16_t systick_freq_hz = hw_systick_get_freq();
 486              		.loc 1 174 32 view .LVU103
 487 000a 0646     		mov	r6, r0
 488              	.LVL10:
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 489              		.loc 1 177 5 is_stmt 1 view .LVU104
 177:Core/Src/mgr_hearbeat.c ****     if (3000 <= period_ms)
 490              		.loc 1 177 8 is_stmt 0 view .LVU105
 491 000c 40F6B733 		movw	r3, #2999
 492 0010 9C42     		cmp	r4, r3
 493 0012 05D8     		bhi	.L45
 494              	.LVL11:
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
 495              		.loc 1 181 5 is_stmt 1 view .LVU106
 181:Core/Src/mgr_hearbeat.c ****     if (500 >= period_ms)
ARM GAS  /tmp/ccv2O6GG.s 			page 14


 496              		.loc 1 181 8 is_stmt 0 view .LVU107
 497 0014 B4F5FA7F 		cmp	r4, #500
 498 0018 04D8     		bhi	.L40
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 499              		.loc 1 183 19 view .LVU108
 500 001a 4FF4FA74 		mov	r4, #500
 501              	.LVL12:
 183:Core/Src/mgr_hearbeat.c ****         period_ms = 500;
 502              		.loc 1 183 19 view .LVU109
 503 001e 01E0     		b	.L40
 504              	.LVL13:
 505              	.L45:
 179:Core/Src/mgr_hearbeat.c ****         period_ms = 3000;
 506              		.loc 1 179 19 view .LVU110
 507 0020 40F6B834 		movw	r4, #3000
 508              	.LVL14:
 509              	.L40:
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 510              		.loc 1 187 5 is_stmt 1 view .LVU111
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 511              		.loc 1 187 21 is_stmt 0 view .LVU112
 512 0024 2E4B     		ldr	r3, .L48
 513 0026 1B68     		ldr	r3, [r3]
 187:Core/Src/mgr_hearbeat.c ****     if (LED_BREATHE == hb_pattern)
 514              		.loc 1 187 8 view .LVU113
 515 0028 63BB     		cbnz	r3, .L41
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 516              		.loc 1 189 9 is_stmt 1 view .LVU114
 189:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FADE;
 517              		.loc 1 189 26 is_stmt 0 view .LVU115
 518 002a 2E4B     		ldr	r3, .L48+4
 519 002c 6422     		movs	r2, #100
 520 002e 1A70     		strb	r2, [r3]
 521              	.L42:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 522              		.loc 1 197 5 is_stmt 1 view .LVU116
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 523              		.loc 1 197 27 is_stmt 0 view .LVU117
 524 0030 2C4B     		ldr	r3, .L48+4
 525 0032 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 526 0034 2946     		mov	r1, r5
 527 0036 2046     		mov	r0, r4
 528 0038 FFF7FEFF 		bl	heartbeat_lower_multiple
 529              	.LVL15:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 530              		.loc 1 197 25 view .LVU118
 531 003c 84B2     		uxth	r4, r0
 532              	.LVL16:
 197:Core/Src/mgr_hearbeat.c ****     heartbeat_period_ms = heartbeat_lower_multiple(period_ms, window_cnt_total);
 533              		.loc 1 197 25 view .LVU119
 534 003e 2A4B     		ldr	r3, .L48+8
 535 0040 1C80     		strh	r4, [r3]	@ movhi
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 536              		.loc 1 200 5 is_stmt 1 view .LVU120
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 537              		.loc 1 200 36 is_stmt 0 view .LVU121
 538 0042 3046     		mov	r0, r6
ARM GAS  /tmp/ccv2O6GG.s 			page 15


 539 0044 FFF7FEFF 		bl	__aeabi_ui2f
 540              	.LVL17:
 541 0048 0646     		mov	r6, r0
 542              	.LVL18:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 543              		.loc 1 200 63 view .LVU122
 544 004a 2846     		mov	r0, r5
 545 004c FFF7FEFF 		bl	__aeabi_ui2f
 546              	.LVL19:
 547 0050 8146     		mov	r9, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 548              		.loc 1 200 60 view .LVU123
 549 0052 0146     		mov	r1, r0
 550 0054 3046     		mov	r0, r6
 551 0056 FFF7FEFF 		bl	__aeabi_fdiv
 552              	.LVL20:
 553 005a 0646     		mov	r6, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 554              		.loc 1 200 91 view .LVU124
 555 005c 2046     		mov	r0, r4
 556 005e FFF7FEFF 		bl	__aeabi_ui2f
 557              	.LVL21:
 558 0062 0146     		mov	r1, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 559              		.loc 1 200 88 view .LVU125
 560 0064 3046     		mov	r0, r6
 561 0066 FFF7FEFF 		bl	__aeabi_fmul
 562              	.LVL22:
 563 006a FFF7FEFF 		bl	__aeabi_f2d
 564              	.LVL23:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 565              		.loc 1 200 119 view .LVU126
 566 006e 0022     		movs	r2, #0
 567 0070 1E4B     		ldr	r3, .L48+12
 568 0072 FFF7FEFF 		bl	__aeabi_ddiv
 569              	.LVL24:
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 570              		.loc 1 200 24 view .LVU127
 571 0076 FFF7FEFF 		bl	__aeabi_d2uiz
 572              	.LVL25:
 573 007a 8046     		mov	r8, r0
 200:Core/Src/mgr_hearbeat.c ****     ticks_per_window = (uint32_t)(((float)systick_freq_hz) / ((float)window_cnt_total) * ((float)he
 574              		.loc 1 200 22 view .LVU128
 575 007c 1C4B     		ldr	r3, .L48+16
 576 007e 1860     		str	r0, [r3]
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 577              		.loc 1 203 5 is_stmt 1 view .LVU129
 578              	.LVL26:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 579              		.loc 1 203 14 is_stmt 0 view .LVU130
 580 0080 0024     		movs	r4, #0
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 581              		.loc 1 203 5 view .LVU131
 582 0082 26E0     		b	.L43
 583              	.LVL27:
 584              	.L41:
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
ARM GAS  /tmp/ccv2O6GG.s 			page 16


 585              		.loc 1 193 9 is_stmt 1 view .LVU132
 193:Core/Src/mgr_hearbeat.c ****         window_cnt_total = WINDOW_COUNT_FLASH;
 586              		.loc 1 193 26 is_stmt 0 view .LVU133
 587 0084 174B     		ldr	r3, .L48+4
 588 0086 2022     		movs	r2, #32
 589 0088 1A70     		strb	r2, [r3]
 590 008a D1E7     		b	.L42
 591              	.LVL28:
 592              	.L44:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 593              		.loc 1 205 9 is_stmt 1 discriminator 3 view .LVU134
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 594              		.loc 1 205 44 is_stmt 0 discriminator 3 view .LVU135
 595 008c 2046     		mov	r0, r4
 596 008e FFF7FEFF 		bl	__aeabi_ui2f
 597              	.LVL29:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 598              		.loc 1 205 56 discriminator 3 view .LVU136
 599 0092 4946     		mov	r1, r9
 600 0094 FFF7FEFF 		bl	__aeabi_fdiv
 601              	.LVL30:
 602 0098 FFF7FEFF 		bl	__aeabi_f2d
 603              	.LVL31:
 604 009c 0246     		mov	r2, r0
 605 009e 0B46     		mov	r3, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 606              		.loc 1 205 40 discriminator 3 view .LVU137
 607 00a0 FFF7FEFF 		bl	__aeabi_dadd
 608              	.LVL32:
 609 00a4 0646     		mov	r6, r0
 610 00a6 0F46     		mov	r7, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 611              		.loc 1 205 88 discriminator 3 view .LVU138
 612 00a8 4046     		mov	r0, r8
 613 00aa FFF7FEFF 		bl	__aeabi_ui2f
 614              	.LVL33:
 615 00ae FFF7FEFF 		bl	__aeabi_f2d
 616              	.LVL34:
 617 00b2 0246     		mov	r2, r0
 618 00b4 0B46     		mov	r3, r1
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 619              		.loc 1 205 85 discriminator 3 view .LVU139
 620 00b6 3046     		mov	r0, r6
 621 00b8 3946     		mov	r1, r7
 622 00ba FFF7FEFF 		bl	__aeabi_dmul
 623              	.LVL35:
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 624              		.loc 1 205 26 discriminator 3 view .LVU140
 625 00be FFF7FEFF 		bl	__aeabi_d2uiz
 626              	.LVL36:
 627 00c2 C3B2     		uxtb	r3, r0
 205:Core/Src/mgr_hearbeat.c ****         fade_vals[idx] = (uint8_t)(2.0 * (((float)idx) / ((float)window_cnt_total)) * ((float)ticks
 628              		.loc 1 205 24 discriminator 3 view .LVU141
 629 00c4 0B49     		ldr	r1, .L48+20
 630 00c6 0B55     		strb	r3, [r1, r4]
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 631              		.loc 1 206 9 is_stmt 1 discriminator 3 view .LVU142
ARM GAS  /tmp/ccv2O6GG.s 			page 17


 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 632              		.loc 1 206 36 is_stmt 0 discriminator 3 view .LVU143
 633 00c8 2A1B     		subs	r2, r5, r4
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 634              		.loc 1 206 42 discriminator 3 view .LVU144
 635 00ca 013A     		subs	r2, r2, #1
 206:Core/Src/mgr_hearbeat.c ****         fade_vals[window_cnt_total - idx - 1] = fade_vals[idx];
 636              		.loc 1 206 47 discriminator 3 view .LVU145
 637 00cc 8B54     		strb	r3, [r1, r2]
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 638              		.loc 1 203 49 is_stmt 1 discriminator 3 view .LVU146
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 639              		.loc 1 203 52 is_stmt 0 discriminator 3 view .LVU147
 640 00ce 0134     		adds	r4, r4, #1
 641              	.LVL37:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 642              		.loc 1 203 52 discriminator 3 view .LVU148
 643 00d0 A4B2     		uxth	r4, r4
 644              	.LVL38:
 645              	.L43:
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 646              		.loc 1 203 19 is_stmt 1 discriminator 1 view .LVU149
 203:Core/Src/mgr_hearbeat.c ****     for (idx = 0; idx < (window_cnt_total / 2); idx++)
 647              		.loc 1 203 5 is_stmt 0 discriminator 1 view .LVU150
 648 00d2 B4EB550F 		cmp	r4, r5, lsr #1
 649 00d6 D9D3     		bcc	.L44
 210:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 650              		.loc 1 210 5 is_stmt 1 view .LVU151
 651 00d8 FFF7FEFF 		bl	heartbeat_reset
 652              	.LVL39:
 211:Core/Src/mgr_hearbeat.c **** }
 653              		.loc 1 211 1 is_stmt 0 view .LVU152
 654 00dc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 655              	.LVL40:
 656              	.L49:
 211:Core/Src/mgr_hearbeat.c **** }
 657              		.loc 1 211 1 view .LVU153
 658              		.align	2
 659              	.L48:
 660 00e0 00000000 		.word	.LANCHOR5
 661 00e4 00000000 		.word	.LANCHOR9
 662 00e8 00000000 		.word	.LANCHOR11
 663 00ec 00408F40 		.word	1083129856
 664 00f0 00000000 		.word	.LANCHOR8
 665 00f4 00000000 		.word	.LANCHOR6
 666              		.cfi_endproc
 667              	.LFE74:
 669              		.section	.text.heartbeat_init,"ax",%progbits
 670              		.align	1
 671              		.global	heartbeat_init
 672              		.syntax unified
 673              		.thumb
 674              		.thumb_func
 676              	heartbeat_init:
 677              	.LFB65:
  41:Core/Src/mgr_hearbeat.c **** {
 678              		.loc 1 41 1 is_stmt 1 view -0
ARM GAS  /tmp/ccv2O6GG.s 			page 18


 679              		.cfi_startproc
 680              		@ args = 0, pretend = 0, frame = 0
 681              		@ frame_needed = 0, uses_anonymous_args = 0
 682 0000 10B5     		push	{r4, lr}
 683              		.cfi_def_cfa_offset 8
 684              		.cfi_offset 4, -8
 685              		.cfi_offset 14, -4
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
 686              		.loc 1 43 5 view .LVU155
  43:Core/Src/mgr_hearbeat.c ****     gpio_led.port = HB_LED_PORT;
 687              		.loc 1 43 19 is_stmt 0 view .LVU156
 688 0002 0E48     		ldr	r0, .L55
 689 0004 4323     		movs	r3, #67
 690 0006 0371     		strb	r3, [r0, #4]
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
 691              		.loc 1 44 5 is_stmt 1 view .LVU157
  44:Core/Src/mgr_hearbeat.c ****     gpio_led.pin = HB_LED_PIN;
 692              		.loc 1 44 18 is_stmt 0 view .LVU158
 693 0008 0D23     		movs	r3, #13
 694 000a 4371     		strb	r3, [r0, #5]
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
 695              		.loc 1 45 5 is_stmt 1 view .LVU159
  45:Core/Src/mgr_hearbeat.c ****     gpio_led.cfg = OUT_PUSHPULL;
 696              		.loc 1 45 18 is_stmt 0 view .LVU160
 697 000c 0423     		movs	r3, #4
 698 000e C370     		strb	r3, [r0, #3]
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
 699              		.loc 1 46 5 is_stmt 1 view .LVU161
  46:Core/Src/mgr_hearbeat.c ****     gpio_led.dir = OUTPUT_2MHZ;
 700              		.loc 1 46 18 is_stmt 0 view .LVU162
 701 0010 0223     		movs	r3, #2
 702 0012 4370     		strb	r3, [r0, #1]
  47:Core/Src/mgr_hearbeat.c ****     ASSERT_INT(stmgpio_setup(&gpio_led));
 703              		.loc 1 47 5 is_stmt 1 view .LVU163
 704 0014 FFF7FEFF 		bl	stmgpio_setup
 705              	.LVL41:
 706 0018 10B1     		cbz	r0, .L54
 707 001a 0124     		movs	r4, #1
 708              	.L50:
  58:Core/Src/mgr_hearbeat.c **** }
 709              		.loc 1 58 1 is_stmt 0 view .LVU164
 710 001c 2046     		mov	r0, r4
 711 001e 10BD     		pop	{r4, pc}
 712              	.L54:
 713 0020 0446     		mov	r4, r0
  50:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(1000);
 714              		.loc 1 50 5 is_stmt 1 view .LVU165
 715 0022 4FF47A70 		mov	r0, #1000
 716 0026 FFF7FEFF 		bl	heartbeat_set_period_ms
 717              	.LVL42:
  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
 718              		.loc 1 51 5 view .LVU166
  51:Core/Src/mgr_hearbeat.c ****     hb_pattern = LED_STATIC_OFF;
 719              		.loc 1 51 16 is_stmt 0 view .LVU167
 720 002a 0023     		movs	r3, #0
 721 002c 044A     		ldr	r2, .L55+4
 722 002e 1360     		str	r3, [r2]
ARM GAS  /tmp/ccv2O6GG.s 			page 19


  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
 723              		.loc 1 52 5 is_stmt 1 view .LVU168
  52:Core/Src/mgr_hearbeat.c ****     pattern_snapshot = (uint32_t)hb_pattern;
 724              		.loc 1 52 22 is_stmt 0 view .LVU169
 725 0030 044A     		ldr	r2, .L55+8
 726 0032 1360     		str	r3, [r2]
  55:Core/Src/mgr_hearbeat.c ****     hw_systick_add_callback(heartbeat_tick_callback);
 727              		.loc 1 55 5 is_stmt 1 view .LVU170
 728 0034 0448     		ldr	r0, .L55+12
 729 0036 FFF7FEFF 		bl	hw_systick_add_callback
 730              	.LVL43:
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
 731              		.loc 1 57 5 view .LVU171
  57:Core/Src/mgr_hearbeat.c ****     return EXIT_SUCCESS;
 732              		.loc 1 57 12 is_stmt 0 view .LVU172
 733 003a EFE7     		b	.L50
 734              	.L56:
 735              		.align	2
 736              	.L55:
 737 003c 00000000 		.word	.LANCHOR7
 738 0040 00000000 		.word	.LANCHOR5
 739 0044 00000000 		.word	.LANCHOR10
 740 0048 00000000 		.word	heartbeat_tick_callback
 741              		.cfi_endproc
 742              	.LFE65:
 744              		.section	.text.heartbeat_set_pattern_mode,"ax",%progbits
 745              		.align	1
 746              		.global	heartbeat_set_pattern_mode
 747              		.syntax unified
 748              		.thumb
 749              		.thumb_func
 751              	heartbeat_set_pattern_mode:
 752              	.LVL44:
 753              	.LFB69:
  79:Core/Src/mgr_hearbeat.c **** {
 754              		.loc 1 79 1 is_stmt 1 view -0
 755              		.cfi_startproc
 756              		@ args = 0, pretend = 0, frame = 0
 757              		@ frame_needed = 0, uses_anonymous_args = 0
  79:Core/Src/mgr_hearbeat.c **** {
 758              		.loc 1 79 1 is_stmt 0 view .LVU174
 759 0000 08B5     		push	{r3, lr}
 760              		.cfi_def_cfa_offset 8
 761              		.cfi_offset 3, -8
 762              		.cfi_offset 14, -4
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
 763              		.loc 1 80 5 is_stmt 1 view .LVU175
  80:Core/Src/mgr_hearbeat.c ****     hb_pattern = mode;
 764              		.loc 1 80 16 is_stmt 0 view .LVU176
 765 0002 044B     		ldr	r3, .L59
 766 0004 1860     		str	r0, [r3]
  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
 767              		.loc 1 81 5 is_stmt 1 view .LVU177
 768 0006 044B     		ldr	r3, .L59+4
 769 0008 1888     		ldrh	r0, [r3]
 770              	.LVL45:
  81:Core/Src/mgr_hearbeat.c ****     heartbeat_set_period_ms(heartbeat_period_ms);
ARM GAS  /tmp/ccv2O6GG.s 			page 20


 771              		.loc 1 81 5 is_stmt 0 view .LVU178
 772 000a FFF7FEFF 		bl	heartbeat_set_period_ms
 773              	.LVL46:
  82:Core/Src/mgr_hearbeat.c ****     heartbeat_reset();
 774              		.loc 1 82 5 is_stmt 1 view .LVU179
 775 000e FFF7FEFF 		bl	heartbeat_reset
 776              	.LVL47:
  83:Core/Src/mgr_hearbeat.c **** }
 777              		.loc 1 83 1 is_stmt 0 view .LVU180
 778 0012 08BD     		pop	{r3, pc}
 779              	.L60:
 780              		.align	2
 781              	.L59:
 782 0014 00000000 		.word	.LANCHOR5
 783 0018 00000000 		.word	.LANCHOR11
 784              		.cfi_endproc
 785              	.LFE69:
 787              		.section	.bss.callback_cnt,"aw",%nobits
 788              		.set	.LANCHOR2,. + 0
 791              	callback_cnt:
 792 0000 00       		.space	1
 793              		.section	.bss.fade_vals,"aw",%nobits
 794              		.align	2
 795              		.set	.LANCHOR6,. + 0
 798              	fade_vals:
 799 0000 00000000 		.space	100
 799      00000000 
 799      00000000 
 799      00000000 
 799      00000000 
 800              		.section	.bss.gpio_led,"aw",%nobits
 801              		.align	2
 802              		.set	.LANCHOR7,. + 0
 805              	gpio_led:
 806 0000 00000000 		.space	12
 806      00000000 
 806      00000000 
 807              		.section	.bss.hb_pattern,"aw",%nobits
 808              		.align	2
 809              		.set	.LANCHOR5,. + 0
 812              	hb_pattern:
 813 0000 00000000 		.space	4
 814              		.section	.bss.heartbeat_is_active,"aw",%nobits
 815              		.set	.LANCHOR3,. + 0
 818              	heartbeat_is_active:
 819 0000 00       		.space	1
 820              		.section	.bss.heartbeat_period_ms,"aw",%nobits
 821              		.align	1
 822              		.set	.LANCHOR11,. + 0
 825              	heartbeat_period_ms:
 826 0000 0000     		.space	2
 827              		.section	.bss.pattern_snapshot,"aw",%nobits
 828              		.align	2
 829              		.set	.LANCHOR10,. + 0
 832              	pattern_snapshot:
 833 0000 00000000 		.space	4
 834              		.section	.bss.poll_mode,"aw",%nobits
ARM GAS  /tmp/ccv2O6GG.s 			page 21


 835              		.set	.LANCHOR4,. + 0
 838              	poll_mode:
 839 0000 00       		.space	1
 840              		.section	.bss.tick_per_window_cnt,"aw",%nobits
 841              		.set	.LANCHOR1,. + 0
 844              	tick_per_window_cnt:
 845 0000 00       		.space	1
 846              		.section	.bss.ticks_per_window,"aw",%nobits
 847              		.align	2
 848              		.set	.LANCHOR8,. + 0
 851              	ticks_per_window:
 852 0000 00000000 		.space	4
 853              		.section	.bss.window_cnt,"aw",%nobits
 854              		.set	.LANCHOR0,. + 0
 857              	window_cnt:
 858 0000 00       		.space	1
 859              		.section	.bss.window_cnt_total,"aw",%nobits
 860              		.set	.LANCHOR9,. + 0
 863              	window_cnt_total:
 864 0000 00       		.space	1
 865              		.text
 866              	.Letext0:
 867              		.file 2 "/home/callum/.config/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tools/arm-no
 868              		.file 3 "/home/callum/.config/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-tools/arm-no
 869              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 870              		.file 5 "Core/Inc/hw_stmgpio.h"
 871              		.file 6 "Core/Inc/mgr_heartbeat.h"
 872              		.file 7 "Core/Inc/hw_systick.h"
ARM GAS  /tmp/ccv2O6GG.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mgr_hearbeat.c
     /tmp/ccv2O6GG.s:18     .text.heartbeat_reset:0000000000000000 $t
     /tmp/ccv2O6GG.s:24     .text.heartbeat_reset:0000000000000000 heartbeat_reset
     /tmp/ccv2O6GG.s:50     .text.heartbeat_reset:0000000000000010 $d
     /tmp/ccv2O6GG.s:57     .text.heartbeat_stop:0000000000000000 $t
     /tmp/ccv2O6GG.s:63     .text.heartbeat_stop:0000000000000000 heartbeat_stop
     /tmp/ccv2O6GG.s:80     .text.heartbeat_stop:0000000000000008 $d
     /tmp/ccv2O6GG.s:85     .text.heartbeat_start:0000000000000000 $t
     /tmp/ccv2O6GG.s:91     .text.heartbeat_start:0000000000000000 heartbeat_start
     /tmp/ccv2O6GG.s:108    .text.heartbeat_start:0000000000000008 $d
     /tmp/ccv2O6GG.s:113    .text.heartbeat_set_poll_mode:0000000000000000 $t
     /tmp/ccv2O6GG.s:119    .text.heartbeat_set_poll_mode:0000000000000000 heartbeat_set_poll_mode
     /tmp/ccv2O6GG.s:136    .text.heartbeat_set_poll_mode:0000000000000008 $d
     /tmp/ccv2O6GG.s:141    .text.heartbeat_get_poll_mode:0000000000000000 $t
     /tmp/ccv2O6GG.s:147    .text.heartbeat_get_poll_mode:0000000000000000 heartbeat_get_poll_mode
     /tmp/ccv2O6GG.s:163    .text.heartbeat_get_poll_mode:0000000000000008 $d
     /tmp/ccv2O6GG.s:168    .text.heartbeat_lower_multiple:0000000000000000 $t
     /tmp/ccv2O6GG.s:174    .text.heartbeat_lower_multiple:0000000000000000 heartbeat_lower_multiple
     /tmp/ccv2O6GG.s:199    .text.heartbeat_poll:0000000000000000 $t
     /tmp/ccv2O6GG.s:205    .text.heartbeat_poll:0000000000000000 heartbeat_poll
     /tmp/ccv2O6GG.s:380    .text.heartbeat_poll:00000000000000c8 $d
     /tmp/ccv2O6GG.s:393    .text.heartbeat_tick_callback:0000000000000000 $t
     /tmp/ccv2O6GG.s:399    .text.heartbeat_tick_callback:0000000000000000 heartbeat_tick_callback
     /tmp/ccv2O6GG.s:441    .text.heartbeat_tick_callback:0000000000000020 $d
     /tmp/ccv2O6GG.s:456    .text.heartbeat_set_period_ms:0000000000000000 $t
     /tmp/ccv2O6GG.s:462    .text.heartbeat_set_period_ms:0000000000000000 heartbeat_set_period_ms
     /tmp/ccv2O6GG.s:660    .text.heartbeat_set_period_ms:00000000000000e0 $d
     /tmp/ccv2O6GG.s:670    .text.heartbeat_init:0000000000000000 $t
     /tmp/ccv2O6GG.s:676    .text.heartbeat_init:0000000000000000 heartbeat_init
     /tmp/ccv2O6GG.s:737    .text.heartbeat_init:000000000000003c $d
     /tmp/ccv2O6GG.s:745    .text.heartbeat_set_pattern_mode:0000000000000000 $t
     /tmp/ccv2O6GG.s:751    .text.heartbeat_set_pattern_mode:0000000000000000 heartbeat_set_pattern_mode
     /tmp/ccv2O6GG.s:782    .text.heartbeat_set_pattern_mode:0000000000000014 $d
     /tmp/ccv2O6GG.s:791    .bss.callback_cnt:0000000000000000 callback_cnt
     /tmp/ccv2O6GG.s:792    .bss.callback_cnt:0000000000000000 $d
     /tmp/ccv2O6GG.s:794    .bss.fade_vals:0000000000000000 $d
     /tmp/ccv2O6GG.s:798    .bss.fade_vals:0000000000000000 fade_vals
     /tmp/ccv2O6GG.s:801    .bss.gpio_led:0000000000000000 $d
     /tmp/ccv2O6GG.s:805    .bss.gpio_led:0000000000000000 gpio_led
     /tmp/ccv2O6GG.s:808    .bss.hb_pattern:0000000000000000 $d
     /tmp/ccv2O6GG.s:812    .bss.hb_pattern:0000000000000000 hb_pattern
     /tmp/ccv2O6GG.s:818    .bss.heartbeat_is_active:0000000000000000 heartbeat_is_active
     /tmp/ccv2O6GG.s:819    .bss.heartbeat_is_active:0000000000000000 $d
     /tmp/ccv2O6GG.s:821    .bss.heartbeat_period_ms:0000000000000000 $d
     /tmp/ccv2O6GG.s:825    .bss.heartbeat_period_ms:0000000000000000 heartbeat_period_ms
     /tmp/ccv2O6GG.s:828    .bss.pattern_snapshot:0000000000000000 $d
     /tmp/ccv2O6GG.s:832    .bss.pattern_snapshot:0000000000000000 pattern_snapshot
     /tmp/ccv2O6GG.s:838    .bss.poll_mode:0000000000000000 poll_mode
     /tmp/ccv2O6GG.s:839    .bss.poll_mode:0000000000000000 $d
     /tmp/ccv2O6GG.s:844    .bss.tick_per_window_cnt:0000000000000000 tick_per_window_cnt
     /tmp/ccv2O6GG.s:845    .bss.tick_per_window_cnt:0000000000000000 $d
     /tmp/ccv2O6GG.s:847    .bss.ticks_per_window:0000000000000000 $d
     /tmp/ccv2O6GG.s:851    .bss.ticks_per_window:0000000000000000 ticks_per_window
     /tmp/ccv2O6GG.s:857    .bss.window_cnt:0000000000000000 window_cnt
     /tmp/ccv2O6GG.s:858    .bss.window_cnt:0000000000000000 $d
     /tmp/ccv2O6GG.s:863    .bss.window_cnt_total:0000000000000000 window_cnt_total
ARM GAS  /tmp/ccv2O6GG.s 			page 23


     /tmp/ccv2O6GG.s:864    .bss.window_cnt_total:0000000000000000 $d

UNDEFINED SYMBOLS
stmgpio_write
__aeabi_ui2f
__aeabi_fdiv
__aeabi_fmul
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2uiz
__aeabi_dadd
__aeabi_dmul
hw_systick_get_freq
stmgpio_setup
hw_systick_add_callback
